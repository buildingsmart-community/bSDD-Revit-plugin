(function(vt,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],m):(vt=typeof globalThis<"u"?globalThis:vt||self,m(vt.BsddSearch={},vt.React,vt.ReactDOM))})(this,function(vt,m,On){"use strict";var N0=Object.defineProperty;var x0=(vt,m,On)=>m in vt?N0(vt,m,{enumerable:!0,configurable:!0,writable:!0,value:On}):vt[m]=On;var Xt=(vt,m,On)=>(x0(vt,typeof m!="symbol"?m+"":m,On),On);function Bu(o){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(o){for(const t in o)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>o[t]})}}return e.default=o,Object.freeze(e)}const Ee=Bu(m),Ny=Bu(On);var Fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ku={exports:{}},bi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy=m,My=Symbol.for("react.element"),Ly=Symbol.for("react.fragment"),Dy=Object.prototype.hasOwnProperty,Uy=xy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hy={key:!0,ref:!0,__self:!0,__source:!0};function $u(o,e,t){var r,s={},a=null,c=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)Dy.call(e,r)&&!Hy.hasOwnProperty(r)&&(s[r]=e[r]);if(o&&o.defaultProps)for(r in e=o.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:My,type:o,key:a,ref:c,props:s,_owner:Uy.current}}bi.Fragment=Ly,bi.jsx=$u,bi.jsxs=$u,Ku.exports=bi;var me=Ku.exports,ha={},Gu=On;ha.createRoot=Gu.createRoot,ha.hydrateRoot=Gu.hydrateRoot;/*! @azure/msal-common v14.7.1 2024-02-17 */const D={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},_i={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},Bo=[D.OPENID_SCOPE,D.PROFILE_SCOPE,D.OFFLINE_ACCESS_SCOPE],zu=[...Bo,D.EMAIL_SCOPE],Nn={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},at={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},ur={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ii={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},ct={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},qu={PLAIN:"plain",S256:"S256"},Ko={QUERY:"query",FRAGMENT:"fragment"},Fy={...Ko,FORM_POST:"form_post"},Wu={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Ri={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},wt={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ue={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},fa="appmetadata",By="client_info",$o="1",ki={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Ut={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},ft={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ue={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Go={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Vu={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Yu={username:"username",password:"password"},Pi={httpSuccess:200,httpBadRequest:400},eo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},ga={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},dr={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Ky={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};/*! @azure/msal-common v14.7.1 2024-02-17 */const pa="unexpected_error",$y="post_request_failed";/*! @azure/msal-common v14.7.1 2024-02-17 */const ju={[pa]:"Unexpected error in authentication.",[$y]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class $e extends Error{constructor(e,t,r){const s=t?`${e}: ${t}`:e;super(s),Object.setPrototypeOf(this,$e.prototype),this.errorCode=e||D.EMPTY_STRING,this.errorMessage=t||D.EMPTY_STRING,this.subError=r||D.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Qu(o,e){return new $e(o,e?`${ju[o]} ${e}`:ju[o])}/*! @azure/msal-common v14.7.1 2024-02-17 */const ma="client_info_decoding_error",Ju="client_info_empty_error",ya="token_parsing_error",Xu="null_or_empty_token",zn="endpoints_resolution_error",Zu="network_error",ed="openid_config_error",td="hash_not_deserialized",to="invalid_state",nd="state_mismatch",Oi="state_not_found",rd="nonce_mismatch",Ca="auth_time_not_found",od="max_age_transpired",Gy="multiple_matching_tokens",zy="multiple_matching_accounts",id="multiple_matching_appMetadata",sd="request_cannot_be_made",ad="cannot_remove_empty_scope",cd="cannot_append_scopeset",va="empty_input_scopeset",qy="device_code_polling_cancelled",Wy="device_code_expired",Vy="device_code_unknown_error",wa="no_account_in_silent_request",ld="invalid_cache_record",Ta="invalid_cache_environment",Ea="no_account_found",Aa="no_crypto_object",Sa="unexpected_credential_type",Yy="invalid_assertion",jy="invalid_client_credential",hr="token_refresh_required",Qy="user_timeout_reached",ud="token_claims_cnf_required_for_signedjwt",dd="authorization_code_missing_from_server_response",hd="binding_key_not_removed",fd="end_session_endpoint_not_supported",ba="key_id_missing",Jy="no_network_connectivity",Xy="user_canceled",Zy="missing_tenant_id_error",we="method_not_implemented",eC="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.7.1 2024-02-17 */const gd={[ma]:"The client info could not be parsed/decoded correctly",[Ju]:"The client info was empty",[ya]:"Token cannot be parsed",[Xu]:"The token is null or empty",[zn]:"Endpoints cannot be resolved",[Zu]:"Network request failed",[ed]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[td]:"The hash parameters could not be deserialized",[to]:"State was not the expected format",[nd]:"State mismatch error",[Oi]:"State not found",[rd]:"Nonce mismatch error",[Ca]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[od]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Gy]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[zy]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[id]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[sd]:"Token request cannot be made without authorization code or refresh token.",[ad]:"Cannot remove null or empty scope from ScopeSet",[cd]:"Cannot append ScopeSet",[va]:"Empty input ScopeSet cannot be processed",[qy]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Wy]:"Device code is expired.",[Vy]:"Device code stopped polling for unknown reasons.",[wa]:"Please pass an account object, silent flow is not supported without account information",[ld]:"Cache record object was null or undefined.",[Ta]:"Invalid environment when attempting to create cache entry",[Ea]:"No account found in cache for given key.",[Aa]:"No crypto object detected.",[Sa]:"Unexpected credential type.",[Yy]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[jy]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[hr]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Qy]:"User defined timeout for device code polling reached",[ud]:"Cannot generate a POP jwt if the token_claims are not populated",[dd]:"Server response does not contain an authorization code to proceed",[hd]:"Could not remove the credential's binding key from storage.",[fd]:"The provided authority does not support logout",[ba]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Jy]:"No network connectivity. Check your internet connection.",[Xy]:"User cancelled the flow.",[Zy]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[we]:"This method has not been implemented",[eC]:"The nested app auth bridge is disabled"};class Ni extends $e{constructor(e,t){super(e,t?`${gd[e]}: ${t}`:gd[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Ni.prototype)}}function $(o,e){return new Ni(o,e)}/*! @azure/msal-common v14.7.1 2024-02-17 */const xi={createNewGuid:()=>{throw $(we)},base64Decode:()=>{throw $(we)},base64Encode:()=>{throw $(we)},async getPublicKeyThumbprint(){throw $(we)},async removeTokenBindingKey(){throw $(we)},async clearKeystore(){throw $(we)},async signJwt(){throw $(we)},async hashString(){throw $(we)}};/*! @azure/msal-common v14.7.1 2024-02-17 */var He;(function(o){o[o.Error=0]="Error",o[o.Warning=1]="Warning",o[o.Info=2]="Info",o[o.Verbose=3]="Verbose",o[o.Trace=4]="Trace"})(He||(He={}));class fr{constructor(e,t,r){this.level=He.Info;const s=()=>{},a=e||fr.createDefaultLoggerOptions();this.localCallback=a.loggerCallback||s,this.piiLoggingEnabled=a.piiLoggingEnabled||!1,this.level=typeof a.logLevel=="number"?a.logLevel:He.Info,this.correlationId=a.correlationId||D.EMPTY_STRING,this.packageName=t||D.EMPTY_STRING,this.packageVersion=r||D.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:He.Info}}clone(e,t,r){return new fr({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const a=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${He[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,a,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:He.Error,containsPii:!1,correlationId:t||D.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:He.Error,containsPii:!0,correlationId:t||D.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:He.Warning,containsPii:!1,correlationId:t||D.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:He.Warning,containsPii:!0,correlationId:t||D.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:He.Info,containsPii:!1,correlationId:t||D.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:He.Info,containsPii:!0,correlationId:t||D.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:He.Verbose,containsPii:!1,correlationId:t||D.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:He.Verbose,containsPii:!0,correlationId:t||D.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:He.Trace,containsPii:!1,correlationId:t||D.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:He.Trace,containsPii:!0,correlationId:t||D.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.7.1 2024-02-17 */const pd="@azure/msal-common",_a="14.7.1";/*! @azure/msal-common v14.7.1 2024-02-17 */const Ia={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v14.7.1 2024-02-17 */function Pr(o,e){const t=tC(o);try{const r=e(t);return JSON.parse(r)}catch{throw $(ya)}}function tC(o){if(!o)throw $(Xu);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(o);if(!t||t.length<4)throw $(ya);return t[2]}function md(o,e){if(e===0||Date.now()-3e5>o+e)throw $(od)}/*! @azure/msal-common v14.7.1 2024-02-17 */function xn(){return Math.round(new Date().getTime()/1e3)}function Ra(o,e){const t=Number(o)||0;return xn()+e>t}function nC(o){return Number(o)>xn()}/*! @azure/msal-common v14.7.1 2024-02-17 */function no(o){return[rC(o),oC(o),iC(o),sC(o),aC(o)].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}function Mi(o,e,t,r,s){return{credentialType:ue.ID_TOKEN,homeAccountId:o,environment:e,clientId:r,secret:t,realm:s}}function Li(o,e,t,r,s,a,c,u,d,f,g,y,v,T,A){var b,N;const S={homeAccountId:o,credentialType:ue.ACCESS_TOKEN,secret:t,cachedAt:xn().toString(),expiresOn:c.toString(),extendedExpiresOn:u.toString(),environment:e,clientId:r,realm:s,target:a,tokenType:g||Ue.BEARER};if(y&&(S.userAssertionHash=y),f&&(S.refreshOn=f.toString()),T&&(S.requestedClaims=T,S.requestedClaimsHash=A),((b=S.tokenType)==null?void 0:b.toLowerCase())!==Ue.BEARER.toLowerCase())switch(S.credentialType=ue.ACCESS_TOKEN_WITH_AUTH_SCHEME,S.tokenType){case Ue.POP:const I=Pr(t,d);if(!((N=I==null?void 0:I.cnf)!=null&&N.kid))throw $(ud);S.keyId=I.cnf.kid;break;case Ue.SSH:S.keyId=v}return S}function yd(o,e,t,r,s,a,c){const u={credentialType:ue.REFRESH_TOKEN,homeAccountId:o,environment:e,clientId:r,secret:t};return a&&(u.userAssertionHash=a),s&&(u.familyId=s),c&&(u.expiresOn=c.toString()),u}function ka(o){return o.hasOwnProperty("homeAccountId")&&o.hasOwnProperty("environment")&&o.hasOwnProperty("credentialType")&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("secret")}function Cd(o){return o?ka(o)&&o.hasOwnProperty("realm")&&o.hasOwnProperty("target")&&(o.credentialType===ue.ACCESS_TOKEN||o.credentialType===ue.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function vd(o){return o?ka(o)&&o.hasOwnProperty("realm")&&o.credentialType===ue.ID_TOKEN:!1}function wd(o){return o?ka(o)&&o.credentialType===ue.REFRESH_TOKEN:!1}function rC(o){return[o.homeAccountId,o.environment].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}function oC(o){const e=o.credentialType===ue.REFRESH_TOKEN&&o.familyId||o.clientId;return[o.credentialType,e,o.realm||""].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}function iC(o){return(o.target||"").toLowerCase()}function sC(o){return(o.requestedClaimsHash||"").toLowerCase()}function aC(o){return o.tokenType&&o.tokenType.toLowerCase()!==Ue.BEARER.toLowerCase()?o.tokenType.toLowerCase():""}function cC(o,e){const t=o.indexOf(ft.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function lC(o,e){let t=!1;o&&(t=o.indexOf(Go.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function uC({environment:o,clientId:e}){return[fa,o,e].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}function dC(o,e){return e?o.indexOf(fa)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function hC(o,e){return e?o.indexOf(ki.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Td(){return xn()+ki.REFRESH_TIME_SECONDS}function Di(o,e,t){o.authorization_endpoint=e.authorization_endpoint,o.token_endpoint=e.token_endpoint,o.end_session_endpoint=e.end_session_endpoint,o.issuer=e.issuer,o.endpointsFromNetwork=t,o.jwks_uri=e.jwks_uri}function Pa(o,e,t){o.aliases=e.aliases,o.preferred_cache=e.preferred_cache,o.preferred_network=e.preferred_network,o.aliasesFromNetwork=t}function Ed(o){return o.expiresAt<=xn()}/*! @azure/msal-common v14.7.1 2024-02-17 */const Ad="redirect_uri_empty",fC="claims_request_parsing_error",Sd="authority_uri_insecure",zo="url_parse_error",bd="empty_url_error",_d="empty_input_scopes_error",Id="invalid_prompt_value",Oa="invalid_claims",Rd="token_request_empty",kd="logout_request_empty",Pd="invalid_code_challenge_method",Na="pkce_params_missing",xa="invalid_cloud_discovery_metadata",Od="invalid_authority_metadata",Nd="untrusted_authority",Ui="missing_ssh_jwk",xd="missing_ssh_kid",gC="missing_nonce_authentication_header",pC="invalid_authentication_header",Md="cannot_set_OIDCOptions",Ld="cannot_allow_native_broker",Dd="authority_mismatch";/*! @azure/msal-common v14.7.1 2024-02-17 */const mC={[Ad]:"A redirect URI is required for all calls, and none has been set.",[fC]:"Could not parse the given claims request object.",[Sd]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[zo]:"URL could not be parsed into appropriate segments.",[bd]:"URL was empty or null.",[_d]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Id]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Oa]:"Given claims parameter must be a stringified JSON object.",[Rd]:"Token request was empty and not found in cache.",[kd]:"The logout request was null or undefined.",[Pd]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Na]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[xa]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Od]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Nd]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Ui]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[xd]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[gC]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[pC]:"Invalid authentication header provided",[Md]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ld]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Dd]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Ma extends $e{constructor(e){super(e,mC[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Ma.prototype)}}function Fe(o){return new Ma(o)}/*! @azure/msal-common v14.7.1 2024-02-17 */class mn{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),s=a=>decodeURIComponent(a.replace(/\+/g," "));return r.forEach(a=>{if(a.trim()){const[c,u]=a.split(/=(.+)/g,2);c&&u&&(t[s(c)]=s(u))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class Ze{constructor(e){const t=e?mn.trimArrayEntries([...e]):[],r=t?mn.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(s=>this.scopes.add(s))}static fromString(e){const r=(e||D.EMPTY_STRING).split(" ");return new Ze(r)}static createSearchScopes(e){const t=new Ze(e);return t.containsOnlyOIDCScopes()?t.removeScope(D.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw Fe(_d)}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new Ze(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return zu.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw $(cd)}}removeScope(e){if(!e)throw $(ad);this.scopes.delete(e.trim())}removeOIDCScopes(){zu.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw $(va);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw $(va);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),s=this.getScopeCount();return t.size<s+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):D.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.7.1 2024-02-17 */function Hi(o,e){if(!o)throw $(Ju);try{const t=e(o);return JSON.parse(t)}catch{throw $(ma)}}function ro(o){if(!o)throw $(ma);const e=o.split(wt.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?D.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.7.1 2024-02-17 */function La(o,e){return!!o&&!!e&&o===e.split(".")[1]}function Da(o,e){const{oid:t,sub:r,tid:s,name:a,tfp:c,acr:u}=e,d=s||c||u||"";return{tenantId:d,localAccountId:t||r||"",name:a,isHomeTenant:La(d,o)}}function Ua(o,e,t,r){let s=o;if(e){const{isHomeTenant:a,...c}=e;s={...o,...c}}if(t){const{isHomeTenant:a,...c}=Da(o.homeAccountId,t);return s={...s,...c,idTokenClaims:t,idToken:r},s}return s}/*! @azure/msal-common v14.7.1 2024-02-17 */const yn={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.7.1 2024-02-17 */function Ud(o){return o&&(o.tid||o.tfp||o.acr)||null}/*! @azure/msal-common v14.7.1 2024-02-17 */const qn={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.7.1 2024-02-17 */class tt{generateAccountId(){return[this.homeAccountId,this.environment].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return tt.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){const s=new tt;t.authorityType===yn.Adfs?s.authorityType=Ri.ADFS_ACCOUNT_TYPE:t.protocolMode===qn.AAD?s.authorityType=Ri.MSSTS_ACCOUNT_TYPE:s.authorityType=Ri.GENERIC_ACCOUNT_TYPE;let a;e.clientInfo&&r&&(a=Hi(e.clientInfo,r)),s.clientInfo=e.clientInfo,s.homeAccountId=e.homeAccountId,s.nativeAccountId=e.nativeAccountId;const c=e.environment||t&&t.getPreferredCache();if(!c)throw $(Ta);s.environment=c,s.realm=(a==null?void 0:a.utid)||Ud(e.idTokenClaims)||"",s.localAccountId=(a==null?void 0:a.uid)||e.idTokenClaims.oid||e.idTokenClaims.sub||"";const u=e.idTokenClaims.preferred_username||e.idTokenClaims.upn,d=e.idTokenClaims.emails?e.idTokenClaims.emails[0]:null;if(s.username=u||d||"",s.name=e.idTokenClaims.name,s.cloudGraphHostName=e.cloudGraphHostName,s.msGraphHost=e.msGraphHost,e.tenantProfiles)s.tenantProfiles=e.tenantProfiles;else{const f=[];if(e.idTokenClaims){const g=Da(e.homeAccountId,e.idTokenClaims);f.push(g)}s.tenantProfiles=f}return s}static createFromAccountInfo(e,t,r){var a;const s=new tt;return s.authorityType=e.authorityType||Ri.GENERIC_ACCOUNT_TYPE,s.homeAccountId=e.homeAccountId,s.localAccountId=e.localAccountId,s.nativeAccountId=e.nativeAccountId,s.realm=e.tenantId,s.environment=e.environment,s.username=e.username,s.name=e.name,s.cloudGraphHostName=t,s.msGraphHost=r,s.tenantProfiles=Array.from(((a=e.tenantProfiles)==null?void 0:a.values())||[]),s}static generateHomeAccountId(e,t,r,s,a){if(!(t===yn.Adfs||t===yn.Dsts)){if(e)try{const c=Hi(e,s.base64Decode);if(c.uid&&c.utid)return`${c.uid}.${c.utid}`}catch{}r.warning("No client info in response")}return(a==null?void 0:a.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let s=!0;if(r){const a=e.idTokenClaims||{},c=t.idTokenClaims||{};s=a.iat===c.iat&&a.nonce===c.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&s}}/*! @azure/msal-common v14.7.1 2024-02-17 */function Hd(o){return o.startsWith("#/")?o.substring(2):o.startsWith("#")||o.startsWith("?")?o.substring(1):o}function Fi(o){if(!o||o.indexOf("=")<0)return null;try{const e=Hd(o),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw $(td)}return null}/*! @azure/msal-common v14.7.1 2024-02-17 */class Ie{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Fe(bd);e.includes("#")||(this._urlString=Ie.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return mn.endsWith(t,"?")?t=t.slice(0,-1):mn.endsWith(t,"?/")&&(t=t.slice(0,-2)),mn.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Fe(zo)}if(!e.HostNameAndPort||!e.PathSegments)throw Fe(zo);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Fe(Sd)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return Ie.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===ur.COMMON||r[0]===ur.ORGANIZATIONS)&&(r[0]=e),Ie.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Fe(zo);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let s=r.AbsolutePath.split("/");return s=s.filter(a=>a&&a.length>0),r.PathSegments=s,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Fe(zo);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===D.FORWARD_SLASH){const s=new Ie(t).getUrlComponents();return s.Protocol+"//"+s.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Ie(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Fi(e)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const Fd={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Bd=Fd.endpointMetadata,Ha=Fd.instanceDiscoveryMetadata,Kd=new Set;Ha.metadata.forEach(o=>{o.aliases.forEach(e=>{Kd.add(e)})});function yC(o,e){var s;let t;const r=o.canonicalAuthority;if(r){const a=new Ie(r).getUrlComponents().HostNameAndPort;t=$d(a,(s=o.cloudDiscoveryMetadata)==null?void 0:s.metadata,Ut.CONFIG,e)||$d(a,Ha.metadata,Ut.HARDCODED_VALUES,e)||o.knownAuthorities}return t||[]}function $d(o,e,t,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${t}`),o&&e){const s=Bi(e,o);if(s)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),s.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function CC(o){return Bi(Ha.metadata,o)}function Bi(o,e){for(let t=0;t<o.length;t++){const r=o[t];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v14.7.1 2024-02-17 */class oo{constructor(e,t,r,s){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(pd,_a),this.staticAuthorityOptions=s}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);return t.length>1?t.sort(s=>s.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getAccountInfoForTenantProfiles(r,t))}getAccountInfoForTenantProfiles(e,t){return this.getTenantProfilesFromAccountEntity(e,t==null?void 0:t.tenantId,t)}getTenantedAccountInfoByFilter(e,t,r,s){let a=null,c;if(s&&!this.tenantProfileMatchesFilter(r,s))return null;const u=this.getIdToken(e,t,r.tenantId);return u&&(c=Pr(u.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,s))?null:(a=Ua(e,r,c,u==null?void 0:u.secret),a)}getTenantProfilesFromAccountEntity(e,t,r){const s=e.getAccountInfo();let a=s.tenantProfiles||new Map;const c=this.getTokenKeys();if(t){const d=a.get(t);if(d)a=new Map([[t,d]]);else return[]}const u=[];return a.forEach(d=>{const f=this.getTenantedAccountInfoByFilter(s,c,d,r);f&&u.push(f)}),u}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t){if(!e)throw $(ld);e.account&&this.setAccount(e.account),e.idToken&&(t==null?void 0:t.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(t==null?void 0:t.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(t==null?void 0:t.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}async saveAccessToken(e){const t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),s=Ze.fromString(e.target),a=[];r.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,t,!1))return;const u=this.getAccessTokenCredential(c);u&&this.credentialMatchesFilter(u,t)&&Ze.fromString(u.target).intersectingScopeSets(s)&&a.push(this.removeAccessToken(c))}),await Promise.all(a),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),r=[];return t.forEach(s=>{var d;if(!this.isAccountKey(s,e.homeAccountId))return;const a=this.getAccount(s,this.commonLogger);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;const c={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},u=(d=a.tenantProfiles)==null?void 0:d.filter(f=>this.tenantProfileMatchesFilter(f,c));u&&u.length===0||r.push(a)}),r}isAccountKey(e,t,r){return!(e.split(wt.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(wt.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(t.indexOf(ue.ID_TOKEN.toLowerCase())===-1&&t.indexOf(ue.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(ue.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(ue.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(ue.REFRESH_TOKEN.toLowerCase())>-1){const r=`${ue.REFRESH_TOKEN}${wt.CACHE_KEY_SEPARATOR}${this.clientId}${wt.CACHE_KEY_SEPARATOR}`,s=`${ue.REFRESH_TOKEN}${wt.CACHE_KEY_SEPARATOR}${$o}${wt.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(s.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===ue.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Ue.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)}getAppMetadataFilteredByInternal(e,t){const r=this.getKeys(),s={};return r.forEach(a=>{if(!this.isAppMetadata(a))return;const c=this.getAppMetadata(a);c&&(e&&!this.matchEnvironment(c,e)||t&&!this.matchClientId(c,t)||(s[a]=c))}),s}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(s=>{if(!this.isAuthorityMetadata(s)||s.indexOf(this.clientId)===-1)return;const a=this.getAuthorityMetadata(s);a&&a.aliases.indexOf(e)!==-1&&(r=a)}),r}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach(r=>{t.push(this.removeAccount(r))}),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),r=e.generateAccountId(),s=[];t.idToken.forEach(a=>{a.indexOf(r)===0&&this.removeIdToken(a)}),t.accessToken.forEach(a=>{a.indexOf(r)===0&&s.push(this.removeAccessToken(a))}),t.refreshToken.forEach(a=>{a.indexOf(r)===0&&this.removeRefreshToken(a)}),await Promise.all(s)}updateOutdatedCachedAccount(e,t,r){var s;if(t&&t.isSingleTenant()){(s=this.commonLogger)==null||s.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const a=this.getAccountKeys().filter(g=>g.startsWith(t.homeAccountId)),c=[];a.forEach(g=>{const y=this.getCachedAccountEntity(g);y&&c.push(y)});const u=c.find(g=>La(g.realm,g.homeAccountId))||c[0];u.tenantProfiles=c.map(g=>({tenantId:g.realm,localAccountId:g.localAccountId,name:g.name,isHomeTenant:La(g.realm,g.homeAccountId)}));const d=oo.toObject(new tt,{...u}),f=d.generateAccountKey();return a.forEach(g=>{g!==f&&this.removeOutdatedAccount(e)}),this.setAccount(d),r==null||r.verbose("Updated an outdated account entity in the cache"),d}return t}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===ue.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Ue.POP){const s=t.keyId;if(s)try{await this.cryptoImpl.removeTokenBindingKey(s)}catch{throw $(hd)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){const t=tt.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,s,a){this.commonLogger.trace("CacheManager - getIdToken called");const c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ue.ID_TOKEN,clientId:this.clientId,realm:r},u=this.getIdTokensByFilter(c,t),d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(d>1){let f=u;if(!r){const g=new Map;u.forEach((v,T)=>{v.realm===e.tenantId&&g.set(T,v)});const y=g.size;if(y<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),u.values().next().value;if(y===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),g.values().next().value;f=g}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),f.forEach((g,y)=>{this.removeIdToken(y)}),s&&a&&s.addFields({multiMatchedID:u.size},a),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),u.values().next().value}getIdTokensByFilter(e,t){const r=t&&t.idToken||this.getTokenKeys().idToken,s=new Map;return r.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;const c=this.getIdTokenCredential(a);c&&this.credentialMatchesFilter(c,e)&&s.set(a,c)}),s}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,s,a,c){this.commonLogger.trace("CacheManager - getAccessToken called");const u=Ze.createSearchScopes(t.scopes),d=t.authenticationScheme||Ue.BEARER,f=d&&d.toLowerCase()!==Ue.BEARER.toLowerCase()?ue.ACCESS_TOKEN_WITH_AUTH_SCHEME:ue.ACCESS_TOKEN,g={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:f,clientId:this.clientId,realm:s||e.tenantId,target:u,tokenType:d,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},y=r&&r.accessToken||this.getTokenKeys().accessToken,v=[];y.forEach(A=>{if(this.accessTokenKeyMatchesFilter(A,g,!0)){const S=this.getAccessTokenCredential(A);S&&this.credentialMatchesFilter(S,g)&&v.push(S)}});const T=v.length;return T<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):T>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),v.forEach(A=>{this.removeAccessToken(no(A))}),a&&c&&a.addFields({multiMatchedAT:v.length},c),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),v[0])}accessTokenKeyMatchesFilter(e,t,r){const s=e.toLowerCase();if(t.clientId&&s.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&s.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&s.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&s.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){const a=t.target.asArray();for(let c=0;c<a.length;c++){if(r&&!s.includes(a[c].toLowerCase()))return!1;if(!r&&s.includes(a[c].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),r=[];return t.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;const a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,e)&&r.push(a)}),r}getRefreshToken(e,t,r,s,a){this.commonLogger.trace("CacheManager - getRefreshToken called");const c=t?$o:void 0,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ue.REFRESH_TOKEN,clientId:this.clientId,familyId:c},d=r&&r.refreshToken||this.getTokenKeys().refreshToken,f=[];d.forEach(y=>{if(this.refreshTokenKeyMatchesFilter(y,u)){const v=this.getRefreshTokenCredential(y);v&&this.credentialMatchesFilter(v,u)&&f.push(v)}});const g=f.length;return g<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(g>1&&s&&a&&s.addFields({multiMatchedRT:g},a),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),f[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),s=Object.keys(r).map(c=>r[c]),a=s.length;if(a<1)return null;if(a>1)throw $(id);return s[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===$o)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){const r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var r;return t.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,t){return!!(e&&typeof e=="string"&&(t==null?void 0:t.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const s=yC(this.staticAuthorityOptions,this.commonLogger);if(s.includes(t)&&s.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==ue.ACCESS_TOKEN&&e.credentialType!==ue.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Ze.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(fa)!==-1}isAuthorityMetadata(e){return e.indexOf(ki.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${ki.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class vC extends oo{setAccount(){throw $(we)}getAccount(){throw $(we)}getCachedAccountEntity(){throw $(we)}setIdTokenCredential(){throw $(we)}getIdTokenCredential(){throw $(we)}setAccessTokenCredential(){throw $(we)}getAccessTokenCredential(){throw $(we)}setRefreshTokenCredential(){throw $(we)}getRefreshTokenCredential(){throw $(we)}setAppMetadata(){throw $(we)}getAppMetadata(){throw $(we)}setServerTelemetry(){throw $(we)}getServerTelemetry(){throw $(we)}setAuthorityMetadata(){throw $(we)}getAuthorityMetadata(){throw $(we)}getAuthorityMetadataKeys(){throw $(we)}setThrottlingCache(){throw $(we)}getThrottlingCache(){throw $(we)}removeItem(){throw $(we)}containsKey(){throw $(we)}getKeys(){throw $(we)}getAccountKeys(){throw $(we)}getTokenKeys(){throw $(we)}async clear(){throw $(we)}updateCredentialCacheKey(){throw $(we)}removeOutdatedAccount(){throw $(we)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const Gd={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},wC={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:He.Info,correlationId:D.EMPTY_STRING},TC={claimsBasedCachingEnabled:!1},EC={async sendGetRequestAsync(){throw $(we)},async sendPostRequestAsync(){throw $(we)}},AC={sku:D.SKU,version:_a,cpu:D.EMPTY_STRING,os:D.EMPTY_STRING},SC={clientSecret:D.EMPTY_STRING,clientAssertion:void 0},bC={azureCloudInstance:Ia.None,tenant:`${D.DEFAULT_COMMON_TENANT}`},_C={application:{appName:"",appVersion:""}};function IC({authOptions:o,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:s,networkInterface:a,cryptoInterface:c,clientCredentials:u,libraryInfo:d,telemetry:f,serverTelemetryManager:g,persistencePlugin:y,serializableCache:v}){const T={...wC,...t};return{authOptions:RC(o),systemOptions:{...Gd,...e},loggerOptions:T,cacheOptions:{...TC,...r},storageInterface:s||new vC(o.clientId,xi,new fr(T)),networkInterface:a||EC,cryptoInterface:c||xi,clientCredentials:u||SC,libraryInfo:{...AC,...d},telemetry:{..._C,...f},serverTelemetryManager:g||null,persistencePlugin:y||null,serializableCache:v||null}}function RC(o){return{clientCapabilities:[],azureCloudOptions:bC,skipAuthorityMetadataCache:!1,...o}}function Fa(o){return o.authOptions.authority.options.protocolMode===qn.OIDC}/*! @azure/msal-common v14.7.1 2024-02-17 */class gr extends $e{constructor(e,t,r){super(e,t,r),this.name="ServerError",Object.setPrototypeOf(this,gr.prototype)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class Mn{static generateThrottlingStorageKey(e){return`${Go.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){var a;const r=Mn.generateThrottlingStorageKey(t),s=e.getThrottlingCache(r);if(s){if(s.throttleTime<Date.now()){e.removeItem(r);return}throw new gr(((a=s.errorCodes)==null?void 0:a.join(" "))||D.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,t,r){if(Mn.checkResponseStatus(r)||Mn.checkResponseForRetryAfter(r)){const s={throttleTime:Mn.calculateThrottleTime(parseInt(r.headers[Nn.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Mn.generateThrottlingStorageKey(t),s)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Nn.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||Go.DEFAULT_THROTTLE_TIME_SECONDS),r+Go.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,s){const a={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:s,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},c=this.generateThrottlingStorageKey(a);e.removeItem(c)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class kC{constructor(e,t){this.networkClient=e,this.cacheManager=t}async sendPostRequest(e,t,r){Mn.preProcess(this.cacheManager,e);let s;try{s=await this.networkClient.sendPostRequestAsync(t,r)}catch(a){throw a instanceof $e?a:$(Zu)}return Mn.postProcess(this.cacheManager,e,s),s}}/*! @azure/msal-common v14.7.1 2024-02-17 */const Ht={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.7.1 2024-02-17 */const io="client_id",PC="redirect_uri",zd="response_type",OC="response_mode",NC="grant_type",xC="claims",MC="scope",LC="refresh_token",DC="state",UC="nonce",HC="prompt",FC="code",BC="code_challenge",KC="code_challenge_method",$C="code_verifier",GC="client-request-id",zC="x-client-SKU",qC="x-client-VER",WC="x-client-OS",VC="x-client-CPU",YC="x-client-current-telemetry",jC="x-client-last-telemetry",QC="x-ms-lib-capability",JC="x-app-name",XC="x-app-ver",ZC="post_logout_redirect_uri",ev="id_token_hint",tv="device_code",nv="client_secret",rv="client_assertion",ov="client_assertion_type",qd="token_type",Wd="req_cnf",iv="assertion",sv="requested_token_use",Vd="return_spa_code",av="nativebroker",cv="logout_hint",lv="sid",uv="login_hint",dv="domain_hint";/*! @azure/msal-common v14.7.1 2024-02-17 */class Or{static validateRedirectUri(e){if(!e)throw Fe(Ad)}static validatePrompt(e){const t=[];for(const r in ct)t.push(ct[r]);if(t.indexOf(e)<0)throw Fe(Id)}static validateClaims(e){try{JSON.parse(e)}catch{throw Fe(Oa)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Fe(Na);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([qu.PLAIN,qu.S256].indexOf(e)<0)throw Fe(Pd)}static sanitizeEQParams(e,t){return e?(t.forEach((r,s)=>{e[s]&&delete e[s]}),Object.fromEntries(Object.entries(e).filter(r=>r[1]!==""))):{}}}/*! @azure/msal-common v14.7.1 2024-02-17 */class qo{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(zd,encodeURIComponent(D.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(zd,encodeURIComponent(`${D.TOKEN_RESPONSE_TYPE} ${D.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(OC,encodeURIComponent(e||Fy.QUERY))}addNativeBroker(){this.parameters.set(av,encodeURIComponent("1"))}addScopes(e,t=!0,r=Bo){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const s=t?[...e||[],...r]:e||[],a=new Ze(s);this.parameters.set(MC,encodeURIComponent(a.printScopes()))}addClientId(e){this.parameters.set(io,encodeURIComponent(e))}addRedirectUri(e){Or.validateRedirectUri(e),this.parameters.set(PC,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Or.validateRedirectUri(e),this.parameters.set(ZC,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(ev,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(dv,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(uv,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Nn.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(Nn.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(lv,encodeURIComponent(e))}addClaims(e,t){const r=this.addClientCapabilitiesToClaims(e,t);Or.validateClaims(r),this.parameters.set(xC,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(GC,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(zC,e.sku),this.parameters.set(qC,e.version),e.os&&this.parameters.set(WC,e.os),e.cpu&&this.parameters.set(VC,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(JC,e.appName),e!=null&&e.appVersion&&this.parameters.set(XC,e.appVersion)}addPrompt(e){Or.validatePrompt(e),this.parameters.set(`${HC}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(DC,encodeURIComponent(e))}addNonce(e){this.parameters.set(UC,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Or.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(BC,encodeURIComponent(e)),this.parameters.set(KC,encodeURIComponent(t));else throw Fe(Na)}addAuthorizationCode(e){this.parameters.set(FC,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(tv,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(LC,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set($C,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(nv,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(rv,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(ov,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(iv,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(sv,encodeURIComponent(e))}addGrantType(e){this.parameters.set(NC,encodeURIComponent(e))}addClientInfo(){this.parameters.set(By,"1")}addExtraQueryParameters(e){const t=Or.sanitizeEQParams(e,this.parameters);Object.keys(t).forEach(r=>{this.parameters.set(r,e[r])})}addClientCapabilitiesToClaims(e,t){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw Fe(Oa)}return t&&t.length>0&&(r.hasOwnProperty(Ii.ACCESS_TOKEN)||(r[Ii.ACCESS_TOKEN]={}),r[Ii.ACCESS_TOKEN][Ii.XMS_CC]={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set(Yu.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(Yu.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(qd,Ue.POP),this.parameters.set(Wd,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(qd,Ue.SSH),this.parameters.set(Wd,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(YC,e.generateCurrentRequestHeaderValue()),this.parameters.set(jC,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(QC,Go.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(cv,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((t,r)=>{e.push(`${r}=${t}`)}),e.join("&")}}/*! @azure/msal-common v14.7.1 2024-02-17 */function hv(o){return o.hasOwnProperty("authorization_endpoint")&&o.hasOwnProperty("token_endpoint")&&o.hasOwnProperty("issuer")&&o.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.7.1 2024-02-17 */function fv(o){return o.hasOwnProperty("tenant_discovery_endpoint")&&o.hasOwnProperty("metadata")}/*! @azure/msal-common v14.7.1 2024-02-17 */function gv(o){return o.hasOwnProperty("error")&&o.hasOwnProperty("error_description")}/*! @azure/msal-common v14.7.1 2024-02-17 */const M={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},pv={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v14.7.1 2024-02-17 */const Nr=(o,e,t,r,s)=>(...a)=>{t.trace(`Executing function ${e}`);const c=r==null?void 0:r.startMeasurement(e,s);if(s){const u=e+"CallCount";r==null||r.incrementFields({[u]:1},s)}try{const u=o(...a);return c==null||c.end({success:!0}),t.trace(`Returning result from ${e}`),u}catch(u){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(u))}catch{t.trace("Unable to print error message.")}throw c==null||c.end({success:!1}),u}},q=(o,e,t,r,s)=>(...a)=>{t.trace(`Executing function ${e}`);const c=r==null?void 0:r.startMeasurement(e,s);if(s){const u=e+"CallCount";r==null||r.incrementFields({[u]:1},s)}return r==null||r.setPreQueueTime(e,s),o(...a).then(u=>(t.trace(`Returning result from ${e}`),c==null||c.end({success:!0}),u)).catch(u=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(u))}catch{t.trace("Unable to print error message.")}throw c==null||c.end({success:!1}),u})};/*! @azure/msal-common v14.7.1 2024-02-17 */class Ki{constructor(e,t,r,s){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=s}async detectRegion(e,t){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(M.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=eo.ENVIRONMENT_VARIABLE;else{const a=Ki.IMDS_OPTIONS;try{const c=await q(this.getRegionFromIMDS.bind(this),M.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(D.IMDS_VERSION,a);if(c.status===Pi.httpSuccess&&(r=c.body,t.region_source=eo.IMDS),c.status===Pi.httpBadRequest){const u=await q(this.getCurrentVersion.bind(this),M.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(a);if(!u)return t.region_source=eo.FAILED_AUTO_DETECTION,null;const d=await q(this.getRegionFromIMDS.bind(this),M.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(u,a);d.status===Pi.httpSuccess&&(r=d.body,t.region_source=eo.IMDS)}}catch{return t.region_source=eo.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=eo.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(M.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${D.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,D.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;(t=this.performanceClient)==null||t.addQueueMeasurement(M.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${D.IMDS_ENDPOINT}?format=json`,e);return r.status===Pi.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}Ki.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.7.1 2024-02-17 */class Tt{constructor(e,t,r,s,a,c,u){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=s,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=a,this.performanceClient=u,this.correlationId=c,this.regionDiscovery=new Ki(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(D.CIAM_AUTH_URL))return yn.Ciam;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case D.ADFS:return yn.Adfs;case D.DSTS:return yn.Dsts}return yn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Ie(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw $(zn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw $(zn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw $(zn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw $(fd);return this.replacePath(this.metadata.end_session_endpoint)}else throw $(zn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw $(zn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw $(zn)}canReplaceTenant(e){return e.PathSegments.length===1&&!Tt.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===yn.Default&&this.protocolMode===qn.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const s=new Ie(this.metadata.canonical_authority).getUrlComponents(),a=s.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((u,d)=>{let f=a[d];if(d===0&&this.canReplaceTenant(s)){const g=new Ie(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];f!==g&&(this.logger.verbose(`Replacing tenant domain name ${f} with id ${g}`),f=g)}u!==f&&(t=t.replace(`/${f}/`,`/${u}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===yn.Adfs||this.protocolMode!==qn.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(M.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await q(this.updateCloudDiscoveryMetadata.bind(this),M.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await q(this.updateEndpointMetadata.bind(this),M.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),(a=this.performanceClient)==null||a.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Td(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==Ut.CACHE&&(r==null?void 0:r.source)!==Ut.CACHE&&(e.expiresAt=Td(),e.canonical_authority=this.canonicalAuthority);const s=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(s,e),this.metadata=e}async updateEndpointMetadata(e){var s,a,c;(s=this.performanceClient)==null||s.addQueueMeasurement(M.AuthorityUpdateEndpointMetadata,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Ut.HARDCODED_VALUES&&(a=this.authorityOptions.azureRegionConfiguration)!=null&&a.azureRegion&&t.metadata){const u=await q(this.updateMetadataWithRegionalInformation.bind(this),M.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Di(e,u,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await q(this.getEndpointMetadataFromNetwork.bind(this),M.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(c=this.authorityOptions.azureRegionConfiguration)!=null&&c.azureRegion&&(r=await q(this.updateMetadataWithRegionalInformation.bind(this),M.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Di(e,r,!0),Ut.NETWORK;throw $(ed,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Di(e,t,!1),{source:Ut.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const s=this.getEndpointMetadataFromHardcodedValues();if(s)return Di(e,s,!1),{source:Ut.HARDCODED_VALUES,metadata:s};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=Ed(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Ut.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Ie(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Fe(Od)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(M.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const s=await this.networkInterface.sendGetRequestAsync(t,e);return hv(s.body)?s.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(s){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${s}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Bd?Bd[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,s,a;(r=this.performanceClient)==null||r.addQueueMeasurement(M.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const t=(s=this.authorityOptions.azureRegionConfiguration)==null?void 0:s.azureRegion;if(t){if(t!==D.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ga.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,Tt.replaceWithRegionalInformation(e,t);const c=await q(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),M.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.environmentRegion,this.regionDiscoveryMetadata);if(c)return this.regionDiscoveryMetadata.region_outcome=ga.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=c,Tt.replaceWithRegionalInformation(e,c);this.regionDiscoveryMetadata.region_outcome=ga.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(M.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await q(this.getCloudDiscoveryMetadataFromNetwork.bind(this),M.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Pa(e,r,!0),Ut.NETWORK;throw Fe(Nd)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||D.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||D.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||D.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Pa(e,t,!1),Ut.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const s=CC(this.hostnameAndPort);if(s)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Pa(e,s,!1),Ut.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=Ed(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Ut.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===yn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Tt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=Bi(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Fe(xa)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Tt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(M.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${D.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const a=await this.networkInterface.sendGetRequestAsync(e,t);let c,u;if(fv(a.body))c=a.body,u=c.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${c.tenant_discovery_endpoint}`);else if(gv(a.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${a.status}`),c=a.body,c.error===D.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${c.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${c.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),u=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Bi(u,this.hostnameAndPort)}catch(a){if(a instanceof $e)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${a.errorCode}
Error Description: ${a.errorMessage}`);else{const c=a;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${c.name}
Error Description: ${c.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Tt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&Ie.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Ia.None){const s=t.tenant?t.tenant:D.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${s}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw $(zn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Kd.has(e)}static isPublicCloudAuthority(e){return D.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const s=new Ie(e);s.validateAsUri();const a=s.getUrlComponents();let c=`${t}.${a.HostNameAndPort}`;this.isPublicCloudAuthority(a.HostNameAndPort)&&(c=`${t}.${D.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const u=Ie.constructAuthorityUriFromObject({...s.getUrlComponents(),HostNameAndPort:c}).urlString;return r?`${u}?${r}`:u}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=Tt.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=Tt.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=Tt.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const s=new Ie(e).getUrlComponents();if(s.PathSegments.length===0&&s.HostNameAndPort.endsWith(D.CIAM_AUTH_URL)){const a=s.HostNameAndPort.split(".")[0];t=`${t}${a}${D.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}Tt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",ur.COMMON,ur.CONSUMERS,ur.ORGANIZATIONS]);function mv(o){var s;const r=(s=new Ie(o).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:s.toLowerCase();switch(r){case ur.COMMON:case ur.ORGANIZATIONS:case ur.CONSUMERS:return;default:return r}}function Yd(o){return o.endsWith(D.FORWARD_SLASH)?o:`${o}${D.FORWARD_SLASH}`}function yv(o){const e=o.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw Fe(xa)}return{canonicalAuthority:o.authority?Yd(o.authority):void 0,knownAuthorities:o.knownAuthorities,cloudDiscoveryMetadata:t}}/*! @azure/msal-common v14.7.1 2024-02-17 */async function jd(o,e,t,r,s,a,c){c==null||c.addQueueMeasurement(M.AuthorityFactoryCreateDiscoveredInstance,a);const u=Tt.transformCIAMAuthority(Yd(o)),d=new Tt(u,e,t,r,s,a,c);try{return await q(d.resolveEndpointsAsync.bind(d),M.AuthorityResolveEndpointsAsync,s,c,a)(),d}catch{throw $(zn)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class Ba{constructor(e,t){this.config=IC(e),this.logger=new fr(this.config.loggerOptions,pd,_a),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new kC(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Nn.CONTENT_TYPE]=D.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Ht.HOME_ACCOUNT_ID:try{const r=ro(e.credential);t[Nn.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Ht.UPN:t[Nn.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,r,s,a,c){var d,f,g,y;c&&((d=this.performanceClient)==null||d.addQueueMeasurement(c,a));const u=await this.networkManager.sendPostRequest(s,e,{body:t,headers:r});return(y=this.performanceClient)==null||y.addFields({refreshTokenSize:((f=u.body.refresh_token)==null?void 0:f.length)||0,httpVerToken:((g=u.headers)==null?void 0:g[Nn.X_MS_HTTP_VERSION])||""},a),this.config.serverTelemetryManager&&u.status<500&&u.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),u}async updateAuthority(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(M.UpdateTokenEndpointAuthority,t);const r=`https://${e}/${this.authority.tenant}/`,s=await jd(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=s}createTokenQueryParameters(e){const t=new qo;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()}}/*! @azure/msal-common v14.7.1 2024-02-17 */const $i="no_tokens_found",Qd="native_account_unavailable",Ka="refresh_token_expired",Cv="interaction_required",vv="consent_required",wv="login_required",Gi="bad_token";/*! @azure/msal-common v14.7.1 2024-02-17 */const Jd=[Cv,vv,wv,Gi],Tv=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Ev={[$i]:"No refresh token found in the cache. Please sign-in.",[Qd]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Ka]:"Refresh token has expired.",[Gi]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class Cn extends $e{constructor(e,t,r,s,a,c,u){super(e,t,r),Object.setPrototypeOf(this,Cn.prototype),this.timestamp=s||D.EMPTY_STRING,this.traceId=a||D.EMPTY_STRING,this.correlationId=c||D.EMPTY_STRING,this.claims=u||D.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function Xd(o,e,t){const r=!!o&&Jd.indexOf(o)>-1,s=!!t&&Tv.indexOf(t)>-1,a=!!e&&Jd.some(c=>e.indexOf(c)>-1);return r||a||s}function $a(o){return new Cn(o,Ev[o])}/*! @azure/msal-common v14.7.1 2024-02-17 */class so{constructor(e,t,r,s,a){this.account=e||null,this.idToken=t||null,this.accessToken=r||null,this.refreshToken=s||null,this.appMetadata=a||null}}/*! @azure/msal-common v14.7.1 2024-02-17 */class vn{static setRequestState(e,t,r){const s=vn.generateLibraryState(e,r);return t?`${s}${D.RESOURCE_DELIM}${t}`:s}static generateLibraryState(e,t){if(!e)throw $(Aa);const r={id:e.createNewGuid()};t&&(r.meta=t);const s=JSON.stringify(r);return e.base64Encode(s)}static parseRequestState(e,t){if(!e)throw $(Aa);if(!t)throw $(to);try{const r=t.split(D.RESOURCE_DELIM),s=r[0],a=r.length>1?r.slice(1).join(D.RESOURCE_DELIM):D.EMPTY_STRING,c=e.base64Decode(s),u=JSON.parse(c);return{userRequestState:a||D.EMPTY_STRING,libraryState:u}}catch{throw $(to)}}}/*! @azure/msal-common v14.7.1 2024-02-17 */const Av={SW:"sw",UHW:"uhw"};class ao{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(M.PopTokenGenerateCnf,e.correlationId);const r=await q(this.generateKid.bind(this),M.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),s=this.cryptoUtils.base64Encode(JSON.stringify(r));return{kid:r.kid,reqCnfString:s,reqCnfHash:await this.cryptoUtils.hashString(s)}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(M.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Av.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,s){const{resourceRequestMethod:a,resourceRequestUri:c,shrClaims:u,shrNonce:d,shrOptions:f}=r,g=c?new Ie(c):void 0,y=g==null?void 0:g.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:xn(),m:a==null?void 0:a.toUpperCase(),u:y==null?void 0:y.HostNameAndPort,nonce:d||this.cryptoUtils.createNewGuid(),p:y==null?void 0:y.AbsolutePath,q:y!=null&&y.QueryString?[[],y.QueryString]:void 0,client_claims:u||void 0,...s},t,f,r.correlationId)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class Sv{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.7.1 2024-02-17 */class xr{constructor(e,t,r,s,a,c,u){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=s,this.serializableCache=a,this.persistencePlugin=c,this.performanceClient=u}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?$(Oi,"Cached State"):$(Oi,"Server State");let r,s;try{r=decodeURIComponent(e.state)}catch{throw $(to,e.state)}try{s=decodeURIComponent(t)}catch{throw $(to,e.state)}if(r!==s)throw $(nd);if(e.error||e.error_description||e.suberror)throw Xd(e.error,e.error_description,e.suberror)?new Cn(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||""):new gr(e.error||"",e.error_description,e.suberror)}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`${e.error_codes} - [${e.timestamp}]: ${e.error_description} - Correlation ID: ${e.correlation_id} - Trace ID: ${e.trace_id}`,s=new gr(e.error,r,e.suberror);if(t&&e.status&&e.status>=_i.SERVER_ERROR_RANGE_START&&e.status<=_i.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(t&&e.status&&e.status>=_i.CLIENT_ERROR_RANGE_START&&e.status<=_i.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw Xd(e.error,e.error_description,e.suberror)?new Cn(e.error,e.error_description,e.suberror,e.timestamp||D.EMPTY_STRING,e.trace_id||D.EMPTY_STRING,e.correlation_id||D.EMPTY_STRING,e.claims||D.EMPTY_STRING):s}}async handleServerTokenResponse(e,t,r,s,a,c,u,d,f){var A;(A=this.performanceClient)==null||A.addQueueMeasurement(M.HandleServerTokenResponse,e.correlation_id);let g;if(e.id_token){if(g=Pr(e.id_token||D.EMPTY_STRING,this.cryptoObj.base64Decode),a&&a.nonce&&g.nonce!==a.nonce)throw $(rd);if(s.maxAge||s.maxAge===0){const S=g.auth_time;if(!S)throw $(Ca);md(S,s.maxAge)}}this.homeAccountIdentifier=tt.generateHomeAccountId(e.client_info||D.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,g);let y;a&&a.state&&(y=vn.parseRequestState(this.cryptoObj,a.state)),e.key_id=e.key_id||s.sshKid||void 0;const v=this.generateCacheRecord(e,t,r,s,g,c,a);let T;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),T=new Sv(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(T)),u&&!d&&v.account){const S=v.account.generateAccountKey();if(!this.cacheStorage.getAccount(S,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await xr.generateAuthenticationResult(this.cryptoObj,t,v,!1,s,g,y,void 0,f)}await this.cacheStorage.saveCacheRecord(v,s.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&T&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(T))}return xr.generateAuthenticationResult(this.cryptoObj,t,v,!1,s,g,y,e,f)}generateCacheRecord(e,t,r,s,a,c,u){const d=t.getPreferredCache();if(!d)throw $(Ta);const f=Ud(a);let g,y;e.id_token&&a&&(g=Mi(this.homeAccountIdentifier,d,e.id_token,this.clientId,f||""),y=Ga(this.cacheStorage,t,this.homeAccountIdentifier,a,this.cryptoObj.base64Decode,e.client_info,d,f,u,void 0,this.logger));let v=null;if(e.access_token){const S=e.scope?Ze.fromString(e.scope):new Ze(s.scopes||[]),b=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,N=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,I=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,k=r+b,O=k+N,x=I&&I>0?r+I:void 0;v=Li(this.homeAccountIdentifier,d,e.access_token,this.clientId,f||t.tenant||"",S.printScopes(),k,O,this.cryptoObj.base64Decode,x,e.token_type,c,e.key_id,s.claims,s.requestedClaimsHash)}let T=null;if(e.refresh_token){let S;if(e.refresh_token_expires_in){const b=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;S=r+b}T=yd(this.homeAccountIdentifier,d,e.refresh_token,this.clientId,e.foci,c,S)}let A=null;return e.foci&&(A={clientId:this.clientId,environment:d,familyId:e.foci}),new so(y,g,v,T,A)}static async generateAuthenticationResult(e,t,r,s,a,c,u,d,f){var k,O,x,U,z;let g=D.EMPTY_STRING,y=[],v=null,T,A,S=D.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Ue.POP){const G=new ao(e),{secret:X,keyId:te}=r.accessToken;if(!te)throw $(ba);g=await G.signPopToken(X,te,a)}else g=r.accessToken.secret;y=Ze.fromString(r.accessToken.target).asArray(),v=new Date(Number(r.accessToken.expiresOn)*1e3),T=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(A=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(S=r.appMetadata.familyId===$o?$o:"");const b=(c==null?void 0:c.oid)||(c==null?void 0:c.sub)||"",N=(c==null?void 0:c.tid)||"";d!=null&&d.spa_accountid&&r.account&&(r.account.nativeAccountId=d==null?void 0:d.spa_accountid);const I=r.account?Ua(r.account.getAccountInfo(),void 0,c,(k=r.idToken)==null?void 0:k.secret):null;return{authority:t.canonicalAuthority,uniqueId:b,tenantId:N,scopes:y,account:I,idToken:((O=r==null?void 0:r.idToken)==null?void 0:O.secret)||"",idTokenClaims:c||{},accessToken:g,fromCache:s,expiresOn:v,extExpiresOn:T,refreshOn:A,correlationId:a.correlationId,requestId:f||D.EMPTY_STRING,familyId:S,tokenType:((x=r.accessToken)==null?void 0:x.tokenType)||D.EMPTY_STRING,state:u?u.userRequestState:D.EMPTY_STRING,cloudGraphHostName:((U=r.account)==null?void 0:U.cloudGraphHostName)||D.EMPTY_STRING,msGraphHost:((z=r.account)==null?void 0:z.msGraphHost)||D.EMPTY_STRING,code:d==null?void 0:d.spa_code,fromNativeBroker:!1}}}function Ga(o,e,t,r,s,a,c,u,d,f,g){g==null||g.verbose("setCachedAccount called");const v=o.getAccountKeys().find(b=>b.startsWith(t));let T=null;v&&(T=o.getAccount(v,g));const A=T||tt.createAccount({homeAccountId:t,idTokenClaims:r,clientInfo:a,environment:c,cloudGraphHostName:d==null?void 0:d.cloud_graph_host_name,msGraphHost:d==null?void 0:d.msgraph_host,nativeAccountId:f},e,s),S=A.tenantProfiles||[];if(u&&!S.find(b=>b.tenantId===u)){const b=Da(t,r);S.push(b)}return A.tenantProfiles=S,A}/*! @azure/msal-common v14.7.1 2024-02-17 */class Zd extends Ba{constructor(e,t){var r;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async getAuthCodeUrl(e){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(M.GetAuthCodeUrl,e.correlationId);const t=await q(this.createAuthCodeUrlQueryString.bind(this),M.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return Ie.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){var u,d;if((u=this.performanceClient)==null||u.addQueueMeasurement(M.AuthClientAcquireToken,e.correlationId),!e.code)throw $(sd);const r=xn(),s=await q(this.executeTokenRequest.bind(this),M.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=(d=s.headers)==null?void 0:d[Nn.X_MS_REQUEST_ID],c=new xr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return c.validateTokenResponse(s.body),q(c.handleServerTokenResponse.bind(c),M.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(s.body,this.authority,r,e,t,void 0,void 0,void 0,a)}handleFragmentResponse(e,t){if(new xr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw $(dd);return e}getLogoutUri(e){if(!e)throw Fe(kd);const t=this.createLogoutUrlQueryString(e);return Ie.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var f,g;(f=this.performanceClient)==null||f.addQueueMeasurement(M.AuthClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),s=Ie.appendQueryString(e.tokenEndpoint,r),a=await q(this.createTokenRequestBody.bind(this),M.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);let c;if(t.clientInfo)try{const y=Hi(t.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${y.uid}${wt.CLIENT_INFO_SEPARATOR}${y.utid}`,type:Ht.HOME_ACCOUNT_ID}}catch(y){this.logger.verbose("Could not parse client info for CCS Header: "+y)}const u=this.createTokenRequestHeaders(c||t.ccsCredential),d={clientId:((g=t.tokenBodyParameters)==null?void 0:g.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return q(this.executePostToTokenEndpoint.bind(this),M.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(s,a,u,d,t.correlationId,M.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var a,c;(a=this.performanceClient)==null||a.addQueueMeasurement(M.AuthClientCreateTokenRequestBody,e.correlationId);const t=new qo;if(t.addClientId(((c=e.tokenBodyParameters)==null?void 0:c[io])||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):Or.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!Fa(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const u=this.config.clientCredentials.clientAssertion;t.addClientAssertion(u.assertion),t.addClientAssertionType(u.assertionType)}if(t.addGrantType(Wu.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Ue.POP){const u=new ao(this.cryptoUtils,this.performanceClient),d=await q(u.generateCnf.bind(u),M.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);t.addPopToken(d.reqCnfString)}else if(e.authenticationScheme===Ue.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw Fe(Ui);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(r),(!mn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let s;if(e.clientInfo)try{const u=Hi(e.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${u.uid}${wt.CLIENT_INFO_SEPARATOR}${u.utid}`,type:Ht.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}else s=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&s)switch(s.type){case Ht.HOME_ACCOUNT_ID:try{const u=ro(s.credential);t.addCcsOid(u)}catch(u){this.logger.verbose("Could not parse home account ID for CCS Header: "+u)}break;case Ht.UPN:t.addCcsUpn(s.credential);break}return e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Vd])&&t.addExtraQueryParameters({[Vd]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){var a,c;(a=this.performanceClient)==null||a.addQueueMeasurement(M.AuthClientCreateQueryString,e.correlationId);const t=new qo;t.addClientId(((c=e.extraQueryParameters)==null?void 0:c[io])||this.config.authOptions.clientId);const r=[...e.scopes||[],...e.extraScopesToConsent||[]];t.addScopes(r,!0,this.oidcDefaultScopes),t.addRedirectUri(e.redirectUri);const s=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(s),t.addResponseMode(e.responseMode),t.addResponseTypeCode(),t.addLibraryInfo(this.config.libraryInfo),Fa(this.config)||t.addApplicationTelemetry(this.config.telemetry.application),t.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&t.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&t.addPrompt(e.prompt),e.domainHint&&t.addDomainHint(e.domainHint),e.prompt!==ct.SELECT_ACCOUNT)if(e.sid&&e.prompt===ct.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),t.addSid(e.sid);else if(e.account){const u=this.extractAccountSid(e.account),d=this.extractLoginHint(e.account);if(d){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),t.addLoginHint(d);try{const f=ro(e.account.homeAccountId);t.addCcsOid(f)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(u&&e.prompt===ct.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),t.addSid(u);try{const f=ro(e.account.homeAccountId);t.addCcsOid(f)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),t.addLoginHint(e.account.username);try{const f=ro(e.account.homeAccountId);t.addCcsOid(f)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&t.addNonce(e.nonce),e.state&&t.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(t.addNativeBroker(),e.authenticationScheme===Ue.POP)){const u=new ao(this.cryptoUtils),d=await q(u.generateCnf.bind(u),M.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);t.addPopToken(d.reqCnfHash)}return t.createQueryString()}createLogoutUrlQueryString(e){const t=new qo;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}extractAccountSid(e){var t;return((t=e.idTokenClaims)==null?void 0:t.sid)||null}extractLoginHint(e){var t;return((t=e.idTokenClaims)==null?void 0:t.login_hint)||null}}/*! @azure/msal-common v14.7.1 2024-02-17 */const bv=300;class za extends Ba{constructor(e,t){super(e,t)}async acquireToken(e){var c,u;(c=this.performanceClient)==null||c.addQueueMeasurement(M.RefreshTokenClientAcquireToken,e.correlationId);const t=xn(),r=await q(this.executeTokenRequest.bind(this),M.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),s=(u=r.headers)==null?void 0:u[Nn.X_MS_REQUEST_ID],a=new xr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(r.body),q(a.handleServerTokenResponse.bind(a),M.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,s)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Fe(Rd);if((r=this.performanceClient)==null||r.addQueueMeasurement(M.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw $(wa);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await q(this.acquireTokenWithCachedRefreshToken.bind(this),M.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(s){const a=s instanceof Cn&&s.errorCode===$i,c=s instanceof gr&&s.errorCode===Vu.INVALID_GRANT_ERROR&&s.subError===Vu.CLIENT_MISMATCH_ERROR;if(a||c)return q(this.acquireTokenWithCachedRefreshToken.bind(this),M.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw s}return q(this.acquireTokenWithCachedRefreshToken.bind(this),M.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(M.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Nr(this.cacheManager.getRefreshToken.bind(this.cacheManager),M.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw $a($i);if(r.expiresOn&&Ra(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||bv))throw $a(Ka);const s={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Ue.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Ht.HOME_ACCOUNT_ID}};try{return await q(this.acquireToken.bind(this),M.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(s)}catch(c){if(c instanceof Cn&&c.subError===Gi){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const u=no(r);this.cacheManager.removeRefreshToken(u)}throw c}}async executeTokenRequest(e,t){var d,f;(d=this.performanceClient)==null||d.addQueueMeasurement(M.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),s=Ie.appendQueryString(t.tokenEndpoint,r),a=await q(this.createTokenRequestBody.bind(this),M.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),c=this.createTokenRequestHeaders(e.ccsCredential),u={clientId:((f=e.tokenBodyParameters)==null?void 0:f.clientId)||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return q(this.executePostToTokenEndpoint.bind(this),M.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(s,a,c,u,e.correlationId,M.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var s,a,c;(s=this.performanceClient)==null||s.addQueueMeasurement(M.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const t=e.correlationId,r=new qo;if(r.addClientId(((a=e.tokenBodyParameters)==null?void 0:a[io])||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,(c=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:c.defaultScopes),r.addGrantType(Wu.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!Fa(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addCorrelationId(t),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const u=this.config.clientCredentials.clientAssertion;r.addClientAssertion(u.assertion),r.addClientAssertionType(u.assertionType)}if(e.authenticationScheme===Ue.POP){const u=new ao(this.cryptoUtils,this.performanceClient),d=await q(u.generateCnf.bind(u),M.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger);r.addPopToken(d.reqCnfString)}else if(e.authenticationScheme===Ue.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw Fe(Ui);if((!mn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Ht.HOME_ACCOUNT_ID:try{const u=ro(e.ccsCredential.credential);r.addCcsOid(u)}catch(u){this.logger.verbose("Could not parse home account ID for CCS Header: "+u)}break;case Ht.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()}}/*! @azure/msal-common v14.7.1 2024-02-17 */class _v extends Ba{constructor(e,t){super(e,t)}async acquireToken(e){try{const[t,r]=await this.acquireCachedToken(e);return r===dr.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new za(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof Ni&&t.errorCode===hr)return new za(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}}async acquireCachedToken(e){var d;(d=this.performanceClient)==null||d.addQueueMeasurement(M.SilentFlowClientAcquireCachedToken,e.correlationId);let t=dr.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!mn.isEmptyObj(e.claims))throw this.setCacheOutcome(dr.FORCE_REFRESH_OR_CLAIMS,e.correlationId),$(hr);if(!e.account)throw $(wa);const r=e.account.tenantId||mv(e.authority),s=this.cacheManager.getTokenKeys(),a=this.cacheManager.getAccessToken(e.account,e,s,r,this.performanceClient,e.correlationId);if(a){if(nC(a.cachedAt)||Ra(a.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(dr.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),$(hr);a.refreshOn&&Ra(a.refreshOn,0)&&(t=dr.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(dr.NO_CACHED_ACCESS_TOKEN,e.correlationId),$(hr);const c=e.authority||this.authority.getPreferredCache(),u={account:this.cacheManager.readAccountFromCache(e.account),accessToken:a,idToken:this.cacheManager.getIdToken(e.account,s,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(c)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await q(this.generateResultFromCacheRecord.bind(this),M.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(u,e),t]}setCacheOutcome(e,t){var r,s;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(s=this.performanceClient)==null||s.addFields({cacheOutcome:e},t),e!==dr.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(M.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=Pr(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){const a=r==null?void 0:r.auth_time;if(!a)throw $(Ca);md(a,t.maxAge)}return xr.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}/*! @azure/msal-common v14.7.1 2024-02-17 */const Iv={sendGetRequestAsync:()=>Promise.reject($(we)),sendPostRequestAsync:()=>Promise.reject($(we))};/*! @azure/msal-common v14.7.1 2024-02-17 */const eh="missing_kid_error",th="missing_alg_error";/*! @azure/msal-common v14.7.1 2024-02-17 */const Rv={[eh]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[th]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class qa extends $e{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,qa.prototype)}}function nh(o){return new qa(o,Rv[o])}/*! @azure/msal-common v14.7.1 2024-02-17 */class Wa{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw nh(eh);if(!e.alg)throw nh(th);const t=new Wa({typ:e.typ||Ky.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}/*! @azure/msal-common v14.7.1 2024-02-17 */class zi{constructor(e,t){this.cacheOutcome=dr.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||D.EMPTY_STRING,this.wrapperVer=e.wrapperVer||D.EMPTY_STRING,this.telemetryCacheKey=ft.CACHE_KEY+wt.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${ft.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer].join(ft.VALUE_SEPARATOR),r=this.getRegionDiscoveryFields(),s=[e,r].join(ft.VALUE_SEPARATOR);return[ft.SCHEMA_VERSION,s,t].join(ft.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=zi.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(ft.VALUE_SEPARATOR),s=e.errors.slice(0,t).join(ft.VALUE_SEPARATOR),a=e.errors.length,c=t<a?ft.OVERFLOW_TRUE:ft.OVERFLOW_FALSE,u=[a,c].join(ft.VALUE_SEPARATOR);return[ft.SCHEMA_VERSION,e.cacheHits,r,s,u].join(ft.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=ft.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof $e?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(ft.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),t=zi.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{const s={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,s)}}static maxErrorsToSend(e){let t,r=0,s=0;const a=e.errors.length;for(t=0;t<a;t++){const c=e.failedRequests[2*t]||D.EMPTY_STRING,u=e.failedRequests[2*t+1]||D.EMPTY_STRING,d=e.errors[t]||D.EMPTY_STRING;if(s+=c.toString().length+u.toString().length+d.length+3,s<ft.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||D.EMPTY_STRING),e.push(this.regionSource||D.EMPTY_STRING),e.push(this.regionOutcome||D.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}}/*! @azure/msal-common v14.7.1 2024-02-17 */class rh{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class kv{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:pv.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new rh}}startPerformanceMeasurement(){return new rh}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const Va="pkce_not_created",oh="crypto_nonexistent",qi="empty_navigate_uri",ih="hash_empty_error",Ya="no_state_in_hash",sh="hash_does_not_contain_known_properties",ah="unable_to_parse_state",ch="state_interaction_type_mismatch",lh="interaction_in_progress",uh="popup_window_error",dh="empty_window_error",Mr="user_cancelled",Pv="monitor_popup_timeout",hh="monitor_window_timeout",fh="redirect_in_iframe",gh="block_iframe_reload",ph="block_nested_popups",Ov="iframe_closed_prematurely",Wi="silent_logout_unsupported",mh="no_account_error",Nv="silent_prompt_value_error",yh="no_token_request_cache_error",Ch="unable_to_parse_token_request_cache_error",ja="no_cached_authority_error",xv="auth_request_not_set_error",Mv="invalid_cache_type",vh="non_browser_environment",co="database_not_open",Vi="no_network_connectivity",wh="post_request_failed",Th="get_request_failed",Qa="failed_to_parse_response",wn="unable_to_load_token",Ja="crypto_key_not_found",Eh="auth_code_required",Ah="auth_code_or_nativeAccountId_required",Sh="spa_code_and_nativeAccountId_present",Xa="database_unavailable",bh="unable_to_acquire_token_from_native_platform",_h="native_handshake_timeout",Ih="native_extension_not_installed",Wo="native_connection_not_established",Rh="uninitialized_public_client_application",kh="native_prompt_not_supported",Ph="invalid_base64_string";/*! @azure/msal-browser v3.10.0 2024-02-17 */const Wn="For more visit: aka.ms/msaljs/browser-errors",Lv={[Va]:"The PKCE code challenge and verifier could not be generated.",[oh]:"The crypto object or function is not available.",[qi]:"Navigation URI is empty. Please check stack trace for more info.",[ih]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Wn}`,[Ya]:"Hash does not contain state. Please verify that the request originated from msal.",[sh]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Wn}`,[ah]:"Unable to parse state. Please verify that the request originated from msal.",[ch]:"Hash contains state but the interaction type does not match the caller.",[lh]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Wn}`,[uh]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[dh]:"window.open returned null or undefined window object.",[Mr]:"User cancelled the flow.",[Pv]:`Token acquisition in popup failed due to timeout.  ${Wn}`,[hh]:`Token acquisition in iframe failed due to timeout.  ${Wn}`,[fh]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[gh]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Wn}`,[ph]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Ov]:"The iframe being monitored was closed prematurely.",[Wi]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[mh]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Nv]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[yh]:"No token request found in cache.",[Ch]:"The cached token request could not be parsed.",[ja]:"No cached authority found.",[xv]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Mv]:"Invalid cache type",[vh]:"Login and token requests are not supported in non-browser environments.",[co]:"Database is not open!",[Vi]:"No network connectivity. Check your internet connection.",[wh]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Th]:"Network request failed. Please check the network trace to determine root cause.",[Qa]:"Failed to parse network response. Check network trace.",[wn]:"Error loading token to cache.",[Ja]:"Cryptographic Key or Keypair not found in browser storage.",[Eh]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ah]:"An authorization code or nativeAccountId must be provided to this flow.",[Sh]:"Request cannot contain both spa code and native account id.",[Xa]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[bh]:`Unable to acquire token from native platform.  ${Wn}`,[_h]:"Timed out while attempting to establish connection to browser extension",[Ih]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Wo]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Wn}`,[Rh]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Wn}`,[kh]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Ph]:"Invalid base64 encoded string."};class Vo extends $e{constructor(e){super(e,Lv[e]),Object.setPrototypeOf(this,Vo.prototype),this.name="BrowserAuthError"}}function V(o){return new Vo(o)}/*! @azure/msal-browser v3.10.0 2024-02-17 */const Tn={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Yo={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},Lr={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},nt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Oh={GET:"GET",POST:"POST"},Oe={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},pr={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Yi={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Ge={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Y;(function(o){o.Redirect="redirect",o.Popup="popup",o.Silent="silent",o.None="none"})(Y||(Y={}));const lt={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},Nh={scopes:Bo},xh="jwk",Dv={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Za="msal.db",Uv=1,Hv=`${Za}.keys`,Zt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},Fv=[Zt.Default,Zt.Skip,Zt.RefreshTokenAndNetwork],Bv="msal.browser.log.level",Kv="msal.browser.log.pii";/*! @azure/msal-browser v3.10.0 2024-02-17 */const $v="RSASSA-PKCS1-v1_5",Mh="SHA-256",Gv=2048,zv=new Uint8Array([1,0,1]),Lh="0123456789abcdef",Dh=new Uint32Array(1),ec={name:$v,hash:Mh,modulusLength:Gv,publicExponent:zv};function qv(o){if("crypto"in window)o.verbose("BrowserCrypto: modern crypto interface available");else throw o.error("BrowserCrypto: crypto interface is unavailable"),V(oh)}async function Uh(o,e,t){e==null||e.addQueueMeasurement(M.Sha256Digest,t);const s=new TextEncoder().encode(o);return window.crypto.subtle.digest(Mh,s)}function Wv(o){return window.crypto.getRandomValues(o)}function tc(){return window.crypto.getRandomValues(Dh),Dh[0]}function Vn(){const o=Date.now(),e=tc()*1024+(tc()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),s=e&2**30-1,a=tc();t[0]=o/2**40,t[1]=o/2**32,t[2]=o/2**24,t[3]=o/2**16,t[4]=o/2**8,t[5]=o,t[6]=112|r>>>8,t[7]=r,t[8]=128|s>>>24,t[9]=s>>>16,t[10]=s>>>8,t[11]=s,t[12]=a>>>24,t[13]=a>>>16,t[14]=a>>>8,t[15]=a;let c="";for(let u=0;u<t.length;u++)c+=Lh.charAt(t[u]>>>4),c+=Lh.charAt(t[u]&15),(u===3||u===5||u===7||u===9)&&(c+="-");return c}async function Vv(o,e){return window.crypto.subtle.generateKey(ec,o,e)}async function nc(o){return window.crypto.subtle.exportKey(xh,o)}async function Yv(o,e,t){return window.crypto.subtle.importKey(xh,o,ec,e,t)}async function jv(o,e){return window.crypto.subtle.sign(ec,o,e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function Qv(o){o.location.hash="",typeof o.history.replaceState=="function"&&o.history.replaceState(null,"",`${o.location.origin}${o.location.pathname}${o.location.search}`)}function Jv(o){const e=o.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function rc(){return window.parent!==window}function Xv(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Tn.POPUP_NAME_PREFIX}.`)===0}function Yn(){return window.location.href.split("?")[0].split("#")[0]}function Zv(){const e=new Ie(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function oc(){if(Ie.hashContainsKnownProperties(window.location.hash)&&rc())throw V(gh)}function ew(o,e){const t=rc();if(o===Y.Redirect&&t&&!e)throw V(fh)}function tw(){if(Xv())throw V(ph)}function nw(o){if(!o)throw V(vh)}function Hh(o){if(!o)throw V(Rh)}function Fh(o){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(o).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class ji{navigateInternal(e,t){return ji.defaultNavigateWindow(e,t)}navigateExternal(e,t){return ji.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class rw{async sendGetRequestAsync(e,t){let r;try{r=await fetch(e,{method:Oh.GET,headers:this.getFetchHeaders(t)})}catch{throw window.navigator.onLine?V(Th):V(Vi)}try{return{headers:this.getHeaderDict(r.headers),body:await r.json(),status:r.status}}catch{throw V(Qa)}}async sendPostRequestAsync(e,t){const r=t&&t.body||D.EMPTY_STRING;let s;try{s=await fetch(e,{method:Oh.POST,headers:this.getFetchHeaders(t),body:r})}catch{throw window.navigator.onLine?V(wh):V(Vi)}try{return{headers:this.getHeaderDict(s.headers),body:await s.json(),status:s.status}}catch{throw V(Qa)}}getFetchHeaders(e){const t=new Headers;if(!(e&&e.headers))return t;const r=e.headers;return Object.keys(r).forEach(s=>{t.append(s,r[s])}),t}getHeaderDict(e){const t={};return e.forEach((r,s)=>{t[s]=r}),t}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const ow=6e4,ic=1e4,iw=3e4,sw=2e3;function aw({auth:o,cache:e,system:t,telemetry:r},s){const a={clientId:D.EMPTY_STRING,authority:`${D.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:D.EMPTY_STRING,authorityMetadata:D.EMPTY_STRING,redirectUri:D.EMPTY_STRING,postLogoutRedirectUri:D.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:qn.AAD,OIDCOptions:{serverResponseType:Ko.FRAGMENT,defaultScopes:[D.OPENID_SCOPE,D.PROFILE_SCOPE,D.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Ia.None,tenant:D.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},c={cacheLocation:nt.SessionStorage,temporaryCacheLocation:nt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===nt.LocalStorage),claimsBasedCachingEnabled:!1},u={loggerCallback:()=>{},logLevel:He.Info,piiLoggingEnabled:!1},f={...{...Gd,loggerOptions:u,networkClient:s?new rw:Iv,navigationClient:new ji,loadFrameTimeout:0,windowHashTimeout:(t==null?void 0:t.loadFrameTimeout)||ow,iframeHashTimeout:(t==null?void 0:t.loadFrameTimeout)||ic,navigateFrameWait:0,redirectNavigationTimeout:iw,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(t==null?void 0:t.nativeBrokerHandshakeTimeout)||sw,pollIntervalMilliseconds:Tn.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:(t==null?void 0:t.loggerOptions)||u},g={application:{appName:D.EMPTY_STRING,appVersion:D.EMPTY_STRING},client:new kv};if((o==null?void 0:o.protocolMode)!==qn.OIDC&&(o!=null&&o.OIDCOptions)&&new fr(f.loggerOptions).warning(JSON.stringify(Fe(Md))),o!=null&&o.protocolMode&&o.protocolMode!==qn.AAD&&(f!=null&&f.allowNativeBroker))throw Fe(Ld);return{auth:{...a,...o,OIDCOptions:{...a.OIDCOptions,...o==null?void 0:o.OIDCOptions}},cache:{...c,...e},system:f,telemetry:{...g,...r}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const cw="@azure/msal-browser",sc="3.10.0";/*! @azure/msal-browser v3.10.0 2024-02-17 */class ac{static loggerCallback(e,t){switch(e){case He.Error:console.error(t);return;case He.Info:console.info(t);return;case He.Verbose:console.debug(t);return;case He.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){var d;this.browserEnvironment=typeof window<"u",this.config=aw(e,this.browserEnvironment);let t;try{t=window[nt.SessionStorage]}catch{}const r=t==null?void 0:t.getItem(Bv),s=(d=t==null?void 0:t.getItem(Kv))==null?void 0:d.toLowerCase(),a=s==="true"?!0:s==="false"?!1:void 0,c={...this.config.system.loggerOptions},u=r&&Object.keys(He).includes(r)?He[r]:void 0;u&&(c.loggerCallback=ac.loggerCallback,c.logLevel=u),a!==void 0&&(c.piiLoggingEnabled=a),this.logger=new fr(c,cw,sc),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Dr extends ac{getModuleName(){return Dr.MODULE_NAME}getId(){return Dr.ID}async initialize(){return this.available=typeof window<"u",this.available}}Dr.MODULE_NAME="",Dr.ID="StandardOperatingContext";/*! @azure/msal-browser v3.10.0 2024-02-17 */async function lw(o){const e=new Dr(o);return await e.initialize(),(await Promise.resolve().then(()=>Gw)).StandardController.createController(e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function cc(o){return encodeURIComponent(lc(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Qi(o){return Bh(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lc(o){return Bh(new TextEncoder().encode(o))}function Bh(o){const e=Array.from(o,t=>String.fromCodePoint(t)).join("");return btoa(e)}/*! @azure/msal-browser v3.10.0 2024-02-17 */function Ln(o){return new TextDecoder().decode(uw(o))}function uw(o){let e=o.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw V(Ph)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class dw{constructor(){this.dbName=Za,this.version=Uv,this.tableName=Hv,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",s=>{s.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",s=>{const a=s;this.db=a.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(V(Xa)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(V(co));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);c.addEventListener("success",u=>{const d=u;this.closeConnection(),t(d.target.result)}),c.addEventListener("error",u=>{this.closeConnection(),r(u)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,s)=>{if(!this.db)return s(V(co));const u=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);u.addEventListener("success",()=>{this.closeConnection(),r()}),u.addEventListener("error",d=>{this.closeConnection(),s(d)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(V(co));const c=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);c.addEventListener("success",()=>{this.closeConnection(),t()}),c.addEventListener("error",u=>{this.closeConnection(),r(u)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(V(co));const a=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();a.addEventListener("success",c=>{const u=c;this.closeConnection(),e(u.target.result)}),a.addEventListener("error",c=>{this.closeConnection(),t(c)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(V(co));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);c.addEventListener("success",u=>{const d=u;this.closeConnection(),t(d.target.result===1)}),c.addEventListener("error",u=>{this.closeConnection(),r(u)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(Za);r.addEventListener("success",()=>e(!0)),r.addEventListener("blocked",()=>e(!0)),r.addEventListener("error",()=>t(!1))})}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class uc{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Kh{constructor(e,t){this.inMemoryCache=new uc,this.indexedDBCache=new dw,this.logger=e,this.storeName=t}handleDatabaseAccessError(e){if(e instanceof Vo&&e.errorCode===Xa)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const $h={asymmetricKeys:"asymmetricKeys",symmetricKeys:"symmetricKeys"};class hw{constructor(e){this.logger=e,this.asymmetricKeys=new Kh(this.logger,$h.asymmetricKeys),this.symmetricKeys=new Kh(this.logger,$h.symmetricKeys)}async clear(){this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory();try{return await this.asymmetricKeys.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class lo{constructor(e,t){this.logger=e,qv(e),this.cache=new hw(this.logger),this.performanceClient=t}createNewGuid(){return Vn()}base64Encode(e){return lc(e)}base64Decode(e){return Ln(e)}async getPublicKeyThumbprint(e){var g;const t=(g=this.performanceClient)==null?void 0:g.startMeasurement(M.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await Vv(lo.EXTRACTABLE,lo.POP_KEY_USAGES),s=await nc(r.publicKey),a={e:s.e,kty:s.kty,n:s.n},c=Gh(a),u=await this.hashString(c),d=await nc(r.privateKey),f=await Yv(d,!1,["sign"]);return await this.cache.asymmetricKeys.setItem(u,{privateKey:f,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),u}async removeTokenBindingKey(e){return await this.cache.asymmetricKeys.removeItem(e),!await this.cache.asymmetricKeys.containsKey(e)}async clearKeystore(){return this.cache.clear()}async signJwt(e,t,r,s){var k;const a=(k=this.performanceClient)==null?void 0:k.startMeasurement(M.CryptoOptsSignJwt,s),c=await this.cache.asymmetricKeys.getItem(t);if(!c)throw V(Ja);const u=await nc(c.publicKey),d=Gh(u),f=cc(JSON.stringify({kid:t})),g=Wa.getShrHeaderString({...r==null?void 0:r.header,alg:u.alg,kid:f}),y=cc(g);e.cnf={jwk:JSON.parse(d)};const v=cc(JSON.stringify(e)),T=`${y}.${v}`,S=new TextEncoder().encode(T),b=await jv(c.privateKey,S),N=Qi(new Uint8Array(b)),I=`${T}.${N}`;return a&&a.end({success:!0}),I}async hashString(e){const t=await Uh(e),r=new Uint8Array(t);return Qi(r)}}lo.POP_KEY_USAGES=["sign","verify"],lo.EXTRACTABLE=!0;function Gh(o){return JSON.stringify(o,Object.keys(o).sort())}/*! @azure/msal-browser v3.10.0 2024-02-17 */const zh="storage_not_supported",ut="stubbed_public_client_application_called",qh="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.10.0 2024-02-17 */const fw={[zh]:"Given storage configuration option was not supported.",[ut]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[qh]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class dc extends $e{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,dc.prototype)}}function rt(o){return new dc(o,fw[o])}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Wh{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==nt.LocalStorage&&e!==nt.SessionStorage||!window[e])throw rt(zh)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,t){this.windowStorage.setItem(e,t)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */function Vh(o,e){if(!e)return null;try{return vn.parseRequestState(o,e).libraryState.meta}catch{throw $(to)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class hc extends oo{constructor(e,t,r,s,a){super(e,r,s,a),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=t,this.logger=s,this.internalStorage=new uc,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(e){switch(e){case nt.LocalStorage:case nt.SessionStorage:try{return new Wh(e)}catch(t){this.logger.verbose(t);break}}return this.cacheConfig.cacheLocation=nt.MemoryStorage,new uc}setupTemporaryCacheStorage(e,t){switch(t){case nt.LocalStorage:case nt.SessionStorage:try{return new Wh(e||nt.SessionStorage)}catch(r){return this.logger.verbose(r),this.internalStorage}case nt.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${D.CACHE_PREFIX}.${at.ID_TOKEN}`,t=`${D.CACHE_PREFIX}.${at.CLIENT_INFO}`,r=`${D.CACHE_PREFIX}.${at.ERROR}`,s=`${D.CACHE_PREFIX}.${at.ERROR_DESC}`,a=this.browserStorage.getItem(e),c=this.browserStorage.getItem(t),u=this.browserStorage.getItem(r),d=this.browserStorage.getItem(s),f=[a,c,u,d];[at.ID_TOKEN,at.CLIENT_INFO,at.ERROR,at.ERROR_DESC].forEach((y,v)=>this.migrateCacheEntry(y,f[v]))}migrateCacheEntry(e,t){t&&this.setTemporaryCache(e,t,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(pr.ACCOUNT_KEYS),t=this.getItem(`${pr.TOKEN_KEYS}.${this.clientId}`);if(e&&t){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(s=>{if(this.isCredentialKey(s)){const a=this.getItem(s);if(a){const c=this.validateAndParseJson(a);if(c&&c.hasOwnProperty("credentialType"))switch(c.credentialType){case ue.ID_TOKEN:if(vd(c)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${s} found, saving key to token key map`);const u=c,d=this.updateCredentialCacheKey(s,u);this.addTokenKey(d,ue.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${s}`);break;case ue.ACCESS_TOKEN:case ue.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Cd(c)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${s} found, saving key to token key map`);const u=c,d=this.updateCredentialCacheKey(s,u);this.addTokenKey(d,ue.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${s}`);break;case ue.REFRESH_TOKEN:if(wd(c)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${s} found, saving key to token key map`);const u=c,d=this.updateCredentialCacheKey(s,u);this.addTokenKey(d,ue.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${s}`);break}}}if(this.isAccountKey(s)){const a=this.getItem(s);if(a){const c=this.validateAndParseJson(a);c&&tt.isAccountEntity(c)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${s} found, saving key to account key map`),this.addAccountKeyToMap(s))}}})}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,t)}getCachedAccountEntity(e){const t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(t);return!r||!tt.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):oo.toObject(new tt,r)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(pr.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const t=this.getAccountKeys();t.indexOf(e)===-1?(t.push(e),this.setItem(pr.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.setItem(pr.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,ue.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,ue.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,ue.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${pr.TOKEN_KEYS}.${this.clientId}`);if(e){const t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(t){case ue.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case ue.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case ue.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),$(Sa)}this.setItem(`${pr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(t){case ue.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const s=r.idToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case ue.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const a=r.accessToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case ue.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const c=r.refreshToken.indexOf(e);c>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(c,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),$(Sa)}this.setItem(`${pr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ue.ID_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!vd(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ue.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const t=no(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ue.ID_TOKEN)}getAccessTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ue.ACCESS_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!Cd(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ue.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const t=no(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ue.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ue.REFRESH_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!wd(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ue.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const t=no(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ue.REFRESH_TOKEN)}getAppMetadata(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!dC(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=uC(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!cC(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&hC(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Yi.WRAPPER_SKU,e),this.internalStorage.setItem(Yi.WRAPPER_VER,t)}getWrapperMetadata(){const e=this.internalStorage.getItem(Yi.WRAPPER_SKU)||D.EMPTY_STRING,t=this.internalStorage.getItem(Yi.WRAPPER_VER)||D.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(at.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const s=this.generateCacheKey(at.ACTIVE_ACCOUNT),a=this.getItem(s);if(!a)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const c=this.getAccountInfoFilteredBy({localAccountId:a});return c?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(c),c):null}const r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(at.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(at.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const s={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(s)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(r)}getThrottlingCache(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!lC(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const a=this.getItemCookie(r);if(a)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),a}const s=this.temporaryCacheStorage.getItem(r);if(!s){if(this.cacheConfig.cacheLocation===nt.LocalStorage){const a=this.browserStorage.getItem(r);if(a)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),a}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),s}setTemporaryCache(e,t,r){const s=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(s,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(s,t))}removeItem(e){this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}containsKey(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.getKeys().forEach(e=>{(this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e))&&(e.indexOf(D.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e){e.addQueueMeasurement(M.ClearTokensAndKeysWithClaims);const t=this.getTokenKeys(),r=[];t.accessToken.forEach(s=>{const a=this.getAccessTokenCredential(s);a!=null&&a.requestedClaimsHash&&s.includes(a.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(s))}),await Promise.all(r),r.length>0&&this.logger.warning(`${r.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,t,r){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(r){const a=this.getCookieExpirationTime(r);s+=`expires=${a};`}this.cacheConfig.secureCookies&&(s+="Secure;"),document.cookie=s}getItemCookie(e){const t=`${encodeURIComponent(e)}=`,r=document.cookie.split(";");for(let s=0;s<r.length;s++){let a=r[s];for(;a.charAt(0)===" ";)a=a.substring(1);if(a.indexOf(t)===0)return decodeURIComponent(a.substring(t.length,a.length))}return D.EMPTY_STRING}clearMsalCookies(){const e=`${D.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(r=>{for(;r.charAt(0)===" ";)r=r.substring(1);if(r.indexOf(e)===0){const s=r.split("=")[0];this.clearItemCookie(s)}})}clearItemCookie(e){this.setItemCookie(e,D.EMPTY_STRING,-1)}getCookieExpirationTime(e){const t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):mn.startsWith(e,D.CACHE_PREFIX)||mn.startsWith(e,at.ADAL_ID_TOKEN)?e:`${D.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:t}}=vn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Oe.AUTHORITY}.${t}`)}generateNonceKey(e){const{libraryState:{id:t}}=vn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Oe.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){const{libraryState:{id:t}}=vn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Oe.REQUEST_STATE}.${t}`)}getCachedAuthority(e){const t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;const s=this.generateAuthorityKey(r);return this.getTemporaryCache(s)}updateCacheEntries(e,t,r,s,a){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const c=this.generateStateKey(e);this.setTemporaryCache(c,e,!1);const u=this.generateNonceKey(e);this.setTemporaryCache(u,t,!1);const d=this.generateAuthorityKey(e);if(this.setTemporaryCache(d,r,!1),a){const f={credential:a.homeAccountId,type:Ht.HOME_ACCOUNT_ID};this.setTemporaryCache(Oe.CCS_CREDENTIAL,JSON.stringify(f),!0)}else if(s){const f={credential:s,type:Ht.UPN};this.setTemporaryCache(Oe.CCS_CREDENTIAL,JSON.stringify(f),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeItem(t)}),this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(Oe.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(Oe.ORIGIN_URI)),this.removeItem(this.generateCacheKey(Oe.URL_HASH)),this.removeItem(this.generateCacheKey(Oe.CORRELATION_ID)),this.removeItem(this.generateCacheKey(Oe.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(Oe.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||D.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(t=>{if(t.indexOf(Oe.REQUEST_STATE)===-1)return;const r=this.temporaryCacheStorage.getItem(t);if(!r)return;const s=Vh(this.cryptoImpl,r);s&&s.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=lc(JSON.stringify(e));this.setTemporaryCache(Oe.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(Oe.REQUEST_PARAMS,!0);if(!t)throw V(yh);let r;try{r=JSON.parse(Ln(t))}catch(s){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${s}`),V(Ch)}if(this.removeItem(this.generateCacheKey(Oe.REQUEST_PARAMS)),!r.authority){const s=this.generateAuthorityKey(e),a=this.getTemporaryCache(s);if(!a)throw V(ja);r.authority=a}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Oe.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${D.CACHE_PREFIX}.${Oe.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const t=`${D.CACHE_PREFIX}.${Oe.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw V(lh);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeItem(t)}getLegacyLoginHint(){const e=this.getTemporaryCache(at.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(at.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const t=this.getTemporaryCache(at.ID_TOKEN,!0);t&&(this.removeItem(this.generateCacheKey(at.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=t||e;if(r){const s=Pr(r,Ln);if(s.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),s.preferred_username;if(s.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),s.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){const r=no(t);if(e!==r){const s=this.getItem(e);if(s)return this.removeItem(e),this.setItem(r,s),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}getRedirectRequestContext(){return this.getTemporaryCache(Oe.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(e){this.setTemporaryCache(Oe.REDIRECT_CONTEXT,e,!0)}async hydrateCache(e,t){var u,d,f,g,y;const r=Mi((u=e.account)==null?void 0:u.homeAccountId,(d=e.account)==null?void 0:d.environment,e.idToken,this.clientId,e.tenantId);let s;t.claims&&(s=await this.cryptoImpl.hashString(t.claims));const a=Li((f=e.account)==null?void 0:f.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),((g=e.expiresOn)==null?void 0:g.getTime())||0,((y=e.extExpiresOn)==null?void 0:y.getTime())||0,Ln,void 0,e.tokenType,void 0,t.sshKid,t.claims,s),c=new so(void 0,r,a);return this.saveCacheRecord(c)}}const gw=(o,e)=>{const t={cacheLocation:nt.MemoryStorage,temporaryCacheLocation:nt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new hc(o,t,xi,e)};/*! @azure/msal-browser v3.10.0 2024-02-17 */const Z={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.10.0 2024-02-17 */class pw{constructor(e,t){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=t,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(e){if(typeof window<"u"){const t=Vn();return this.eventCallbacks.set(t,e),this.logger.verbose(`Event callback registered with id: ${t}`),t}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(e,t,r,s){if(typeof window<"u"){const a={eventType:e,interactionType:t||null,payload:r||null,error:s||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${e}`),this.eventCallbacks.forEach((c,u)=>{this.logger.verbose(`Emitting event to callback ${u}: ${e}`),c.apply(null,[a])})}}handleAccountCacheChange(e){var t;try{(t=e.key)!=null&&t.includes(at.ACTIVE_ACCOUNT_FILTERS)&&this.emitEvent(Z.ACTIVE_ACCOUNT_CHANGED);const r=e.newValue||e.oldValue;if(!r)return;const s=JSON.parse(r);if(typeof s!="object"||!tt.isAccountEntity(s))return;const c=oo.toObject(new tt,s).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(Z.ACCOUNT_ADDED,void 0,c)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(Z.ACCOUNT_REMOVED,void 0,c))}catch{return}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Yh{constructor(e,t,r,s,a,c,u,d,f){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=a,this.navigationClient=c,this.nativeMessageHandler=d,this.correlationId=f||Vn(),this.logger=s.clone(Tn.MSAL_SKU,sc,this.correlationId),this.performanceClient=u}async clearCacheOnLogout(e){if(e){tt.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(tt.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}async initializeBaseRequest(e){this.performanceClient.addQueueMeasurement(M.InitializeBaseRequest,this.correlationId);const t=e.authority||this.config.auth.authority,r=[...e&&e.scopes||[]],s={...e,correlationId:this.correlationId,authority:t,scopes:r};if(!s.authenticationScheme)s.authenticationScheme=Ue.BEARER,this.logger.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===Ue.SSH){if(!e.sshJwk)throw Fe(Ui);if(!e.sshKid)throw Fe(xd)}this.logger.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return this.config.cache.claimsBasedCachingEnabled&&e.claims&&!mn.isEmptyObj(e.claims)&&(s.requestedClaimsHash=await this.browserCrypto.hashString(e.claims)),s}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri||Yn();return Ie.getAbsoluteUrl(t,Yn())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new zi(r,this.browserStorage)}async getDiscoveredAuthority(e,t,r){this.performanceClient.addQueueMeasurement(M.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const s={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e||this.config.auth.authority,c=Tt.generateAuthority(a,t||this.config.auth.azureCloudOptions),u=await q(jd,M.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,s,this.logger,this.correlationId,this.performanceClient);if(r&&!u.isAlias(r.environment))throw Fe(Dd);return u}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const mw=32;async function yw(o,e,t){o.addQueueMeasurement(M.GeneratePkceCodes,t);const r=Nr(Cw,M.GenerateCodeVerifier,e,o,t)(o,e,t),s=await q(vw,M.GenerateCodeChallengeFromVerifier,e,o,t)(r,o,e,t);return{verifier:r,challenge:s}}function Cw(o,e,t){try{const r=new Uint8Array(mw);return Nr(Wv,M.GetRandomValues,e,o,t)(r),Qi(r)}catch{throw V(Va)}}async function vw(o,e,t,r){e.addQueueMeasurement(M.GenerateCodeChallengeFromVerifier,r);try{const s=await q(Uh,M.Sha256Digest,t,e,r)(o,e,r);return Qi(new Uint8Array(s))}catch{throw V(Va)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class uo extends Yh{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(M.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const t=await q(yw,M.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r={...e,redirectUri:e.redirectUri,code:D.EMPTY_STRING,codeVerifier:t.verifier};return e.codeChallenge=t.challenge,e.codeChallengeMethod=D.S256_CODE_CHALLENGE_METHOD,r}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const t={correlationId:this.correlationId||Vn(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Ie.getAbsoluteUrl(e.postLogoutRedirectUri,Yn())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Ie.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Yn())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Ie.getAbsoluteUrl(Yn(),Yn())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e,t,r,s){this.performanceClient.addQueueMeasurement(M.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await q(this.getClientConfiguration.bind(this),M.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,t,r,s);return new Zd(a,this.performanceClient)}async getClientConfiguration(e,t,r,s){this.performanceClient.addQueueMeasurement(M.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await q(this.getDiscoveredAuthority.bind(this),M.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)(t,r,s),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:Tn.MSAL_SKU,version:sc,cpu:D.EMPTY_STRING,os:D.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(M.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),s={interactionType:t},a=vn.setRequestState(this.browserCrypto,e&&e.state||D.EMPTY_STRING,s),u={...await q(this.initializeBaseRequest.bind(this),M.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e),redirectUri:r,state:a,nonce:e.nonce||Vn(),responseMode:this.config.auth.OIDCOptions.serverResponseType},d=e.account||this.browserStorage.getActiveAccount();if(d&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${d.homeAccountId}`,this.correlationId),u.account=d),!u.loginHint&&!d){const f=this.browserStorage.getLegacyLoginHint();f&&(u.loginHint=f)}return u}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const ww="ContentError",jh="user_switch";/*! @azure/msal-browser v3.10.0 2024-02-17 */const Tw="USER_INTERACTION_REQUIRED",Ew="USER_CANCEL",Aw="NO_NETWORK",Sw="PERSISTENT_ERROR",bw="DISABLED",_w="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.10.0 2024-02-17 */const Iw=-2147186943,Rw={[jh]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class jn extends $e{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,jn.prototype),this.name="NativeAuthError",this.ext=r}}function ho(o){if(o.ext&&o.ext.status&&(o.ext.status===Sw||o.ext.status===bw)||o.ext&&o.ext.error&&o.ext.error===Iw)return!0;switch(o.errorCode){case ww:return!0;default:return!1}}function fc(o,e,t){if(t&&t.status)switch(t.status){case _w:return $a(Qd);case Tw:return new Cn(o,e);case Ew:return V(Mr);case Aw:return V(Vi)}return new jn(o,Rw[o]||e,t)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Qh extends uo{async acquireToken(e){this.performanceClient.addQueueMeasurement(M.SilentCacheClientAcquireToken,e.correlationId);const t=this.initializeServerTelemetryManager(Ge.acquireTokenSilent_silentFlow),r=await this.createSilentFlowClient(t,e.authority,e.azureCloudOptions,e.account);this.logger.verbose("Silent auth client created");try{const a=(await q(r.acquireCachedToken.bind(r),M.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof Vo&&s.errorCode===Ja&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t==null?void 0:t.account)}async createSilentFlowClient(e,t,r,s){const a=await q(this.getClientConfiguration.bind(this),M.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,t,r,s);return new _v(a,this.performanceClient)}async initializeSilentRequest(e,t){this.performanceClient.addQueueMeasurement(M.InitializeSilentRequest,this.correlationId);const r=await q(this.initializeBaseRequest.bind(this),M.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(e);return{...e,...r,account:t,forceRefresh:e.forceRefresh||!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const gc={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class fo extends Yh{constructor(e,t,r,s,a,c,u,d,f,g,y,v){super(e,t,r,s,a,c,d,f,v),this.apiId=u,this.accountId=g,this.nativeMessageHandler=f,this.nativeStorageManager=y,this.silentCacheClient=new Qh(e,this.nativeStorageManager,r,s,a,c,d,f,v)}async acquireToken(e){this.performanceClient.addQueueMeasurement(M.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const t=this.performanceClient.startMeasurement(M.NativeInteractionClientAcquireToken,e.correlationId),r=xn(),s=await this.initializeNativeRequest(e);try{const d=await this.acquireTokensFromCache(this.accountId,s);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),d}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const a={method:Lr.GetToken,request:s},c=await this.nativeMessageHandler.sendMessage(a),u=this.validateNativeResponse(c);return this.handleNativeResponse(u,s,r).then(d=>(t.end({success:!0,isNativeBroker:!0,requestId:d.requestId}),d)).catch(d=>{throw t.end({success:!1,errorCode:d.errorCode,subErrorCode:d.subError,isNativeBroker:!0}),d})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Ze.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),$(Ea);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw $(Ea);try{const s=this.createSilentCacheRequest(t,r),a=await this.silentCacheClient.acquireToken(s),c={...r,idTokenClaims:a==null?void 0:a.idTokenClaims,idToken:a==null?void 0:a.idToken};return{...a,account:c}}catch(s){throw s}}async acquireTokenRedirect(e){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const t=await this.initializeNativeRequest(e),r={method:Lr.GetToken,request:t};try{const c=await this.nativeMessageHandler.sendMessage(r);this.validateNativeResponse(c)}catch(c){if(c instanceof jn&&ho(c))throw c}this.browserStorage.setTemporaryCache(Oe.NATIVE_REQUEST,JSON.stringify(t),!0);const s={apiId:Ge.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);await this.navigationClient.navigateExternal(a,s)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(e==null||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:s,...a}=r;s&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Oe.NATIVE_REQUEST));const c={method:Lr.GetToken,request:a},u=xn();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const d=await this.nativeMessageHandler.sendMessage(c);this.validateNativeResponse(d);const f=this.handleNativeResponse(d,a,u);return this.browserStorage.setInteractionInProgress(!1),await f}catch(d){throw this.browserStorage.setInteractionInProgress(!1),d}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){var g;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const s=Pr(e.id_token,Ln),a=this.createHomeAccountIdentifier(e,s),c=(g=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))==null?void 0:g.homeAccountId;if(a!==c&&e.account.id!==t.accountId)throw fc(jh);const u=await this.getDiscoveredAuthority(t.authority),d=Ga(this.browserStorage,u,a,s,Ln,e.client_info,void 0,s.tid,void 0,e.account.id,this.logger),f=await this.generateAuthenticationResult(e,t,s,d,u.canonicalAuthority,r);return this.cacheAccount(d),this.cacheNativeTokens(e,t,a,s,f.accessToken,f.tenantId,r),f}createHomeAccountIdentifier(e,t){return tt.generateHomeAccountId(e.client_info||D.EMPTY_STRING,yn.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?Ze.fromString(e.scope):Ze.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===Ue.POP){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new ao(this.browserCrypto),s={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw $(ba);return r.signPopToken(e.access_token,t.keyId,s)}else return e.access_token}async generateAuthenticationResult(e,t,r,s,a,c){const u=this.addTelemetryFromNativeResponse(e),d=e.scope?Ze.fromString(e.scope):Ze.fromString(t.scope),f=e.account.properties||{},g=f.UID||r.oid||r.sub||D.EMPTY_STRING,y=f.TenantId||r.tid||D.EMPTY_STRING,v=Ua(s.getAccountInfo(),void 0,r,e.id_token);v.nativeAccountId!==e.account.id&&(v.nativeAccountId=e.account.id);const T=await this.generatePopAccessToken(e,t),A=t.tokenType===Ue.POP?Ue.POP:Ue.BEARER;return{authority:a,uniqueId:g,tenantId:y,scopes:d.asArray(),account:v,idToken:e.id_token,idTokenClaims:r,accessToken:T,fromCache:u?this.isResponseFromCache(u):!1,expiresOn:new Date(Number(c+e.expires_in)*1e3),tokenType:A,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,s,a,c,u){const d=Mi(r,t.authority,e.id_token||"",t.clientId,s.tid||""),f=t.tokenType===Ue.POP?D.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,g=u+f,y=this.generateScopes(e,t),v=Li(r,t.authority,a,t.clientId,s.tid||c,y.printScopes(),g,0,Ln),T=new so(void 0,d,v);this.nativeStorageManager.saveCacheRecord(T,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Qu(pa,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority(t,e.azureCloudOptions,e.account);const r=new Ie(t);r.validateAsUri();const{scopes:s,...a}=e,c=new Ze(s||[]);c.appendScopes(Bo);const u=()=>{switch(this.apiId){case Ge.ssoSilent:case Ge.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),ct.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case ct.NONE:case ct.CONSENT:case ct.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),V(kh)}},d={...a,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:c.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:u(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1};if(this.handleExtraBrokerParams(d),d.extraParameters=d.extraParameters||{},d.extraParameters.telemetry=Yo.MATS_TELEMETRY,e.authenticationScheme===Ue.POP){const f={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},g=new ao(this.browserCrypto),y=await q(g.generateCnf.bind(g),M.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(f,this.logger);d.reqCnf=y.reqCnfHash,d.keyId=y.kid}return d}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(gc.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(gc.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(io)){const t=e.extraParameters[io],r=e.redirectUri,s=e.extraParameters[gc.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:t,child_redirect_uri:r},e.redirectUri=s}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Dn{constructor(e,t,r,s){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=s,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(M.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:Yo.CHANNEL_ID,extensionId:this.extensionId,responseId:Vn(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,s)=>{this.resolvers.set(t.responseId,{resolve:r,reject:s})})}static async createProvider(e,t,r){e.trace("NativeMessageHandler - createProvider called.");try{const s=new Dn(e,t,r,Yo.PREFERRED_EXTENSION_ID);return await s.sendHandshakeRequest(),s}catch{const a=new Dn(e,t,r);return await a.sendHandshakeRequest(),a}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Yo.CHANNEL_ID,extensionId:this.extensionId,responseId:Vn(),body:{method:Lr.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(V(_h)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(!(!t.channel||t.channel!==Yo.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===Lr.HandshakeRequest){const r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(V(Ih))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),s=this.handshakeResolvers.get(t.responseId);try{const a=t.body.method;if(a===Lr.Response){if(!r)return;const c=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(c)}`),c.status!=="Success")r.reject(fc(c.code,c.description,c.ext));else if(c.result)c.result.code&&c.result.description?r.reject(fc(c.result.code,c.result.description,c.result.ext)):r.resolve(c.result);else throw Qu(pa,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(a===Lr.HandshakeResponse){if(!s){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),s.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(a){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${a}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(a):s&&s.reject(a)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,r,s){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(s)switch(s){case Ue.BEARER:case Ue.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class pc{constructor(e,t,r,s,a){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=s,this.performanceClient=a}async handleCodeResponse(e,t){this.performanceClient.addQueueMeasurement(M.HandleCodeResponse,t.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,t.state)}catch(s){throw s instanceof gr&&s.subError===Mr?V(Mr):s}return q(this.handleCodeResponseFromServer.bind(this),M.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(M.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await q(this.authModule.updateAuthority.bind(this.authModule),M.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const a=this.createCcsCredentials(t);a&&(this.authCodeRequest.ccsCredential=a)}return await q(this.authModule.acquireToken.bind(this.authModule),M.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Ht.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Ht.UPN}:null}}/*! @azure/msal-browser v3.10.0 2024-02-17 */function Jh(o,e,t){const r=Fi(o);if(!r)throw Hd(o)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${o}`),V(sh)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),V(ih));return r}function kw(o,e,t){if(!o.state)throw V(Ya);const r=Vh(e,o.state);if(!r)throw V(ah);if(r.interactionType!==t)throw V(ch)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Pw extends uo{constructor(e,t,r,s,a,c,u,d,f,g){super(e,t,r,s,a,c,u,f,g),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=d}acquireToken(e){try{const t=this.generatePopupName(e.scopes||Bo,e.authority||this.config.auth.authority),r=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,t,r);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const s=this.openSizedPopup("about:blank",t,r);return this.acquireTokenPopupAsync(e,t,r,s)}}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r=this.generateLogoutPopupName(t),s=e&&e.authority,a=e&&e.mainWindowRedirectUri,c=(e==null?void 0:e.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,c,s,void 0,a);{this.logger.verbose("asyncPopup set to false, opening popup");const u=this.openSizedPopup("about:blank",r,c);return this.logoutPopupAsync(t,r,c,s,u,a)}}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,r,s){this.logger.verbose("acquireTokenPopupAsync called");const a=this.initializeServerTelemetryManager(Ge.acquireTokenPopup),c=await q(this.initializeAuthorizationRequest.bind(this),M.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Y.Popup);Fh(c.authority);try{const u=await q(this.initializeAuthorizationCodeRequest.bind(this),M.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(c),d=await q(this.createAuthCodeClient.bind(this),M.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(a,c.authority,c.azureCloudOptions,c.account),f=Dn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let g;f&&(g=this.performanceClient.startMeasurement(M.FetchAccountIdWithNativeBroker,e.correlationId));const y=await d.getAuthCodeUrl({...c,nativeBroker:f}),v=new pc(d,this.browserStorage,u,this.logger,this.performanceClient),T={popup:s,popupName:t,popupWindowAttributes:r},A=this.initiateAuthRequest(y,T);this.eventHandler.emitEvent(Z.POPUP_OPENED,Y.Popup,{popupWindow:A},null);const S=await this.monitorPopupForHash(A),b=Nr(Jh,M.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(S,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(Mn.removeThrottle(this.browserStorage,this.config.auth.clientId,u),b.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),g&&g.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw V(Wo);const I=new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ge.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,b.accountId,this.nativeStorage,c.correlationId),{userRequestState:k}=vn.parseRequestState(this.browserCrypto,c.state);return await I.acquireToken({...c,state:k,prompt:void 0})}return await v.handleCodeResponse(b,c)}catch(u){throw s&&s.close(),u instanceof $e&&(u.setCorrelationId(this.correlationId),a.cacheFailedRequest(u)),u}}async logoutPopupAsync(e,t,r,s,a,c){var d,f;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Z.LOGOUT_START,Y.Popup,e);const u=this.initializeServerTelemetryManager(Ge.logoutPopup);try{await this.clearCacheOnLogout(e.account);const g=await q(this.createAuthCodeClient.bind(this),M.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(u,s,void 0,e.account||void 0);try{g.authority.endSessionEndpoint}catch{if((d=e.account)!=null&&d.homeAccountId&&e.postLogoutRedirectUri&&g.authority.protocolMode===qn.OIDC){if(this.browserStorage.removeAccount((f=e.account)==null?void 0:f.homeAccountId),this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,Y.Popup,e),c){const T={apiId:Ge.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},A=Ie.getAbsoluteUrl(c,Yn());await this.navigationClient.navigateInternal(A,T)}a&&a.close();return}}const y=g.getLogoutUri(e);this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,Y.Popup,e);const v=this.openPopup(y,{popupName:t,popupWindowAttributes:r,popup:a});if(this.eventHandler.emitEvent(Z.POPUP_OPENED,Y.Popup,{popupWindow:v},null),await this.monitorPopupForHash(v).catch(()=>{}),c){const T={apiId:Ge.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},A=Ie.getAbsoluteUrl(c,Yn());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${A}`),await this.navigationClient.navigateInternal(A,T)}else this.logger.verbose("No main window navigation requested")}catch(g){throw a&&a.close(),g instanceof $e&&(g.setCorrelationId(this.correlationId),u.cacheFailedRequest(g)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Z.LOGOUT_FAILURE,Y.Popup,null,g),this.eventHandler.emitEvent(Z.LOGOUT_END,Y.Popup),g}this.eventHandler.emitEvent(Z.LOGOUT_END,Y.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),V(qi)}monitorPopupForHash(e){return new Promise((t,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const s=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(s),r(V(Mr));return}let a="";try{a=e.location.href}catch{}if(!a||a==="about:blank")return;clearInterval(s);let c="";const u=this.config.auth.OIDCOptions.serverResponseType;e&&(u===Ko.QUERY?c=e.location.search:c=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(c)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t.popupName,t.popupWindowAttributes)),!r)throw V(dh);return r.focus&&r.focus(),this.currentWindow=r,window.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),V(uh)}}openSizedPopup(e,t,r){var v,T,A,S;const s=window.screenLeft?window.screenLeft:window.screenX,a=window.screenTop?window.screenTop:window.screenY,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let d=(v=r.popupSize)==null?void 0:v.width,f=(T=r.popupSize)==null?void 0:T.height,g=(A=r.popupPosition)==null?void 0:A.top,y=(S=r.popupPosition)==null?void 0:S.left;return(!d||d<0||d>c)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),d=Tn.POPUP_WIDTH),(!f||f<0||f>u)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),f=Tn.POPUP_HEIGHT),(!g||g<0||g>u)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),g=Math.max(0,u/2-Tn.POPUP_HEIGHT/2+a)),(!y||y<0||y>c)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),y=Math.max(0,c/2-Tn.POPUP_WIDTH/2+s)),window.open(e,t,`width=${d}, height=${f}, top=${g}, left=${y}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(Y.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${Tn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${Tn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Xh{constructor(e,t,r,s,a){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=s,this.performanceClient=a}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Oe.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Oe.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Ge.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await t.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await t.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),V(qi)}async handleCodeResponse(e,t){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const r=this.browserStorage.generateStateKey(t),s=this.browserStorage.getTemporaryCache(r);if(!s)throw $(Oi,"Cached State");let a;try{a=this.authModule.handleFragmentResponse(e,s)}catch(f){throw f instanceof gr&&f.subError===Mr?V(Mr):f}const c=this.browserStorage.generateNonceKey(s),u=this.browserStorage.getTemporaryCache(c);if(this.authCodeRequest.code=a.code,a.cloud_instance_host_name&&await q(this.authModule.updateAuthority.bind(this.authModule),M.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(a.cloud_instance_host_name,this.authCodeRequest.correlationId),a.nonce=u||void 0,a.state=s,a.client_info)this.authCodeRequest.clientInfo=a.client_info;else{const f=this.checkCcsCredentials();f&&(this.authCodeRequest.ccsCredential=f)}const d=await this.authModule.acquireToken(this.authCodeRequest,a);return this.browserStorage.cleanRequestByState(t),d}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(Oe.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Ow extends uo{constructor(e,t,r,s,a,c,u,d,f,g){super(e,t,r,s,a,c,u,f,g),this.nativeStorage=d}async acquireToken(e){const t=await q(this.initializeAuthorizationRequest.bind(this),M.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Y.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);const r=this.initializeServerTelemetryManager(Ge.acquireTokenRedirect),s=a=>{a.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(Z.RESTORE_FROM_BFCACHE,Y.Redirect))};try{const a=await q(this.initializeAuthorizationCodeRequest.bind(this),M.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(t),c=await q(this.createAuthCodeClient.bind(this),M.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(r,t.authority,t.azureCloudOptions,t.account),u=new Xh(c,this.browserStorage,a,this.logger,this.performanceClient),d=await c.getAuthCodeUrl({...t,nativeBroker:Dn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),f=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${f}`),window.addEventListener("pageshow",s),await u.initiateAuthRequest(d,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:f,onRedirectNavigate:e.onRedirectNavigate})}catch(a){throw a instanceof $e&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),window.removeEventListener("pageshow",s),this.browserStorage.cleanRequestByState(t.state),a}}async handleRedirectPromise(e,t,r){const s=this.initializeServerTelemetryManager(Ge.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[a,c]=this.getRedirectResponse(e||"");if(!a)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(Y.Redirect),t&&r&&(t==null||t.addFields({errorCode:"no_server_response"},r)),null;const u=this.browserStorage.getTemporaryCache(Oe.ORIGIN_URI,!0)||D.EMPTY_STRING,d=Ie.removeHashFromUrl(u),f=Ie.removeHashFromUrl(window.location.href);if(d===f&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),u.indexOf("#")>-1&&Jv(u),await this.handleResponse(a,s);if(this.config.auth.navigateToLoginRequestUrl){if(!rc()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Oe.URL_HASH,c,!0);const g={apiId:Ge.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let y=!0;if(!u||u==="null"){const v=Zv();this.browserStorage.setTemporaryCache(Oe.ORIGIN_URI,v,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),y=await this.navigationClient.navigateInternal(v,g)}else this.logger.verbose(`Navigating to loginRequestUrl: ${u}`),y=await this.navigationClient.navigateInternal(u,g);if(!y)return await this.handleResponse(a,s)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(a,s);return null}catch(a){throw a instanceof $e&&(a.setCorrelationId(this.correlationId),s.cacheFailedRequest(a)),this.browserStorage.cleanRequestByInteractionType(Y.Redirect),a}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===Ko.QUERY?t=window.location.search:t=window.location.hash);let r=Fi(t);if(r){try{kw(r,this.browserCrypto,Y.Redirect)}catch(a){return a instanceof $e&&this.logger.error(`Interaction type validation failed due to ${a.errorCode}: ${a.errorMessage}`),[null,""]}return Qv(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const s=this.browserStorage.getTemporaryCache(Oe.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Oe.URL_HASH)),s&&(r=Fi(s),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,s]):[null,""]}async handleResponse(e,t){const r=e.state;if(!r)throw V(Ya);const s=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw V(Wo);const d=new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ge.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,s.correlationId),{userRequestState:f}=vn.parseRequestState(this.browserCrypto,r);return d.acquireToken({...s,state:f,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(r)})}const a=this.browserStorage.getCachedAuthority(r);if(!a)throw V(ja);const c=await q(this.createAuthCodeClient.bind(this),M.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(t,a);return Mn.removeThrottle(this.browserStorage,this.config.auth.clientId,s),new Xh(c,this.browserStorage,s,this.logger,this.performanceClient).handleCodeResponse(e,r)}async logout(e){var s,a;this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Ge.logout);try{this.eventHandler.emitEvent(Z.LOGOUT_START,Y.Redirect,e),await this.clearCacheOnLogout(t.account);const c={apiId:Ge.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=await q(this.createAuthCodeClient.bind(this),M.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(r,e&&e.authority,void 0,e&&e.account||void 0);if(u.authority.protocolMode===qn.OIDC)try{u.authority.endSessionEndpoint}catch{if((s=t.account)!=null&&s.homeAccountId){this.browserStorage.removeAccount((a=t.account)==null?void 0:a.homeAccountId),this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,Y.Redirect,t);return}}const d=u.getLogoutUri(t);if(this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,Y.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(d)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(d,c);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(d,c);return}}catch(c){throw c instanceof $e&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),this.eventHandler.emitEvent(Z.LOGOUT_FAILURE,Y.Redirect,null,c),this.eventHandler.emitEvent(Z.LOGOUT_END,Y.Redirect),c}this.eventHandler.emitEvent(Z.LOGOUT_END,Y.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Ie.getAbsoluteUrl(t,Yn())}}/*! @azure/msal-browser v3.10.0 2024-02-17 */async function Nw(o,e,t,r,s){if(e.addQueueMeasurement(M.SilentHandlerInitiateAuthRequest,r),!o)throw t.info("Navigate url is empty"),V(qi);return s?q(Mw,M.SilentHandlerLoadFrame,t,e,r)(o,s,e,r):Nr(Lw,M.SilentHandlerLoadFrameSync,t,e,r)(o)}async function xw(o,e,t,r,s,a,c){return r.addQueueMeasurement(M.SilentHandlerMonitorIframeForHash,a),new Promise((u,d)=>{e<ic&&s.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${ic}ms). This may result in timeouts.`);const f=window.setTimeout(()=>{window.clearInterval(g),d(V(hh))},e),g=window.setInterval(()=>{let y="";const v=o.contentWindow;try{y=v?v.location.href:""}catch{}if(!y||y==="about:blank")return;let T="";v&&(c===Ko.QUERY?T=v.location.search:T=v.location.hash),window.clearTimeout(f),window.clearInterval(g),u(T)},t)}).finally(()=>{Nr(Dw,M.RemoveHiddenIframe,s,r,a)(o)})}function Mw(o,e,t,r){return t.addQueueMeasurement(M.SilentHandlerLoadFrame,r),new Promise((s,a)=>{const c=Zh();window.setTimeout(()=>{if(!c){a("Unable to load iframe");return}c.src=o,s(c)},e)})}function Lw(o){const e=Zh();return e.src=o,e}function Zh(){const o=document.createElement("iframe");return o.style.visibility="hidden",o.style.position="absolute",o.style.width=o.style.height="0",o.style.border="0",o.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(o),o}function Dw(o){document.body===o.parentNode&&document.body.removeChild(o)}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Uw extends uo{constructor(e,t,r,s,a,c,u,d,f,g,y){super(e,t,r,s,a,c,d,g,y),this.apiId=u,this.nativeStorage=f}async acquireToken(e){this.performanceClient.addQueueMeasurement(M.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==ct.NONE&&t.prompt!==ct.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${ct.NONE}`),t.prompt=ct.NONE):t.prompt=ct.NONE;const r=await q(this.initializeAuthorizationRequest.bind(this),M.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,Y.Silent);Fh(r.authority);const s=this.initializeServerTelemetryManager(this.apiId);try{const a=await q(this.createAuthCodeClient.bind(this),M.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)(s,r.authority,r.azureCloudOptions,r.account);return await q(this.silentTokenHelper.bind(this),M.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(a,r)}catch(a){throw a instanceof $e&&(a.setCorrelationId(this.correlationId),s.cacheFailedRequest(a)),a}}logout(){return Promise.reject(V(Wi))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(M.SilentIframeClientTokenHelper,r);const s=await q(this.initializeAuthorizationCodeRequest.bind(this),M.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(t),a=await q(e.getAuthCodeUrl.bind(e),M.GetAuthCodeUrl,this.logger,this.performanceClient,r)({...t,nativeBroker:Dn.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}),c=new pc(e,this.browserStorage,s,this.logger,this.performanceClient),u=await q(Nw,M.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(a,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),d=this.config.auth.OIDCOptions.serverResponseType,f=await q(xw,M.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(u,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,d),g=Nr(Jh,M.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,d,this.logger);if(g.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw V(Wo);const y=new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,g.accountId,this.browserStorage,r),{userRequestState:v}=vn.parseRequestState(this.browserCrypto,t.state);return q(y.acquireToken.bind(y),M.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)({...t,state:v,prompt:t.prompt||ct.NONE})}return q(c.handleCodeResponse.bind(c),M.HandleCodeResponse,this.logger,this.performanceClient,r)(g,t)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Hw extends uo{async acquireToken(e){this.performanceClient.addQueueMeasurement(M.SilentRefreshClientAcquireToken,e.correlationId);const t=await q(this.initializeBaseRequest.bind(this),M.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const s=this.initializeServerTelemetryManager(Ge.acquireTokenSilent_silentFlow),a=await this.createRefreshTokenClient(s,r.authority,r.azureCloudOptions,r.account);return q(a.acquireTokenByRefreshToken.bind(a),M.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(c=>{throw c.setCorrelationId(this.correlationId),s.cacheFailedRequest(c),c})}logout(){return Promise.reject(V(Wi))}async createRefreshTokenClient(e,t,r,s){const a=await q(this.getClientConfiguration.bind(this),M.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,t,r,s);return new za(a,this.performanceClient)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Fw{constructor(e,t,r,s){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=s}loadExternalTokens(e,t,r){if(this.logger.info("TokenCache - loadExternalTokens called"),!t.id_token)throw V(wn);const s=Pr(t.id_token,Ln);let a,c,u;if(e.account)u=tt.createFromAccountInfo(e.account),a=new so(u,this.loadIdToken(t.id_token,u.homeAccountId,e.account.environment,e.account.tenantId),this.loadAccessToken(e,t,u.homeAccountId,e.account.environment,e.account.tenantId,r),this.loadRefreshToken(e,t,u.homeAccountId,e.account.environment));else if(e.authority){const d=Tt.generateAuthority(e.authority,e.azureCloudOptions),f={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(c=new Tt(d,this.config.system.networkClient,this.storage,f,this.logger,e.correlationId||Vn()),r.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),u=this.loadAccount(s,c,r.clientInfo),a=new so(u,this.loadIdToken(t.id_token,u.homeAccountId,c.hostnameAndPort,c.tenant),this.loadAccessToken(e,t,u.homeAccountId,c.hostnameAndPort,c.tenant,r),this.loadRefreshToken(e,t,u.homeAccountId,c.hostnameAndPort));else if(t.client_info)this.logger.trace("TokenCache - homeAccountId from response"),u=this.loadAccount(s,c,t.client_info),a=new so(u,this.loadIdToken(t.id_token,u.homeAccountId,c.hostnameAndPort,c.tenant),this.loadAccessToken(e,t,u.homeAccountId,c.hostnameAndPort,c.tenant,r),this.loadRefreshToken(e,t,u.homeAccountId,c.hostnameAndPort));else throw V(wn)}else throw V(wn);return this.generateAuthenticationResult(e,s,a,u,c)}loadAccount(e,t,r,s){if(this.isBrowserEnvironment){this.logger.verbose("TokenCache - loading account");let a;if(s?a=s:t.authorityType!==void 0&&r&&(a=tt.generateHomeAccountId(r,t.authorityType,this.logger,this.cryptoObj,e)),!a)throw V(wn);const c=e.tid,u=Ga(this.storage,t,a,e,Ln,r,t.hostnameAndPort,c,void 0,void 0,this.logger);return this.storage.setAccount(u),u}else throw V(wn)}loadIdToken(e,t,r,s){const a=Mi(t,r,e,this.config.auth.clientId,s);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(a),a;throw V(wn)}loadAccessToken(e,t,r,s,a,c){if(!t.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!t.expires_in||!c.extendedExpiresOn)throw V(wn);const u=new Ze(e.scopes).printScopes(),d=c.expiresOn||t.expires_in+new Date().getTime()/1e3,f=c.extendedExpiresOn,g=Li(r,s,t.access_token,this.config.auth.clientId,a,u,d,f,Ln);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(g),g;throw V(wn)}loadRefreshToken(e,t,r,s){if(!t.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const a=yd(r,s,t.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(a),a;throw V(wn)}generateAuthenticationResult(e,t,r,s,a){var v,T;let c=D.EMPTY_STRING,u=[],d=null,f;r!=null&&r.accessToken&&(c=r.accessToken.secret,u=Ze.fromString(r.accessToken.target).asArray(),d=new Date(Number(r.accessToken.expiresOn)*1e3),f=new Date(Number(r.accessToken.extendedExpiresOn)*1e3));const g=t.oid||t.sub||D.EMPTY_STRING,y=t.tid||D.EMPTY_STRING;return{authority:a?a.canonicalAuthority:D.EMPTY_STRING,uniqueId:g,tenantId:y,scopes:u,account:s.getAccountInfo(),idToken:((v=r.idToken)==null?void 0:v.secret)||"",idTokenClaims:t||{},accessToken:c,fromCache:!0,expiresOn:d,correlationId:e.correlationId||D.EMPTY_STRING,requestId:D.EMPTY_STRING,extExpiresOn:f,familyId:D.EMPTY_STRING,tokenType:((T=r==null?void 0:r.accessToken)==null?void 0:T.tokenType)||D.EMPTY_STRING,state:D.EMPTY_STRING,cloudGraphHostName:s.cloudGraphHostName||D.EMPTY_STRING,msGraphHost:s.msGraphHost||D.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Bw extends Zd{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Kw extends uo{constructor(e,t,r,s,a,c,u,d,f,g){super(e,t,r,s,a,c,d,f,g),this.apiId=u}async acquireToken(e){if(!e.code)throw V(Eh);const t=await q(this.initializeAuthorizationRequest.bind(this),M.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,Y.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const s={...t,code:e.code},a=await q(this.getClientConfiguration.bind(this),M.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)(r,t.authority,t.azureCloudOptions,t.account),c=new Bw(a);this.logger.verbose("Auth code client created");const u=new pc(c,this.browserStorage,s,this.logger,this.performanceClient);return await q(u.handleCodeResponseFromServer.bind(u),M.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(s){throw s instanceof $e&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}logout(){return Promise.reject(V(Wi))}}/*! @azure/msal-browser v3.10.0 2024-02-17 */class Ji{constructor(e){this.atsAsyncMeasurement=void 0,this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new lo(this.logger,this.performanceClient):xi,this.eventHandler=new pw(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new hc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,yv(this.config.auth)):gw(this.config.auth.clientId,this.logger);const t={cacheLocation:nt.MemoryStorage,temporaryCacheLocation:nt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new hc(this.config.auth.clientId,t,this.browserCrypto,this.logger),this.tokenCache=new Fw(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e){const t=new Ji(e);return await t.initialize(),t}trackPageVisibility(){this.atsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}async initialize(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}const e=this.config.system.allowNativeBroker,t=this.performanceClient.startMeasurement(M.InitializeClientApplication);if(this.eventHandler.emitEvent(Z.INITIALIZE_START),e)try{this.nativeExtensionProvider=await Dn.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(r){this.logger.verbose(r)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await q(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),M.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient)(this.performanceClient)),this.initialized=!0,this.eventHandler.emitEvent(Z.INITIALIZE_END),t.end({allowNativeBroker:e,success:!0})}async handleRedirectPromise(e){this.logger.verbose("handleRedirectPromise called"),Hh(this.initialized);const t=this.getAllAccounts();if(this.isBrowserEnvironment){const r=e||"";let s=this.redirectResponse.get(r);if(typeof s>"u"){const a=this.browserStorage.getCachedNativeRequest(),c=a&&Dn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,u=c?a==null?void 0:a.correlationId:this.browserStorage.getTemporaryCache(Oe.CORRELATION_ID,!0)||"",d=this.performanceClient.startMeasurement("acquireTokenRedirect",u);this.eventHandler.emitEvent(Z.HANDLE_REDIRECT_START,Y.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");let f;if(c&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const g=new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ge.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,a.accountId,this.nativeInternalStorage,a.correlationId);f=q(g.handleRedirectPromise.bind(g),M.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(this.performanceClient,d.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const g=this.createRedirectClient(u);f=q(g.handleRedirectPromise.bind(g),M.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(e,this.performanceClient,d.event.correlationId)}s=f.then(g=>(g&&(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Z.LOGIN_SUCCESS,Y.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_SUCCESS,Y.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),d.end({success:!0})),this.eventHandler.emitEvent(Z.HANDLE_REDIRECT_END,Y.Redirect),d.end({success:!1}),g)).catch(g=>{const y=g;throw t.length>0?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,Y.Redirect,null,y):this.eventHandler.emitEvent(Z.LOGIN_FAILURE,Y.Redirect,null,y),this.eventHandler.emitEvent(Z.HANDLE_REDIRECT_END,Y.Redirect),y instanceof $e?d.end({success:!1,errorCode:y.errorCode,subErrorCode:y.subError}):d.end({success:!1}),g}),this.redirectResponse.set(r,s)}else this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return s}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t),this.preflightBrowserEnvironmentCheck(Y.Redirect);const r=this.getAllAccounts().length>0;r?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_START,Y.Redirect,e):this.eventHandler.emitEvent(Z.LOGIN_START,Y.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ge.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e).catch(c=>{if(c instanceof jn&&ho(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof Cn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),c}):s=this.createRedirectClient(t).acquireToken(e),s.catch(a=>{throw r?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,Y.Redirect,null,a):this.eventHandler.emitEvent(Z.LOGIN_FAILURE,Y.Redirect,null,a),a})}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(M.AcquireTokenPopup,t);try{this.logger.verbose("acquireTokenPopup called",t),this.preflightBrowserEnvironmentCheck(Y.Popup)}catch(c){return Promise.reject(c)}const s=this.getAllAccounts();s.length>0?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_START,Y.Popup,e):this.eventHandler.emitEvent(Z.LOGIN_START,Y.Popup,e);let a;return this.canUseNative(e)?a=this.acquireTokenNative({...e,correlationId:t},Ge.acquireTokenPopup).then(c=>(this.getBrowserStorage().setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),c)).catch(c=>{if(c instanceof jn&&ho(c))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(c instanceof Cn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.getBrowserStorage().setInteractionInProgress(!1),c}):a=this.createPopupClient(t).acquireToken(e),a.then(c=>(s.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Z.LOGIN_SUCCESS,Y.Popup,c):this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_SUCCESS,Y.Popup,c),r.add({accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),r.end({success:!0,requestId:c.requestId}),c)).catch(c=>(s.length>0?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,Y.Popup,null,c):this.eventHandler.emitEvent(Z.LOGIN_FAILURE,Y.Popup,null,c),r.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),Promise.reject(c)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var a;const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};this.preflightBrowserEnvironmentCheck(Y.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(M.SsoSilent,t),(a=this.ssoSilentMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(Z.SSO_SILENT_START,Y.Silent,r);let s;return this.canUseNative(r)?s=this.acquireTokenNative(r,Ge.ssoSilent).catch(c=>{if(c instanceof jn&&ho(c))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw c}):s=this.createSilentIframeClient(r.correlationId).acquireToken(r),s.then(c=>{var u,d;return this.eventHandler.emitEvent(Z.SSO_SILENT_SUCCESS,Y.Silent,c),(u=this.ssoSilentMeasurement)==null||u.add({accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),(d=this.ssoSilentMeasurement)==null||d.end({success:!0,isNativeBroker:c.fromNativeBroker,requestId:c.requestId}),c}).catch(c=>{var u;throw this.eventHandler.emitEvent(Z.SSO_SILENT_FAILURE,Y.Silent,null,c),(u=this.ssoSilentMeasurement)==null||u.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.preflightBrowserEnvironmentCheck(Y.Silent),this.logger.trace("acquireTokenByCode called",t),this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_START,Y.Silent,e);const r=this.performanceClient.startMeasurement(M.AcquireTokenByCode,t);try{if(e.code&&e.nativeAccountId)throw V(Sh);if(e.code){const s=e.code;let a=this.hybridAuthCodeResponses.get(s);return a?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),a=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(c=>(this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Y.Silent,c),this.hybridAuthCodeResponses.delete(s),r.add({accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),r.end({success:!0,isNativeBroker:c.fromNativeBroker,requestId:c.requestId}),c)).catch(c=>{throw this.hybridAuthCodeResponses.delete(s),this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_FAILURE,Y.Silent,null,c),r.end({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c}),this.hybridAuthCodeResponses.set(s,a)),await a}else if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId))return await this.acquireTokenNative({...e,correlationId:t},Ge.acquireTokenByCode,e.nativeAccountId).catch(s=>{throw s instanceof jn&&ho(s)&&(this.nativeExtensionProvider=void 0),s});throw V(bh)}else throw V(Ah)}catch(s){throw this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_FAILURE,Y.Silent,null,s),r.end({errorCode:s instanceof $e&&s.errorCode||void 0,subErrorCode:s instanceof $e&&s.subError||void 0,success:!1}),s}}async acquireTokenByCodeAsync(e){var s;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(M.AcquireTokenByCodeAsync,e.correlationId),(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(a=>{var c;return(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({success:!0,fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker,requestId:a.requestId}),a}).catch(a=>{var c;throw(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({errorCode:a.errorCode,subErrorCode:a.subError,success:!1}),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t,r){switch(this.performanceClient.addQueueMeasurement(M.AcquireTokenFromCache,t.correlationId),r){case Zt.Default:case Zt.AccessToken:case Zt.AccessTokenAndRefreshToken:return q(e.acquireToken.bind(e),M.SilentCacheClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t);default:throw $(hr)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(M.AcquireTokenByRefreshToken,e.correlationId),t){case Zt.Default:case Zt.AccessTokenAndRefreshToken:case Zt.RefreshToken:case Zt.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return q(r.acquireToken.bind(r),M.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw $(hr)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(M.AcquireTokenBySilentIframe,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return q(t.acquireToken.bind(t),M.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(Y.Redirect),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(Y.Popup),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}async clearCache(e){const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(e):[]}getAccount(e){if(this.logger.trace("getAccount called"),Object.keys(e).length===0)return this.logger.warning("getAccount: No accountFilter provided"),null;const t=this.browserStorage.getAccountInfoFilteredBy(e);return t?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),t):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(e){if(this.logger.trace("getAccountByUsername called"),!e)return this.logger.warning("getAccountByUsername: No username provided"),null;const t=this.browserStorage.getAccountInfoFilteredBy({username:e});return t?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),t):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(e){if(this.logger.trace("getAccountByHomeId called"),!e)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const t=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:e});return t?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),t):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(e){if(this.logger.trace("getAccountByLocalId called"),!e)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const t=this.browserStorage.getAccountInfoFilteredBy({localAccountId:e});return t?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),t):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(e){this.browserStorage.setActiveAccount(e)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=tt.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}preflightBrowserEnvironmentCheck(e,t=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),nw(this.isBrowserEnvironment),ew(e,this.config.system.allowRedirectInIframe),oc(),tw(),Hh(this.initialized),e===Y.Redirect&&this.config.cache.cacheLocation===nt.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw rt(qh);(e===Y.Redirect||e===Y.Popup)&&this.preflightInteractiveRequest(!t)}preflightInteractiveRequest(e){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),oc(),e&&this.getBrowserStorage().setInteractionInProgress(!0)}async acquireTokenNative(e,t,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw V(Wo);return new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!Dn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case ct.NONE:case ct.CONSENT:case ct.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Pw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new Ow(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new Uw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ge.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new Qh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new Hw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new Kw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ge.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Vn():D.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||Nh})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||Nh})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(M.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(Y.Silent),this.logger.verbose("acquireTokenSilent called",t);const s=e.account||this.getActiveAccount();if(!s)throw V(mh);const a={clientId:this.config.auth.clientId,authority:e.authority||D.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:s.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},c=JSON.stringify(a),u=this.activeSilentTokenRequests.get(c);if(typeof u>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);const d=q(this.acquireTokenSilentAsync.bind(this),M.AcquireTokenSilentAsync,this.logger,this.performanceClient,t)({...e,correlationId:t},s).then(f=>(this.activeSilentTokenRequests.delete(c),r.add({accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length}),r.end({success:!0,fromCache:f.fromCache,isNativeBroker:f.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:f.requestId}),f)).catch(f=>{throw this.activeSilentTokenRequests.delete(c),r.end({errorCode:f.errorCode,subErrorCode:f.subError,success:!1}),f});return this.activeSilentTokenRequests.set(c,d),{...await d,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),r.discard(),{...await u,state:e.state}}async acquireTokenSilentAsync(e,t){var s;this.performanceClient.addQueueMeasurement(M.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_START,Y.Silent,e),this.atsAsyncMeasurement=this.performanceClient.startMeasurement(M.AcquireTokenSilentAsync,e.correlationId),(s=this.atsAsyncMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility);let r;if(Dn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&t.nativeAccountId){this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const a={...e,account:t};r=this.acquireTokenNative(a,Ge.acquireTokenSilent_silentFlow).catch(async c=>{if(c instanceof jn&&ho(c))return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,this.createSilentIframeClient(e.correlationId).acquireToken(e);throw c})}else{this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const a=this.createSilentCacheClient(e.correlationId),c=await q(a.initializeSilentRequest.bind(a),M.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t),u=e.cacheLookupPolicy||Zt.Default;r=q(this.acquireTokenFromCache.bind(this),M.AcquireTokenFromCache,this.logger,this.performanceClient,c.correlationId)(a,c,u).catch(d=>{if(e.cacheLookupPolicy===Zt.AccessToken)throw d;return oc(),this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_NETWORK_START,Y.Silent,c),q(this.acquireTokenByRefreshToken.bind(this),M.AcquireTokenByRefreshToken,this.logger,this.performanceClient,c.correlationId)(c,u).catch(f=>{if($w(f,c,u))return this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",c.correlationId),q(this.acquireTokenBySilentIframe.bind(this),M.AcquireTokenBySilentIframe,this.logger,this.performanceClient,c.correlationId)(c);throw f})})}return r.then(a=>{var c;return this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_SUCCESS,Y.Silent,a),(c=this.atsAsyncMeasurement)==null||c.end({success:!0,fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker,requestId:a.requestId}),a}).catch(a=>{var c;throw this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,Y.Silent,null,a),(c=this.atsAsyncMeasurement)==null||c.end({errorCode:a.errorCode,subErrorCode:a.subError,success:!1}),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibility)})}}function $w(o,e,t){const r=!(o instanceof Cn&&o.subError!==Gi),s=o.errorCode===Tn.INVALID_GRANT_ERROR||o.errorCode===hr,a=r&&s||o.errorCode===$i||o.errorCode===Ka,c=Fv.includes(t);return a&&c}const Gw=Object.freeze(Object.defineProperty({__proto__:null,StandardController:Ji},Symbol.toStringTag,{value:"Module"}));/*! @azure/msal-browser v3.10.0 2024-02-17 */class mc{static async createPublicClientApplication(e){const t=await lw(e);return new mc(e,t)}constructor(e,t){if(t)this.controller=t;else{const r=new Dr(e);this.controller=new Ji(r)}}async initialize(){return this.controller.initialize()}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e){return this.controller.addEventCallback(e)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v3.10.0 2024-02-17 */const zw={initialize:()=>Promise.reject(rt(ut)),acquireTokenPopup:()=>Promise.reject(rt(ut)),acquireTokenRedirect:()=>Promise.reject(rt(ut)),acquireTokenSilent:()=>Promise.reject(rt(ut)),acquireTokenByCode:()=>Promise.reject(rt(ut)),getAllAccounts:()=>[],getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(rt(ut)),loginPopup:()=>Promise.reject(rt(ut)),loginRedirect:()=>Promise.reject(rt(ut)),logout:()=>Promise.reject(rt(ut)),logoutRedirect:()=>Promise.reject(rt(ut)),logoutPopup:()=>Promise.reject(rt(ut)),ssoSilent:()=>Promise.reject(rt(ut)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw rt(ut)},getLogger:()=>{throw rt(ut)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw rt(ut)},hydrateCache:()=>Promise.reject(rt(ut)),clearCache:()=>Promise.reject(rt(ut))};/*! @azure/msal-browser v3.10.0 2024-02-17 */class qw{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Z.LOGIN_START:return lt.Login;case Z.SSO_SILENT_START:return lt.SsoSilent;case Z.ACQUIRE_TOKEN_START:if(e.interactionType===Y.Redirect||e.interactionType===Y.Popup)return lt.AcquireToken;break;case Z.HANDLE_REDIRECT_START:return lt.HandleRedirect;case Z.LOGOUT_START:return lt.Logout;case Z.SSO_SILENT_SUCCESS:case Z.SSO_SILENT_FAILURE:if(t&&t!==lt.SsoSilent)break;return lt.None;case Z.LOGOUT_END:if(t&&t!==lt.Logout)break;return lt.None;case Z.HANDLE_REDIRECT_END:if(t&&t!==lt.HandleRedirect)break;return lt.None;case Z.LOGIN_SUCCESS:case Z.LOGIN_FAILURE:case Z.ACQUIRE_TOKEN_SUCCESS:case Z.ACQUIRE_TOKEN_FAILURE:case Z.RESTORE_FROM_BFCACHE:if(e.interactionType===Y.Redirect||e.interactionType===Y.Popup){if(t&&t!==lt.Login&&t!==lt.AcquireToken)break;return lt.None}break}return null}}const ef={names:{signUpSignIn:"b2c_1a_signupsignin_c",forgotPassword:"b2c_1a_passwordreset_c",editProfile:"b2c_1a_profileedit_c"},authorities:{signUpSignIn:{authority:"https://authentication.buildingsmart.org/tfp/buildingsmartservices.onmicrosoft.com/b2c_1a_signupsignin_c"},forgotPassword:{authority:"https://authentication.buildingsmart.org/tfp/buildingsmartservices.onmicrosoft.com/b2c_1a_passwordreset_c"},editProfile:{authority:"https://authentication.buildingsmart.org/tfp/buildingsmartservices.onmicrosoft.com/b2c_1a_profileedit_c"}},authorityDomain:"authentication.buildingsmart.org"},Ww={auth:{clientId:"0fcd615b-f2b7-4514-9046-7b3e545ba341",authority:ef.authorities.signUpSignIn.authority,knownAuthorities:[ef.authorityDomain],redirectUri:"/react-bsdd-search/",postLogoutRedirectUri:"/react-bsdd-search/",navigateToLoginRequestUrl:!1},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(o,e,t)=>{if(!t)switch(o){case He.Error:console.error(e);return;case He.Info:console.info(e);return;case He.Verbose:console.debug(e);return;case He.Warning:console.warn(e);return;default:return}}}}};/*! @azure/msal-react v2.0.12 2024-02-17 */const Vw={instance:zw,inProgress:lt.None,accounts:[],logger:new fr({})},tf=Ee.createContext(Vw);tf.Consumer;/*! @azure/msal-react v2.0.12 2024-02-17 */function nf(o,e){if(o.length!==e.length)return!1;const t=[...e];return o.every(r=>{const s=t.shift();return!r||!s?!1:r.homeAccountId===s.homeAccountId&&r.localAccountId===s.localAccountId&&r.username===s.username})}/*! @azure/msal-react v2.0.12 2024-02-17 */const Yw="@azure/msal-react",rf="2.0.12";/*! @azure/msal-react v2.0.12 2024-02-17 */const Xi={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},jw=(o,e)=>{const{type:t,payload:r}=e;let s=o.inProgress;switch(t){case Xi.UNBLOCK_INPROGRESS:o.inProgress===lt.Startup&&(s=lt.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Xi.EVENT:const c=r.message,u=qw.getInteractionStatusFromEvent(c,o.inProgress);u&&(r.logger.info(`MsalProvider - ${c.eventType} results in setting inProgress from ${o.inProgress} to ${u}`),s=u);break;default:throw new Error(`Unknown action type: ${t}`)}const a=r.instance.getAllAccounts();return s!==o.inProgress&&!nf(a,o.accounts)?{...o,inProgress:s,accounts:a}:s!==o.inProgress?{...o,inProgress:s}:nf(a,o.accounts)?o:{...o,accounts:a}};function Qw({instance:o,children:e}){m.useEffect(()=>{o.initializeWrapperLibrary(Dv.React,rf)},[o]);const t=m.useMemo(()=>o.getLogger().clone(Yw,rf),[o]),[r,s]=m.useReducer(jw,void 0,()=>({inProgress:lt.Startup,accounts:o.getAllAccounts()}));m.useEffect(()=>{const c=o.addEventCallback(u=>{s({payload:{instance:o,logger:t,message:u},type:Xi.EVENT})});return t.verbose(`MsalProvider - Registered event callback with id: ${c}`),o.initialize().then(()=>{o.handleRedirectPromise().catch(()=>{}).finally(()=>{s({payload:{instance:o,logger:t},type:Xi.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{c&&(t.verbose(`MsalProvider - Removing event callback ${c}`),o.removeEventCallback(c))}},[o,t]);const a={instance:o,inProgress:r.inProgress,accounts:r.accounts,logger:t};return m.createElement(tf.Provider,{value:a},e)}function yc(o){return Object.keys(o)}function Jw(o){return o.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Cc(o){return`calc(${o} * var(--mantine-scale))`}function Xw(o,{shouldScale:e=!1}={}){function t(r){if(r===0||r==="0")return`0${o}`;if(typeof r=="number"){const s=`${r/16}${o}`;return e?Cc(s):s}if(typeof r=="string"){if(r.startsWith("calc(")||r.startsWith("var(")||r.startsWith("clamp("))return r;if(r.includes(" "))return r.split(" ").map(a=>t(a)).join(" ");if(r.includes(o))return e?Cc(r):r;const s=r.replace("px","");if(!Number.isNaN(Number(s))){const a=`${Number(s)/16}${o}`;return e?Cc(a):a}}return r}return t}const Re=Xw("rem",{shouldScale:!0});function vc(o){return Object.keys(o).reduce((e,t)=>(o[t]!==void 0&&(e[t]=o[t]),e),{})}function of(o){return typeof o=="number"?!0:typeof o=="string"?o.startsWith("calc(")||o.startsWith("var(")||o.includes(" ")&&o.trim()!==""?!0:/[0-9]/.test(o.trim().replace("-","")[0]):!1}function jo(o){return Array.isArray(o)||o===null?!1:typeof o=="object"?o.type!==m.Fragment:!1}function go(o){const e=m.createContext(null);return[({children:s,value:a})=>m.createElement(e.Provider,{value:a},s),()=>{const s=m.useContext(e);if(s===null)throw new Error(o);return s}]}function Zw(o=null){const e=m.createContext(o);return[({children:s,value:a})=>m.createElement(e.Provider,{value:a},s),()=>m.useContext(e)]}function sf(o,e){return t=>{if(typeof t!="string"||t.trim().length===0)throw new Error(e);return`${o}-${t}`}}function wc(o,e){let t=o;for(;(t=t.parentElement)&&!t.matches(e););return t}function eT(o,e,t){for(let r=o-1;r>=0;r-=1)if(!e[r].disabled)return r;if(t){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return o}function tT(o,e,t){for(let r=o+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(t){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return o}function nT(o,e,t){return wc(o,t)===wc(e,t)}function rT({parentSelector:o,siblingSelector:e,onKeyDown:t,loop:r=!0,activateOnFocus:s=!1,dir:a="rtl",orientation:c}){return u=>{var A;t==null||t(u);const d=Array.from(((A=wc(u.currentTarget,o))==null?void 0:A.querySelectorAll(e))||[]).filter(S=>nT(u.currentTarget,S,o)),f=d.findIndex(S=>u.currentTarget===S),g=tT(f,d,r),y=eT(f,d,r),v=a==="rtl"?y:g,T=a==="rtl"?g:y;switch(u.key){case"ArrowRight":{c==="horizontal"&&(u.stopPropagation(),u.preventDefault(),d[v].focus(),s&&d[v].click());break}case"ArrowLeft":{c==="horizontal"&&(u.stopPropagation(),u.preventDefault(),d[T].focus(),s&&d[T].click());break}case"ArrowUp":{c==="vertical"&&(u.stopPropagation(),u.preventDefault(),d[y].focus(),s&&d[y].click());break}case"ArrowDown":{c==="vertical"&&(u.stopPropagation(),u.preventDefault(),d[g].focus(),s&&d[g].click());break}case"Home":{u.stopPropagation(),u.preventDefault(),!d[0].disabled&&d[0].focus();break}case"End":{u.stopPropagation(),u.preventDefault();const S=d.length-1;!d[S].disabled&&d[S].focus();break}}}}const oT={app:100,modal:200,popover:300,overlay:400,max:9999};function iT(o){return oT[o]}const sT=()=>{};function aT(o,e={active:!0}){return typeof o!="function"||!e.active?e.onKeyDown||sT:t=>{var r;t.key==="Escape"&&(o(t),(r=e.onTrigger)==null||r.call(e))}}function gt(o,e="size",t=!0){if(o!==void 0)return of(o)?t?Re(o):o:`var(--${e}-${o})`}function af(o){return gt(o,"mantine-spacing")}function po(o){return o===void 0?"var(--mantine-radius-default)":gt(o,"mantine-radius")}function Ft(o){return gt(o,"mantine-font-size")}function cT(o){return gt(o,"mantine-line-height",!1)}function lT(o){if(o)return gt(o,"mantine-shadow",!1)}function cf(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Ur(o){const e=m.useRef(o);return m.useEffect(()=>{e.current=o}),m.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Zi(o,e){const t=Ur(o),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}const lf=["mousedown","touchstart"];function uT(o,e,t){const r=m.useRef();return m.useEffect(()=>{const s=a=>{const{target:c}=a??{};if(Array.isArray(t)){const u=(c==null?void 0:c.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(c)&&c.tagName!=="HTML";t.every(f=>!!f&&!a.composedPath().includes(f))&&!u&&o()}else r.current&&!r.current.contains(c)&&o()};return(e||lf).forEach(a=>document.addEventListener(a,s)),()=>{(e||lf).forEach(a=>document.removeEventListener(a,s))}},[r,o,t]),r}function dT(o,e){try{return o.addEventListener("change",e),()=>o.removeEventListener("change",e)}catch{return o.addListener(e),()=>o.removeListener(e)}}function hT(o,e){return typeof e=="boolean"?e:typeof window<"u"&&"matchMedia"in window?window.matchMedia(o).matches:!1}function fT(o,e,{getInitialValueInEffect:t}={getInitialValueInEffect:!0}){const[r,s]=m.useState(t?e:hT(o)),a=m.useRef();return m.useEffect(()=>{if("matchMedia"in window)return a.current=window.matchMedia(o),s(a.current.matches),dT(a.current,c=>s(c.matches))},[o]),r}function gT(o,e,t={leading:!1}){const[r,s]=m.useState(o),a=m.useRef(!1),c=m.useRef(null),u=m.useRef(!1),d=()=>window.clearTimeout(c.current);return m.useEffect(()=>{a.current&&(!u.current&&t.leading?(u.current=!0,s(o)):(d(),c.current=window.setTimeout(()=>{u.current=!1,s(o)},e)))},[o,t.leading,e]),m.useEffect(()=>(a.current=!0,d),[]),[r,d]}const Tc=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Hr(o,e){const t=m.useRef(!1);m.useEffect(()=>()=>{t.current=!1},[]),m.useEffect(()=>{if(t.current)return o();t.current=!0},e)}function pT({opened:o,shouldReturnFocus:e=!0}){const t=m.useRef(),r=()=>{var s;t.current&&"focus"in t.current&&typeof t.current.focus=="function"&&((s=t.current)==null||s.focus({preventScroll:!0}))};return Hr(()=>{let s=-1;const a=c=>{c.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",a),o?t.current=document.activeElement:e&&(s=window.setTimeout(r,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",a)}},[o,e]),r}function mT(o,e="body > :not(script)"){const t=cf(),r=Array.from(document.querySelectorAll(e)).map(s=>{var d;if((d=s==null?void 0:s.shadowRoot)!=null&&d.contains(o)||s.contains(o))return;const a=s.getAttribute("aria-hidden"),c=s.getAttribute("data-hidden"),u=s.getAttribute("data-focus-id");return s.setAttribute("data-focus-id",t),a===null||a==="false"?s.setAttribute("aria-hidden","true"):!c&&!u&&s.setAttribute("data-hidden",a),{node:s,ariaHidden:c||null}});return()=>{r.forEach(s=>{!s||t!==s.node.getAttribute("data-focus-id")||(s.ariaHidden===null?s.node.removeAttribute("aria-hidden"):s.node.setAttribute("aria-hidden",s.ariaHidden),s.node.removeAttribute("data-focus-id"),s.node.removeAttribute("data-hidden"))})}}const yT=/input|select|textarea|button|object/,uf="a, input, select, textarea, button, object, [tabindex]";function CT(o){return o.style.display==="none"}function vT(o){if(o.getAttribute("aria-hidden")||o.getAttribute("hidden")||o.getAttribute("type")==="hidden")return!1;let t=o;for(;t&&!(t===document.body||t.nodeType===11);){if(CT(t))return!1;t=t.parentNode}return!0}function df(o){let e=o.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function Ec(o){const e=o.nodeName.toLowerCase(),t=!Number.isNaN(df(o));return(yT.test(e)&&!o.disabled||o instanceof HTMLAnchorElement&&o.href||t)&&vT(o)}function hf(o){const e=df(o);return(Number.isNaN(e)||e>=0)&&Ec(o)}function wT(o){return Array.from(o.querySelectorAll(uf)).filter(hf)}function TT(o,e){const t=wT(o);if(!t.length){e.preventDefault();return}const r=t[e.shiftKey?0:t.length-1],s=o.getRootNode();let a=r===s.activeElement||o===s.activeElement;const c=s.activeElement;if(c.tagName==="INPUT"&&c.getAttribute("type")==="radio"&&(a=t.filter(g=>g.getAttribute("type")==="radio"&&g.getAttribute("name")===c.getAttribute("name")).includes(r)),!a)return;e.preventDefault();const d=t[e.shiftKey?t.length-1:0];d&&d.focus()}function ET(o=!0){const e=m.useRef(),t=m.useRef(null),r=a=>{let c=a.querySelector("[data-autofocus]");if(!c){const u=Array.from(a.querySelectorAll(uf));c=u.find(hf)||u.find(Ec)||null,!c&&Ec(a)&&(c=a)}c&&c.focus({preventScroll:!0})},s=m.useCallback(a=>{if(o){if(a===null){t.current&&(t.current(),t.current=null);return}t.current=mT(a),e.current!==a&&(a?(setTimeout(()=>{a.getRootNode()&&r(a)}),e.current=a):e.current=null)}},[o]);return m.useEffect(()=>{if(!o)return;e.current&&setTimeout(()=>r(e.current));const a=c=>{c.key==="Tab"&&e.current&&TT(e.current,c)};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a),t.current&&t.current()}},[o]),s}const AT=m.useId||(()=>{});function ST(){const o=AT();return o?`mantine-${o.replace(/:/g,"")}`:""}function Fr(o){const e=ST(),[t,r]=m.useState(e);return Tc(()=>{r(cf())},[]),typeof o=="string"?o:typeof window>"u"?e:t}function ff(o,e){typeof o=="function"?o(e):typeof o=="object"&&o!==null&&"current"in o&&(o.current=e)}function gf(...o){return e=>{o.forEach(t=>ff(t,e))}}function en(...o){return m.useCallback(gf(...o),o)}function Br({value:o,defaultValue:e,finalValue:t,onChange:r=()=>{}}){const[s,a]=m.useState(e!==void 0?e:t),c=(u,...d)=>{a(u),r==null||r(u,...d)};return o!==void 0?[o,r,!0]:[s,c,!1]}function pf(o,e){return fT("(prefers-reduced-motion: reduce)",o,e)}function L0(o){return o}function mf(o){var e,t,r="";if(typeof o=="string"||typeof o=="number")r+=o;else if(typeof o=="object")if(Array.isArray(o)){var s=o.length;for(e=0;e<s;e++)o[e]&&(t=mf(o[e]))&&(r&&(r+=" "),r+=t)}else for(t in o)o[t]&&(r&&(r+=" "),r+=t);return r}function Qn(){for(var o,e,t=0,r="",s=arguments.length;t<s;t++)(o=arguments[t])&&(e=mf(o))&&(r&&(r+=" "),r+=e);return r}const bT={};function _T(o){const e={};return o.forEach(t=>{Object.entries(t).forEach(([r,s])=>{e[r]?e[r]=Qn(e[r],s):e[r]=s})}),e}function es({theme:o,classNames:e,props:t,stylesCtx:r}){const a=(Array.isArray(e)?e:[e]).map(c=>typeof c=="function"?c(o,t,r):c||bT);return _T(a)}function ts({theme:o,styles:e,props:t,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((a,c)=>typeof c=="function"?{...a,...c(o,t,r)}:{...a,...c},{})}const IT=m.createContext(null);function ns(){const o=m.useContext(IT);if(!o)throw new Error("[@mantine/core] MantineProvider was not found in tree");return o}function RT(){return ns().classNamesPrefix}function kT(){return ns().getStyleNonce}function PT(){return ns().withStaticClasses}function OT(){return ns().headless}function NT(o){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(o)}function xT(o){let e=o.replace("#","");if(e.length===3){const c=e.split("");e=[c[0],c[0],c[1],c[1],c[2],c[2]].join("")}if(e.length===8){const c=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:c}}const t=parseInt(e,16),r=t>>16&255,s=t>>8&255,a=t&255;return{r,g:s,b:a,a:1}}function MT(o){const[e,t,r,s]=o.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:t,b:r,a:s||1}}function LT(o){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,t=o.match(e);if(!t)return{r:0,g:0,b:0,a:1};const r=parseInt(t[1],10),s=parseInt(t[2],10)/100,a=parseInt(t[3],10)/100,c=t[5]?parseFloat(t[5]):void 0,u=(1-Math.abs(2*a-1))*s,d=r/60,f=u*(1-Math.abs(d%2-1)),g=a-u/2;let y,v,T;return d>=0&&d<1?(y=u,v=f,T=0):d>=1&&d<2?(y=f,v=u,T=0):d>=2&&d<3?(y=0,v=u,T=f):d>=3&&d<4?(y=0,v=f,T=u):d>=4&&d<5?(y=f,v=0,T=u):(y=u,v=0,T=f),{r:Math.round((y+g)*255),g:Math.round((v+g)*255),b:Math.round((T+g)*255),a:c||1}}function DT(o){return NT(o)?xT(o):o.startsWith("rgb")?MT(o):o.startsWith("hsl")?LT(o):{r:0,g:0,b:0,a:1}}function UT(o,e){return typeof o.primaryShade=="number"?o.primaryShade:e==="dark"?o.primaryShade.dark:o.primaryShade.light}function Ac(o){return o<=.03928?o/12.92:((o+.055)/1.055)**2.4}function HT(o){const e=o.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function FT(o){if(o.startsWith("oklch("))return(HT(o)||0)/100;const{r:e,g:t,b:r}=DT(o),s=e/255,a=t/255,c=r/255,u=Ac(s),d=Ac(a),f=Ac(c);return .2126*u+.7152*d+.0722*f}function Qo(o,e=.179){return o.startsWith("var(")?!1:FT(o)>e}function Jo({color:o,theme:e,colorScheme:t}){if(typeof o!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof o}`);if(o==="bright")return{color:o,value:t==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Qo(t==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(o==="dimmed")return{color:o,value:t==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Qo(t==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(o==="white"||o==="black")return{color:o,value:o==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Qo(o==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${o}`};const[r,s]=o.split("."),a=s?Number(s):void 0,c=r in e.colors;if(c){const u=a!==void 0?e.colors[r][a]:e.colors[r][UT(e,t||"light")];return{color:r,value:u,shade:a,isThemeColor:c,isLight:Qo(u,e.luminanceThreshold),variable:s?`--mantine-color-${r}-${a}`:`--mantine-color-${r}-filled`}}return{color:o,value:o,isThemeColor:c,isLight:Qo(o,e.luminanceThreshold),shade:a,variable:void 0}}function mo(o,e){const t=Jo({color:o||e.primaryColor,theme:e});return t.variable?`var(${t.variable})`:o}function BT(o,e){const t={from:(o==null?void 0:o.from)||e.defaultGradient.from,to:(o==null?void 0:o.to)||e.defaultGradient.to,deg:(o==null?void 0:o.deg)||e.defaultGradient.deg||0},r=mo(t.from,e),s=mo(t.to,e);return`linear-gradient(${t.deg}deg, ${r} 0%, ${s} 100%)`}const KT=m.createContext(null);function yo(){const o=m.useContext(KT);if(!o)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return o}function $T({color:o,theme:e,autoContrast:t}){return(typeof t=="boolean"?t:e.autoContrast)&&Jo({color:o||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function yf({classNames:o,styles:e,props:t,stylesCtx:r}){const s=yo();return{resolvedClassNames:es({theme:s,classNames:o,props:t,stylesCtx:r||void 0}),resolvedStyles:ts({theme:s,styles:e,props:t,stylesCtx:r||void 0})}}const GT={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function zT({theme:o,options:e,unstyled:t}){return Qn((e==null?void 0:e.focusable)&&!t&&(o.focusClassName||GT[o.focusRing]),(e==null?void 0:e.active)&&!t&&o.activeClassName)}function qT({selector:o,stylesCtx:e,options:t,props:r,theme:s}){return es({theme:s,classNames:t==null?void 0:t.classNames,props:(t==null?void 0:t.props)||r,stylesCtx:e})[o]}function WT({selector:o,stylesCtx:e,theme:t,classNames:r,props:s}){return es({theme:t,classNames:r,props:s,stylesCtx:e})[o]}function VT({rootSelector:o,selector:e,className:t}){return o===e?t:void 0}function YT({selector:o,classes:e,unstyled:t}){return t?void 0:e[o]}function jT({themeName:o,classNamesPrefix:e,selector:t,withStaticClass:r}){return r===!1?[]:o.map(s=>`${e}-${s}-${t}`)}function QT({themeName:o,theme:e,selector:t,props:r,stylesCtx:s}){return o.map(a=>{var c,u;return(u=es({theme:e,classNames:(c=e.components[a])==null?void 0:c.classNames,props:r,stylesCtx:s}))==null?void 0:u[t]})}function JT({options:o,classes:e,selector:t,unstyled:r}){return o!=null&&o.variant&&!r?e[`${t}--${o.variant}`]:void 0}function XT({theme:o,options:e,themeName:t,selector:r,classNamesPrefix:s,classNames:a,classes:c,unstyled:u,className:d,rootSelector:f,props:g,stylesCtx:y,withStaticClasses:v,headless:T}){return Qn(zT({theme:o,options:e,unstyled:u||T}),QT({theme:o,themeName:t,selector:r,props:g,stylesCtx:y}),JT({options:e,classes:c,selector:r,unstyled:u}),WT({selector:r,stylesCtx:y,theme:o,classNames:a,props:g}),qT({selector:r,stylesCtx:y,options:e,props:g,theme:o}),VT({rootSelector:f,selector:r,className:d}),YT({selector:r,classes:c,unstyled:u||T}),v&&!T&&jT({themeName:t,classNamesPrefix:s,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function ZT({theme:o,themeName:e,props:t,stylesCtx:r,selector:s}){return e.map(a=>{var c;return ts({theme:o,styles:(c=o.components[a])==null?void 0:c.styles,props:t,stylesCtx:r})[s]}).reduce((a,c)=>({...a,...c}),{})}function Sc({style:o,theme:e}){return Array.isArray(o)?[...o].reduce((t,r)=>({...t,...Sc({style:r,theme:e})}),{}):typeof o=="function"?o(e):o??{}}function eE(o){return o.reduce((e,t)=>(t&&Object.keys(t).forEach(r=>{e[r]={...e[r],...vc(t[r])}}),e),{})}function tE({vars:o,varsResolver:e,theme:t,props:r,stylesCtx:s,selector:a,themeName:c,headless:u}){var d;return(d=eE([u?{}:e==null?void 0:e(t,r,s),...c.map(f=>{var g,y,v;return(v=(y=(g=t.components)==null?void 0:g[f])==null?void 0:y.vars)==null?void 0:v.call(y,t,r,s)}),o==null?void 0:o(t,r,s)]))==null?void 0:d[a]}function nE({theme:o,themeName:e,selector:t,options:r,props:s,stylesCtx:a,rootSelector:c,styles:u,style:d,vars:f,varsResolver:g,headless:y}){return{...ZT({theme:o,themeName:e,props:s,stylesCtx:a,selector:t}),...ts({theme:o,styles:u,props:s,stylesCtx:a})[t],...ts({theme:o,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||s,stylesCtx:a})[t],...tE({theme:o,props:s,stylesCtx:a,vars:f,varsResolver:g,selector:t,themeName:e,headless:y}),...c===t?Sc({style:d,theme:o}):null,...Sc({style:r==null?void 0:r.style,theme:o})}}function We({name:o,classes:e,props:t,stylesCtx:r,className:s,style:a,rootSelector:c="root",unstyled:u,classNames:d,styles:f,vars:g,varsResolver:y}){const v=yo(),T=RT(),A=PT(),S=OT(),b=(Array.isArray(o)?o:[o]).filter(N=>N);return(N,I)=>({className:XT({theme:v,options:I,themeName:b,selector:N,classNamesPrefix:T,classNames:d,classes:e,unstyled:u,className:s,rootSelector:c,props:t,stylesCtx:r,withStaticClasses:A,headless:S}),style:nE({theme:v,themeName:b,selector:N,options:I,props:t,stylesCtx:r,rootSelector:c,styles:f,style:a,vars:g,varsResolver:y,headless:S})})}function rE(o,e){return typeof o=="boolean"?o:e.autoContrast}function oe(o,e,t){var c;const r=yo(),s=(c=r.components[o])==null?void 0:c.defaultProps,a=typeof s=="function"?s(r):s;return{...e,...a,...vc(t)}}function Cf(o){return yc(o).reduce((e,t)=>o[t]!==void 0?`${e}${Jw(t)}:${o[t]};`:e,"").trim()}function oE({selector:o,styles:e,media:t}){const r=e?Cf(e):"",s=Array.isArray(t)?t.map(a=>`@media${a.query}{${o}{${Cf(a.styles)}}}`):[];return`${r?`${o}{${r}}`:""}${s.join("")}`.trim()}function iE({selector:o,styles:e,media:t}){const r=kT();return m.createElement("style",{"data-mantine-styles":"inline",nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:oE({selector:o,styles:e,media:t})}})}function rs(o){const{m:e,mx:t,my:r,mt:s,mb:a,ml:c,mr:u,me:d,ms:f,p:g,px:y,py:v,pt:T,pb:A,pl:S,pr:b,pe:N,ps:I,bg:k,c:O,opacity:x,ff:U,fz:z,fw:G,lts:X,ta:te,lh:de,fs:re,tt:Ce,td:ne,w:ge,miw:J,maw:j,h:ie,mih:ae,mah:ke,bgsz:Pe,bgp:pt,bgr:je,bga:Zn,pos:Ot,top:sn,left:Hn,bottom:$t,right:Gt,inset:er,display:Fn,flex:an,hiddenFrom:zt,visibleFrom:Ne,lightHidden:ot,darkHidden:wr,...Ve}=o;return{styleProps:vc({m:e,mx:t,my:r,mt:s,mb:a,ml:c,mr:u,me:d,ms:f,p:g,px:y,py:v,pt:T,pb:A,pl:S,pr:b,pe:N,ps:I,bg:k,c:O,opacity:x,ff:U,fz:z,fw:G,lts:X,ta:te,lh:de,fs:re,tt:Ce,td:ne,w:ge,miw:J,maw:j,h:ie,mih:ae,mah:ke,bgsz:Pe,bgp:pt,bgr:je,bga:Zn,pos:Ot,top:sn,left:Hn,bottom:$t,right:Gt,inset:er,display:Fn,flex:an,hiddenFrom:zt,visibleFrom:Ne,lightHidden:ot,darkHidden:wr}),rest:Ve}}const sE={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function vf(o,e){const t=Jo({color:o,theme:e});return t.color==="dimmed"?"var(--mantine-color-dimmed)":t.color==="bright"?"var(--mantine-color-bright)":t.variable?`var(${t.variable})`:t.color}function aE(o,e){const t=Jo({color:o,theme:e});return t.isThemeColor&&t.shade===void 0?`var(--mantine-color-${t.color}-text)`:vf(o,e)}const wf={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)"};function cE(o){return typeof o=="string"&&o in wf?wf[o]:o}function lE(o,e){return typeof o=="string"&&o in e.fontSizes?`var(--mantine-font-size-${o})`:typeof o=="number"||typeof o=="string"?Re(o):o}function uE(o){return o}function dE(o,e){return typeof o=="string"&&o in e.lineHeights?`var(--mantine-line-height-${o})`:o}function hE(o){return typeof o=="number"?Re(o):o}function fE(o,e){if(typeof o=="number")return Re(o);if(typeof o=="string"){const t=o.replace("-","");if(!(t in e.spacing))return Re(o);const r=`--mantine-spacing-${t}`;return o.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return o}const bc={color:vf,textColor:aE,fontSize:lE,spacing:fE,identity:uE,size:hE,lineHeight:dE,fontFamily:cE};function Tf(o){return o.replace("(min-width: ","").replace("em)","")}function gE({media:o,...e}){const r=Object.keys(o).sort((s,a)=>Number(Tf(s))-Number(Tf(a))).map(s=>({query:s,styles:o[s]}));return{...e,media:r}}function pE(o){if(typeof o!="object"||o===null)return!1;const e=Object.keys(o);return!(e.length===1&&e[0]==="base")}function mE(o){return typeof o=="object"&&o!==null?"base"in o?o.base:void 0:o}function yE(o){return typeof o=="object"&&o!==null?yc(o).filter(e=>e!=="base"):[]}function CE(o,e){return typeof o=="object"&&o!==null&&e in o?o[e]:o}function vE({styleProps:o,data:e,theme:t}){return gE(yc(o).reduce((r,s)=>{if(s==="hiddenFrom"||s==="visibleFrom")return r;const a=e[s],c=Array.isArray(a.property)?a.property:[a.property],u=mE(o[s]);if(!pE(o[s]))return c.forEach(f=>{r.inlineStyles[f]=bc[a.type](u,t)}),r;r.hasResponsiveStyles=!0;const d=yE(o[s]);return c.forEach(f=>{u&&(r.styles[f]=bc[a.type](u,t)),d.forEach(g=>{const y=`(min-width: ${t.breakpoints[g]})`;r.media[y]={...r.media[y],[f]:bc[a.type](CE(o[s],g),t)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function wE(){return`__m__-${m.useId().replace(/:/g,"")}`}function Ef(o,e){return Array.isArray(o)?[...o].reduce((t,r)=>({...t,...Ef(r,e)}),{}):typeof o=="function"?o(e):o??{}}function D0(o){return o}function Af(o){return o.startsWith("data-")?o:`data-${o}`}function TE(o){return Object.keys(o).reduce((e,t)=>{const r=o[t];return r===void 0||r===""||r===!1||r===null||(e[Af(t)]=o[t]),e},{})}function Sf(o){return o?typeof o=="string"?{[Af(o)]:!0}:Array.isArray(o)?[...o].reduce((e,t)=>({...e,...Sf(t)}),{}):TE(o):null}function _c(o,e){return Array.isArray(o)?[...o].reduce((t,r)=>({...t,..._c(r,e)}),{}):typeof o=="function"?o(e):o??{}}function EE({theme:o,style:e,vars:t,styleProps:r}){const s=_c(e,o),a=_c(t,o);return{...s,...a,...r}}const bf=m.forwardRef(({component:o,style:e,__vars:t,className:r,variant:s,mod:a,size:c,hiddenFrom:u,visibleFrom:d,lightHidden:f,darkHidden:g,renderRoot:y,...v},T)=>{const A=yo(),S=o||"div",{styleProps:b,rest:N}=rs(v),I=wE(),k=vE({styleProps:b,theme:A,data:sE}),O={ref:T,style:EE({theme:A,style:e,vars:t,styleProps:k.inlineStyles}),className:Qn(r,{[I]:k.hasResponsiveStyles,"mantine-light-hidden":f,"mantine-dark-hidden":g,[`mantine-hidden-from-${u}`]:u,[`mantine-visible-from-${d}`]:d}),"data-variant":s,"data-size":of(c)?void 0:c||void 0,...Sf(a),...N};return m.createElement(m.Fragment,null,k.hasResponsiveStyles&&m.createElement(iE,{selector:`.${I}`,styles:k.styles,media:k.media}),typeof y=="function"?y(O):m.createElement(S,{...O}))});bf.displayName="@mantine/core/Box";const he=bf;function _f(o){return o}function Se(o){const e=m.forwardRef(o);return e.extend=_f,e}function Co(o){const e=m.forwardRef(o);return e.extend=_f,e}const AE=m.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Ic(){return m.useContext(AE)}function SE(o){if(!o||typeof o=="string")return 0;const e=o/36;return Math.round((4+15*e**.25+e/5)*10)}function Rc(o){return o!=null&&o.current?o.current.scrollHeight:"auto"}const Xo=typeof window<"u"&&window.requestAnimationFrame;function bE({transitionDuration:o,transitionTimingFunction:e="ease",onTransitionEnd:t=()=>{},opened:r}){const s=m.useRef(null),a=0,c={display:"none",height:0,overflow:"hidden"},[u,d]=m.useState(r?{}:c),f=A=>{On.flushSync(()=>d(A))},g=A=>{f(S=>({...S,...A}))};function y(A){const S=o||SE(A);return{transition:`height ${S}ms ${e}, opacity ${S}ms ${e}`}}Hr(()=>{typeof Xo=="function"&&Xo(r?()=>{g({willChange:"height",display:"block",overflow:"hidden"}),Xo(()=>{const A=Rc(s);g({...y(A),height:A})})}:()=>{const A=Rc(s);g({...y(A),willChange:"height",height:A}),Xo(()=>g({height:a,overflow:"hidden"}))})},[r]);const v=A=>{if(!(A.target!==s.current||A.propertyName!=="height"))if(r){const S=Rc(s);S===u.height?f({}):g({height:S}),t()}else u.height===a&&(f(c),t())};function T({style:A={},refKey:S="ref",...b}={}){const N=b[S];return{"aria-hidden":!r,...b,[S]:gf(s,N),onTransitionEnd:v,style:{boxSizing:"border-box",...A,...u}}}return T}const _E={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},If=Se((o,e)=>{const{children:t,in:r,transitionDuration:s,transitionTimingFunction:a,style:c,onTransitionEnd:u,animateOpacity:d,...f}=oe("Collapse",_E,o),g=yo(),y=pf(),T=(g.respectReducedMotion?y:!1)?0:s,A=bE({opened:r,transitionDuration:T,transitionTimingFunction:a,onTransitionEnd:u});return T===0?r?m.createElement(he,{...f},t):null:m.createElement(he,{...A({style:{opacity:r||!d?1:0,transition:d?`opacity ${T}ms ${a}`:"none",...Ef(c,g)},ref:e,...f})},t)});If.displayName="@mantine/core/Collapse";const[IE,tn]=go("ScrollArea.Root component was not found in tree");function vo(o,e){const t=Ur(e);Tc(()=>{let r=0;if(o){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(o),()=>{window.cancelAnimationFrame(r),s.unobserve(o)}}},[o,t])}const RE=m.forwardRef((o,e)=>{const{style:t,...r}=o,s=tn(),[a,c]=m.useState(0),[u,d]=m.useState(0),f=!!(a&&u);return vo(s.scrollbarX,()=>{var y;const g=((y=s.scrollbarX)==null?void 0:y.offsetHeight)||0;s.onCornerHeightChange(g),d(g)}),vo(s.scrollbarY,()=>{var y;const g=((y=s.scrollbarY)==null?void 0:y.offsetWidth)||0;s.onCornerWidthChange(g),c(g)}),f?m.createElement("div",{...r,ref:e,style:{...t,width:a,height:u}}):null}),kE=m.forwardRef((o,e)=>{const t=tn(),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?m.createElement(RE,{...o,ref:e}):null}),PE={scrollHideDelay:1e3,type:"hover"},Rf=m.forwardRef((o,e)=>{const t=oe("ScrollAreaRoot",PE,o),{type:r,scrollHideDelay:s,scrollbars:a,...c}=t,[u,d]=m.useState(null),[f,g]=m.useState(null),[y,v]=m.useState(null),[T,A]=m.useState(null),[S,b]=m.useState(null),[N,I]=m.useState(0),[k,O]=m.useState(0),[x,U]=m.useState(!1),[z,G]=m.useState(!1),X=en(e,te=>d(te));return m.createElement(IE,{value:{type:r,scrollHideDelay:s,scrollArea:u,viewport:f,onViewportChange:g,content:y,onContentChange:v,scrollbarX:T,onScrollbarXChange:A,scrollbarXEnabled:x,onScrollbarXEnabledChange:U,scrollbarY:S,onScrollbarYChange:b,scrollbarYEnabled:z,onScrollbarYEnabledChange:G,onCornerWidthChange:I,onCornerHeightChange:O}},m.createElement(he,{...c,ref:X,__vars:{"--sa-corner-width":a!=="xy"?"0px":`${N}px`,"--sa-corner-height":a!=="xy"?"0px":`${k}px`}}))});Rf.displayName="@mantine/core/ScrollAreaRoot";function kf(o,e){const t=o/e;return Number.isNaN(t)?0:t}function os(o){const e=kf(o.viewport,o.content),t=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,r=(o.scrollbar.size-t)*e;return Math.max(r,18)}function Pf(o,e){return t=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(o[1]-o[0]);return e[0]+r*(t-o[0])}}function OE(o,[e,t]){return Math.min(t,Math.max(e,o))}function Of(o,e,t="ltr"){const r=os(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,c=e.content-e.viewport,u=a-r,d=t==="ltr"?[0,c]:[c*-1,0],f=OE(o,d);return Pf([0,c],[0,u])(f)}function NE(o,e,t,r="ltr"){const s=os(t),a=s/2,c=e||a,u=s-c,d=t.scrollbar.paddingStart+c,f=t.scrollbar.size-t.scrollbar.paddingEnd-u,g=t.content-t.viewport,y=r==="ltr"?[0,g]:[g*-1,0];return Pf([d,f],y)(o)}function Nf(o,e){return o>0&&o<e}function is(o){return o?parseInt(o,10):0}function Kr(o,e,{checkForDefaultPrevented:t=!0}={}){return r=>{o==null||o(r),(t===!1||!r.defaultPrevented)&&(e==null||e(r))}}const[xE,xf]=go("ScrollAreaScrollbar was not found in tree"),Mf=m.forwardRef((o,e)=>{const{sizes:t,hasThumb:r,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:f,onResize:g,...y}=o,v=tn(),[T,A]=m.useState(null),S=en(e,G=>A(G)),b=m.useRef(null),N=m.useRef(""),{viewport:I}=v,k=t.content-t.viewport,O=Ur(f),x=Ur(u),U=Zi(g,10),z=G=>{if(b.current){const X=G.clientX-b.current.left,te=G.clientY-b.current.top;d({x:X,y:te})}};return m.useEffect(()=>{const G=X=>{const te=X.target;(T==null?void 0:T.contains(te))&&O(X,k)};return document.addEventListener("wheel",G,{passive:!1}),()=>document.removeEventListener("wheel",G,{passive:!1})},[I,T,k,O]),m.useEffect(x,[t,x]),vo(T,U),vo(v.content,U),m.createElement(xE,{value:{scrollbar:T,hasThumb:r,onThumbChange:Ur(s),onThumbPointerUp:Ur(a),onThumbPositionChange:x,onThumbPointerDown:Ur(c)}},m.createElement("div",{...y,ref:S,style:{position:"absolute",...y.style},onPointerDown:Kr(o.onPointerDown,G=>{G.button===0&&(G.target.setPointerCapture(G.pointerId),b.current=T.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",z(G))}),onPointerMove:Kr(o.onPointerMove,z),onPointerUp:Kr(o.onPointerUp,G=>{const X=G.target;X.hasPointerCapture(G.pointerId)&&X.releasePointerCapture(G.pointerId),document.body.style.webkitUserSelect=N.current,b.current=null})}))}),ME=m.forwardRef((o,e)=>{const{sizes:t,onSizesChange:r,style:s,...a}=o,c=tn(),[u,d]=m.useState(),f=m.useRef(null),g=en(e,f,c.onScrollbarXChange);return m.useEffect(()=>{f.current&&d(getComputedStyle(f.current))},[f]),m.createElement(Mf,{"data-orientation":"horizontal",...a,ref:g,sizes:t,style:{...s,"--sa-thumb-width":`${os(t)}px`},onThumbPointerDown:y=>o.onThumbPointerDown(y.x),onDragScroll:y=>o.onDragScroll(y.x),onWheelScroll:(y,v)=>{if(c.viewport){const T=c.viewport.scrollLeft+y.deltaX;o.onWheelScroll(T),Nf(T,v)&&y.preventDefault()}},onResize:()=>{f.current&&c.viewport&&u&&r({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:is(u.paddingLeft),paddingEnd:is(u.paddingRight)}})}})}),LE=m.forwardRef((o,e)=>{const{sizes:t,onSizesChange:r,style:s,...a}=o,c=tn(),[u,d]=m.useState(),f=m.useRef(null),g=en(e,f,c.onScrollbarYChange);return m.useEffect(()=>{f.current&&d(getComputedStyle(f.current))},[f]),m.createElement(Mf,{...a,"data-orientation":"vertical",ref:g,sizes:t,style:{"--sa-thumb-height":`${os(t)}px`,...s},onThumbPointerDown:y=>o.onThumbPointerDown(y.y),onDragScroll:y=>o.onDragScroll(y.y),onWheelScroll:(y,v)=>{if(c.viewport){const T=c.viewport.scrollTop+y.deltaY;o.onWheelScroll(T),Nf(T,v)&&y.preventDefault()}},onResize:()=>{f.current&&c.viewport&&u&&r({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:is(u.paddingTop),paddingEnd:is(u.paddingBottom)}})}})}),kc=m.forwardRef((o,e)=>{const{orientation:t="vertical",...r}=o,{dir:s}=Ic(),a=tn(),c=m.useRef(null),u=m.useRef(0),[d,f]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),g=kf(d.viewport,d.content),y={...r,sizes:d,onSizesChange:f,hasThumb:g>0&&g<1,onThumbChange:T=>{c.current=T},onThumbPointerUp:()=>{u.current=0},onThumbPointerDown:T=>{u.current=T}},v=(T,A)=>NE(T,u.current,d,A);return t==="horizontal"?m.createElement(ME,{...y,ref:e,onThumbPositionChange:()=>{if(a.viewport&&c.current){const T=a.viewport.scrollLeft,A=Of(T,d,s);c.current.style.transform=`translate3d(${A}px, 0, 0)`}},onWheelScroll:T=>{a.viewport&&(a.viewport.scrollLeft=T)},onDragScroll:T=>{a.viewport&&(a.viewport.scrollLeft=v(T,s))}}):t==="vertical"?m.createElement(LE,{...y,ref:e,onThumbPositionChange:()=>{if(a.viewport&&c.current){const T=a.viewport.scrollTop,A=Of(T,d);c.current.style.transform=`translate3d(0, ${A}px, 0)`}},onWheelScroll:T=>{a.viewport&&(a.viewport.scrollTop=T)},onDragScroll:T=>{a.viewport&&(a.viewport.scrollTop=v(T))}}):null}),Lf=m.forwardRef((o,e)=>{const t=tn(),{forceMount:r,...s}=o,[a,c]=m.useState(!1),u=o.orientation==="horizontal",d=Zi(()=>{if(t.viewport){const f=t.viewport.offsetWidth<t.viewport.scrollWidth,g=t.viewport.offsetHeight<t.viewport.scrollHeight;c(u?f:g)}},10);return vo(t.viewport,d),vo(t.content,d),r||a?m.createElement(kc,{"data-state":a?"visible":"hidden",...s,ref:e}):null}),DE=m.forwardRef((o,e)=>{const{forceMount:t,...r}=o,s=tn(),[a,c]=m.useState(!1);return m.useEffect(()=>{const{scrollArea:u}=s;let d=0;if(u){const f=()=>{window.clearTimeout(d),c(!0)},g=()=>{d=window.setTimeout(()=>c(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",f),u.addEventListener("pointerleave",g),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",f),u.removeEventListener("pointerleave",g)}}},[s.scrollArea,s.scrollHideDelay]),t||a?m.createElement(Lf,{"data-state":a?"visible":"hidden",...r,ref:e}):null}),UE=m.forwardRef((o,e)=>{const{forceMount:t,...r}=o,s=tn(),a=o.orientation==="horizontal",[c,u]=m.useState("hidden"),d=Zi(()=>u("idle"),100);return m.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>u("hidden"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,s.scrollHideDelay]),m.useEffect(()=>{const{viewport:f}=s,g=a?"scrollLeft":"scrollTop";if(f){let y=f[g];const v=()=>{const T=f[g];y!==T&&(u("scrolling"),d()),y=T};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[s.viewport,a,d]),t||c!=="hidden"?m.createElement(kc,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Kr(o.onPointerEnter,()=>u("interacting")),onPointerLeave:Kr(o.onPointerLeave,()=>u("idle"))}):null}),Df=m.forwardRef((o,e)=>{const{forceMount:t,...r}=o,s=tn(),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:c}=s,u=o.orientation==="horizontal";return m.useEffect(()=>(u?a(!0):c(!0),()=>{u?a(!1):c(!1)}),[u,a,c]),s.type==="hover"?m.createElement(DE,{...r,ref:e,forceMount:t}):s.type==="scroll"?m.createElement(UE,{...r,ref:e,forceMount:t}):s.type==="auto"?m.createElement(Lf,{...r,ref:e,forceMount:t}):s.type==="always"?m.createElement(kc,{...r,ref:e}):null});function HE(o,e=()=>{}){let t={left:o.scrollLeft,top:o.scrollTop},r=0;return function s(){const a={left:o.scrollLeft,top:o.scrollTop},c=t.left!==a.left,u=t.top!==a.top;(c||u)&&e(),t=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)}const FE=m.forwardRef((o,e)=>{const{style:t,...r}=o,s=tn(),a=xf(),{onThumbPositionChange:c}=a,u=en(e,g=>a.onThumbChange(g)),d=m.useRef(),f=Zi(()=>{d.current&&(d.current(),d.current=void 0)},100);return m.useEffect(()=>{const{viewport:g}=s;if(g){const y=()=>{if(f(),!d.current){const v=HE(g,c);d.current=v,c()}};return c(),g.addEventListener("scroll",y),()=>g.removeEventListener("scroll",y)}},[s.viewport,f,c]),m.createElement("div",{"data-state":a.hasThumb?"visible":"hidden",...r,ref:u,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...t},onPointerDownCapture:Kr(o.onPointerDownCapture,g=>{const v=g.target.getBoundingClientRect(),T=g.clientX-v.left,A=g.clientY-v.top;a.onThumbPointerDown({x:T,y:A})}),onPointerUp:Kr(o.onPointerUp,a.onThumbPointerUp)})}),Uf=m.forwardRef((o,e)=>{const{forceMount:t,...r}=o,s=xf();return t||s.hasThumb?m.createElement(FE,{ref:e,...r}):null}),Hf=m.forwardRef(({children:o,style:e,...t},r)=>{const s=tn(),a=en(r,s.onViewportChange);return m.createElement(he,{...t,ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e}},m.createElement("div",{style:{minWidth:"100%",display:"table"},ref:s.onContentChange},o))});Hf.displayName="@mantine/core/ScrollAreaViewport";var Pc={root:"m-d57069b5",viewport:"m-c0783ff9",viewportInner:"m-f8f631dd",scrollbar:"m-c44ba933",thumb:"m-d8b5e363",corner:"m-21657268"};const Ff={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},BE=(o,{scrollbarSize:e})=>({root:{"--scrollarea-scrollbar-size":Re(e)}}),Zo=Se((o,e)=>{const t=oe("ScrollArea",Ff,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,scrollbarSize:d,vars:f,type:g,scrollHideDelay:y,viewportProps:v,viewportRef:T,onScrollPositionChange:A,children:S,offsetScrollbars:b,scrollbars:N,...I}=t,[k,O]=m.useState(!1),x=We({name:"ScrollArea",props:t,classes:Pc,className:s,style:a,classNames:r,styles:c,unstyled:u,vars:f,varsResolver:BE});return m.createElement(Rf,{type:g==="never"?"always":g,scrollHideDelay:y,ref:e,scrollbars:N,...x("root"),...I},m.createElement(Hf,{...v,...x("viewport",{style:v==null?void 0:v.style}),ref:T,"data-offset-scrollbars":b===!0?"xy":b||void 0,"data-scrollbars":N||void 0,onScroll:typeof A=="function"?({currentTarget:U})=>A({x:U.scrollLeft,y:U.scrollTop}):void 0},S),(N==="xy"||N==="x")&&m.createElement(Df,{...x("scrollbar"),orientation:"horizontal","data-hidden":g==="never"||void 0,forceMount:!0,onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1)},m.createElement(Uf,{...x("thumb")})),(N==="xy"||N==="y")&&m.createElement(Df,{...x("scrollbar"),orientation:"vertical","data-hidden":g==="never"||void 0,forceMount:!0,onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1)},m.createElement(Uf,{...x("thumb")})),m.createElement(kE,{...x("corner"),"data-hovered":k||void 0,"data-hidden":g==="never"||void 0}))});Zo.displayName="@mantine/core/ScrollArea";const Oc=Se((o,e)=>{const{children:t,classNames:r,styles:s,scrollbarSize:a,scrollHideDelay:c,type:u,dir:d,offsetScrollbars:f,viewportRef:g,onScrollPositionChange:y,unstyled:v,variant:T,viewportProps:A,scrollbars:S,style:b,vars:N,...I}=oe("ScrollAreaAutosize",Ff,o);return m.createElement(he,{...I,ref:e,style:[{display:"flex",overflow:"auto"},b]},m.createElement(he,{style:{display:"flex",flexDirection:"column",flex:1}},m.createElement(Zo,{classNames:r,styles:s,scrollHideDelay:c,scrollbarSize:a,type:u,dir:d,offsetScrollbars:f,viewportRef:g,onScrollPositionChange:y,unstyled:v,variant:T,viewportProps:A,vars:N,scrollbars:S},t)))});Zo.classes=Pc,Oc.displayName="@mantine/core/ScrollAreaAutosize",Oc.classes=Pc,Zo.Autosize=Oc;var Bf={root:"m-87cf2631"};const KE={__staticSelector:"UnstyledButton"},ei=Co((o,e)=>{const t=oe("UnstyledButton",KE,o),{className:r,component:s="button",__staticSelector:a,unstyled:c,classNames:u,styles:d,style:f,...g}=t,y=We({name:a,props:t,classes:Bf,className:r,style:f,classNames:u,styles:d,unstyled:c});return m.createElement(he,{...y("root",{focusable:!0}),component:s,ref:e,type:s==="button"?"button":void 0,...g})});ei.classes=Bf,ei.displayName="@mantine/core/UnstyledButton";var Kf={root:"m-515a97f8"};const $E={},Nc=Se((o,e)=>{const t=oe("VisuallyHidden",$E,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,...f}=t,g=We({name:"VisuallyHidden",classes:Kf,props:t,className:s,style:a,classNames:r,styles:c,unstyled:u});return m.createElement(he,{component:"span",ref:e,...g("root"),...f})});Nc.classes=Kf,Nc.displayName="@mantine/core/VisuallyHidden";function mr(o){return $f(o)?(o.nodeName||"").toLowerCase():"#document"}function Bt(o){var e;return(o==null||(e=o.ownerDocument)==null?void 0:e.defaultView)||window}function Jn(o){var e;return(e=($f(o)?o.ownerDocument:o.document)||window.document)==null?void 0:e.documentElement}function $f(o){return o instanceof Node||o instanceof Bt(o).Node}function Kt(o){return o instanceof Element||o instanceof Bt(o).Element}function Un(o){return o instanceof HTMLElement||o instanceof Bt(o).HTMLElement}function Gf(o){return typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof Bt(o).ShadowRoot}function ti(o){const{overflow:e,overflowX:t,overflowY:r,display:s}=nn(o);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function GE(o){return["table","td","th"].includes(mr(o))}function xc(o){const e=Mc(),t=nn(o);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function zE(o){let e=wo(o);for(;Un(e)&&!ss(e);){if(xc(e))return e;e=wo(e)}return null}function Mc(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ss(o){return["html","body","#document"].includes(mr(o))}function nn(o){return Bt(o).getComputedStyle(o)}function as(o){return Kt(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.pageXOffset,scrollTop:o.pageYOffset}}function wo(o){if(mr(o)==="html")return o;const e=o.assignedSlot||o.parentNode||Gf(o)&&o.host||Jn(o);return Gf(e)?e.host:e}function zf(o){const e=wo(o);return ss(e)?o.ownerDocument?o.ownerDocument.body:o.body:Un(e)&&ti(e)?e:zf(e)}function ni(o,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=zf(o),a=s===((r=o.ownerDocument)==null?void 0:r.body),c=Bt(s);return a?e.concat(c,c.visualViewport||[],ti(s)?s:[],c.frameElement&&t?ni(c.frameElement):[]):e.concat(s,ni(s,[],t))}const En=Math.min,Et=Math.max,cs=Math.round,ls=Math.floor,yr=o=>({x:o,y:o}),qE={left:"right",right:"left",bottom:"top",top:"bottom"},WE={start:"end",end:"start"};function Lc(o,e,t){return Et(o,En(e,t))}function Xn(o,e){return typeof o=="function"?o(e):o}function An(o){return o.split("-")[0]}function To(o){return o.split("-")[1]}function Dc(o){return o==="x"?"y":"x"}function Uc(o){return o==="y"?"height":"width"}function $r(o){return["top","bottom"].includes(An(o))?"y":"x"}function Hc(o){return Dc($r(o))}function VE(o,e,t){t===void 0&&(t=!1);const r=To(o),s=Hc(o),a=Uc(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=us(c)),[c,us(c)]}function YE(o){const e=us(o);return[Fc(o),e,Fc(e)]}function Fc(o){return o.replace(/start|end/g,e=>WE[e])}function jE(o,e,t){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(o){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function QE(o,e,t,r){const s=To(o);let a=jE(An(o),t==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(Fc)))),a}function us(o){return o.replace(/left|right|bottom|top/g,e=>qE[e])}function JE(o){return{top:0,right:0,bottom:0,left:0,...o}}function Bc(o){return typeof o!="number"?JE(o):{top:o,right:o,bottom:o,left:o}}function Eo(o){return{...o,top:o.y,left:o.x,right:o.x+o.width,bottom:o.y+o.height}}function qf(o,e,t){let{reference:r,floating:s}=o;const a=$r(e),c=Hc(e),u=Uc(c),d=An(e),f=a==="y",g=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let T;switch(d){case"top":T={x:g,y:r.y-s.height};break;case"bottom":T={x:g,y:r.y+r.height};break;case"right":T={x:r.x+r.width,y};break;case"left":T={x:r.x-s.width,y};break;default:T={x:r.x,y:r.y}}switch(To(e)){case"start":T[c]-=v*(t&&f?-1:1);break;case"end":T[c]+=v*(t&&f?-1:1);break}return T}const XE=async(o,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=t,u=a.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:o,floating:e,strategy:s}),{x:g,y}=qf(f,r,d),v=r,T={},A=0;for(let S=0;S<u.length;S++){const{name:b,fn:N}=u[S],{x:I,y:k,data:O,reset:x}=await N({x:g,y,initialPlacement:r,placement:v,strategy:s,middlewareData:T,rects:f,platform:c,elements:{reference:o,floating:e}});g=I??g,y=k??y,T={...T,[b]:{...T[b],...O}},x&&A<=50&&(A++,typeof x=="object"&&(x.placement&&(v=x.placement),x.rects&&(f=x.rects===!0?await c.getElementRects({reference:o,floating:e,strategy:s}):x.rects),{x:g,y}=qf(f,v,d)),S=-1)}return{x:g,y,placement:v,strategy:s,middlewareData:T}};async function Kc(o,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:d}=o,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:v=!1,padding:T=0}=Xn(e,o),A=Bc(T),b=u[v?y==="floating"?"reference":"floating":y],N=Eo(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(b)))==null||t?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:g,strategy:d})),I=y==="floating"?{...c.floating,x:r,y:s}:c.reference,k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),O=await(a.isElement==null?void 0:a.isElement(k))?await(a.getScale==null?void 0:a.getScale(k))||{x:1,y:1}:{x:1,y:1},x=Eo(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:k,strategy:d}):I);return{top:(N.top-x.top+A.top)/O.y,bottom:(x.bottom-N.bottom+A.bottom)/O.y,left:(N.left-x.left+A.left)/O.x,right:(x.right-N.right+A.right)/O.x}}const ZE=o=>({name:"arrow",options:o,async fn(e){const{x:t,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:d}=e,{element:f,padding:g=0}=Xn(o,e)||{};if(f==null)return{};const y=Bc(g),v={x:t,y:r},T=Hc(s),A=Uc(T),S=await c.getDimensions(f),b=T==="y",N=b?"top":"left",I=b?"bottom":"right",k=b?"clientHeight":"clientWidth",O=a.reference[A]+a.reference[T]-v[T]-a.floating[A],x=v[T]-a.reference[T],U=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let z=U?U[k]:0;(!z||!await(c.isElement==null?void 0:c.isElement(U)))&&(z=u.floating[k]||a.floating[A]);const G=O/2-x/2,X=z/2-S[A]/2-1,te=En(y[N],X),de=En(y[I],X),re=te,Ce=z-S[A]-de,ne=z/2-S[A]/2+G,ge=Lc(re,ne,Ce),J=!d.arrow&&To(s)!=null&&ne!==ge&&a.reference[A]/2-(ne<re?te:de)-S[A]/2<0,j=J?ne<re?ne-re:ne-Ce:0;return{[T]:v[T]+j,data:{[T]:ge,centerOffset:ne-ge-j,...J&&{alignmentOffset:j}},reset:J}}}),eA=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(e){var t,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:d,elements:f}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:S=!0,...b}=Xn(o,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const N=An(s),I=An(u)===u,k=await(d.isRTL==null?void 0:d.isRTL(f.floating)),O=v||(I||!S?[us(u)]:YE(u));!v&&A!=="none"&&O.push(...QE(u,S,A,k));const x=[u,...O],U=await Kc(e,b),z=[];let G=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&z.push(U[N]),y){const re=VE(s,c,k);z.push(U[re[0]],U[re[1]])}if(G=[...G,{placement:s,overflows:z}],!z.every(re=>re<=0)){var X,te;const re=(((X=a.flip)==null?void 0:X.index)||0)+1,Ce=x[re];if(Ce)return{data:{index:re,overflows:G},reset:{placement:Ce}};let ne=(te=G.filter(ge=>ge.overflows[0]<=0).sort((ge,J)=>ge.overflows[1]-J.overflows[1])[0])==null?void 0:te.placement;if(!ne)switch(T){case"bestFit":{var de;const ge=(de=G.map(J=>[J.placement,J.overflows.filter(j=>j>0).reduce((j,ie)=>j+ie,0)]).sort((J,j)=>J[1]-j[1])[0])==null?void 0:de[0];ge&&(ne=ge);break}case"initialPlacement":ne=u;break}if(s!==ne)return{reset:{placement:ne}}}return{}}}};function Wf(o){const e=En(...o.map(a=>a.left)),t=En(...o.map(a=>a.top)),r=Et(...o.map(a=>a.right)),s=Et(...o.map(a=>a.bottom));return{x:e,y:t,width:r-e,height:s-t}}function tA(o){const e=o.slice().sort((s,a)=>s.y-a.y),t=[];let r=null;for(let s=0;s<e.length;s++){const a=e[s];!r||a.y-r.y>r.height/2?t.push([a]):t[t.length-1].push(a),r=a}return t.map(s=>Eo(Wf(s)))}const nA=function(o){return o===void 0&&(o={}),{name:"inline",options:o,async fn(e){const{placement:t,elements:r,rects:s,platform:a,strategy:c}=e,{padding:u=2,x:d,y:f}=Xn(o,e),g=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),y=tA(g),v=Eo(Wf(g)),T=Bc(u);function A(){if(y.length===2&&y[0].left>y[1].right&&d!=null&&f!=null)return y.find(b=>d>b.left-T.left&&d<b.right+T.right&&f>b.top-T.top&&f<b.bottom+T.bottom)||v;if(y.length>=2){if($r(t)==="y"){const te=y[0],de=y[y.length-1],re=An(t)==="top",Ce=te.top,ne=de.bottom,ge=re?te.left:de.left,J=re?te.right:de.right,j=J-ge,ie=ne-Ce;return{top:Ce,bottom:ne,left:ge,right:J,width:j,height:ie,x:ge,y:Ce}}const b=An(t)==="left",N=Et(...y.map(te=>te.right)),I=En(...y.map(te=>te.left)),k=y.filter(te=>b?te.left===I:te.right===N),O=k[0].top,x=k[k.length-1].bottom,U=I,z=N,G=z-U,X=x-O;return{top:O,bottom:x,left:U,right:z,width:G,height:X,x:U,y:O}}return v}const S=await a.getElementRects({reference:{getBoundingClientRect:A},floating:r.floating,strategy:c});return s.reference.x!==S.reference.x||s.reference.y!==S.reference.y||s.reference.width!==S.reference.width||s.reference.height!==S.reference.height?{reset:{rects:S}}:{}}}};async function rA(o,e){const{placement:t,platform:r,elements:s}=o,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=An(t),u=To(t),d=$r(t)==="y",f=["left","top"].includes(c)?-1:1,g=a&&d?-1:1,y=Xn(e,o);let{mainAxis:v,crossAxis:T,alignmentAxis:A}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return u&&typeof A=="number"&&(T=u==="end"?A*-1:A),d?{x:T*g,y:v*f}:{x:v*f,y:T*g}}const oA=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(e){var t,r;const{x:s,y:a,placement:c,middlewareData:u}=e,d=await rA(e,o);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:a+d.y,data:{...d,placement:c}}}}},iA=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:b=>{let{x:N,y:I}=b;return{x:N,y:I}}},...d}=Xn(o,e),f={x:t,y:r},g=await Kc(e,d),y=$r(An(s)),v=Dc(y);let T=f[v],A=f[y];if(a){const b=v==="y"?"top":"left",N=v==="y"?"bottom":"right",I=T+g[b],k=T-g[N];T=Lc(I,T,k)}if(c){const b=y==="y"?"top":"left",N=y==="y"?"bottom":"right",I=A+g[b],k=A-g[N];A=Lc(I,A,k)}const S=u.fn({...e,[v]:T,[y]:A});return{...S,data:{x:S.x-t,y:S.y-r}}}}},sA=function(o){return o===void 0&&(o={}),{options:o,fn(e){const{x:t,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:d=!0,crossAxis:f=!0}=Xn(o,e),g={x:t,y:r},y=$r(s),v=Dc(y);let T=g[v],A=g[y];const S=Xn(u,e),b=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(d){const k=v==="y"?"height":"width",O=a.reference[v]-a.floating[k]+b.mainAxis,x=a.reference[v]+a.reference[k]-b.mainAxis;T<O?T=O:T>x&&(T=x)}if(f){var N,I;const k=v==="y"?"width":"height",O=["top","left"].includes(An(s)),x=a.reference[y]-a.floating[k]+(O&&((N=c.offset)==null?void 0:N[y])||0)+(O?0:b.crossAxis),U=a.reference[y]+a.reference[k]+(O?0:((I=c.offset)==null?void 0:I[y])||0)-(O?b.crossAxis:0);A<x?A=x:A>U&&(A=U)}return{[v]:T,[y]:A}}}},aA=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(e){const{placement:t,rects:r,platform:s,elements:a}=e,{apply:c=()=>{},...u}=Xn(o,e),d=await Kc(e,u),f=An(t),g=To(t),y=$r(t)==="y",{width:v,height:T}=r.floating;let A,S;f==="top"||f==="bottom"?(A=f,S=g===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(S=f,A=g==="end"?"top":"bottom");const b=T-d[A],N=v-d[S],I=!e.middlewareData.shift;let k=b,O=N;if(y){const U=v-d.left-d.right;O=g||I?En(N,U):U}else{const U=T-d.top-d.bottom;k=g||I?En(b,U):U}if(I&&!g){const U=Et(d.left,0),z=Et(d.right,0),G=Et(d.top,0),X=Et(d.bottom,0);y?O=v-2*(U!==0||z!==0?U+z:Et(d.left,d.right)):k=T-2*(G!==0||X!==0?G+X:Et(d.top,d.bottom))}await c({...e,availableWidth:O,availableHeight:k});const x=await s.getDimensions(a.floating);return v!==x.width||T!==x.height?{reset:{rects:!0}}:{}}}};function Vf(o){const e=nn(o);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Un(o),a=s?o.offsetWidth:t,c=s?o.offsetHeight:r,u=cs(t)!==a||cs(r)!==c;return u&&(t=a,r=c),{width:t,height:r,$:u}}function $c(o){return Kt(o)?o:o.contextElement}function Ao(o){const e=$c(o);if(!Un(e))return yr(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=Vf(e);let c=(a?cs(t.width):t.width)/r,u=(a?cs(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const cA=yr(0);function Yf(o){const e=Bt(o);return!Mc()||!e.visualViewport?cA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lA(o,e,t){return e===void 0&&(e=!1),!t||e&&t!==Bt(o)?!1:e}function Gr(o,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=o.getBoundingClientRect(),a=$c(o);let c=yr(1);e&&(r?Kt(r)&&(c=Ao(r)):c=Ao(o));const u=lA(a,t,r)?Yf(a):yr(0);let d=(s.left+u.x)/c.x,f=(s.top+u.y)/c.y,g=s.width/c.x,y=s.height/c.y;if(a){const v=Bt(a),T=r&&Kt(r)?Bt(r):r;let A=v,S=A.frameElement;for(;S&&r&&T!==A;){const b=Ao(S),N=S.getBoundingClientRect(),I=nn(S),k=N.left+(S.clientLeft+parseFloat(I.paddingLeft))*b.x,O=N.top+(S.clientTop+parseFloat(I.paddingTop))*b.y;d*=b.x,f*=b.y,g*=b.x,y*=b.y,d+=k,f+=O,A=Bt(S),S=A.frameElement}}return Eo({width:g,height:y,x:d,y:f})}const uA=[":popover-open",":modal"];function jf(o){return uA.some(e=>{try{return o.matches(e)}catch{return!1}})}function dA(o){let{elements:e,rect:t,offsetParent:r,strategy:s}=o;const a=s==="fixed",c=Jn(r),u=e?jf(e.floating):!1;if(r===c||u&&a)return t;let d={scrollLeft:0,scrollTop:0},f=yr(1);const g=yr(0),y=Un(r);if((y||!y&&!a)&&((mr(r)!=="body"||ti(c))&&(d=as(r)),Un(r))){const v=Gr(r);f=Ao(r),g.x=v.x+r.clientLeft,g.y=v.y+r.clientTop}return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-d.scrollLeft*f.x+g.x,y:t.y*f.y-d.scrollTop*f.y+g.y}}function hA(o){return Array.from(o.getClientRects())}function Qf(o){return Gr(Jn(o)).left+as(o).scrollLeft}function fA(o){const e=Jn(o),t=as(o),r=o.ownerDocument.body,s=Et(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Et(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+Qf(o);const u=-t.scrollTop;return nn(r).direction==="rtl"&&(c+=Et(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function gA(o,e){const t=Bt(o),r=Jn(o),s=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,d=0;if(s){a=s.width,c=s.height;const f=Mc();(!f||f&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}return{width:a,height:c,x:u,y:d}}function pA(o,e){const t=Gr(o,!0,e==="fixed"),r=t.top+o.clientTop,s=t.left+o.clientLeft,a=Un(o)?Ao(o):yr(1),c=o.clientWidth*a.x,u=o.clientHeight*a.y,d=s*a.x,f=r*a.y;return{width:c,height:u,x:d,y:f}}function Jf(o,e,t){let r;if(e==="viewport")r=gA(o,t);else if(e==="document")r=fA(Jn(o));else if(Kt(e))r=pA(e,t);else{const s=Yf(o);r={...e,x:e.x-s.x,y:e.y-s.y}}return Eo(r)}function Xf(o,e){const t=wo(o);return t===e||!Kt(t)||ss(t)?!1:nn(t).position==="fixed"||Xf(t,e)}function mA(o,e){const t=e.get(o);if(t)return t;let r=ni(o,[],!1).filter(u=>Kt(u)&&mr(u)!=="body"),s=null;const a=nn(o).position==="fixed";let c=a?wo(o):o;for(;Kt(c)&&!ss(c);){const u=nn(c),d=xc(c);!d&&u.position==="fixed"&&(s=null),(a?!d&&!s:!d&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ti(c)&&!d&&Xf(o,c))?r=r.filter(g=>g!==c):s=u,c=wo(c)}return e.set(o,r),r}function yA(o){let{element:e,boundary:t,rootBoundary:r,strategy:s}=o;const c=[...t==="clippingAncestors"?mA(e,this._c):[].concat(t),r],u=c[0],d=c.reduce((f,g)=>{const y=Jf(e,g,s);return f.top=Et(y.top,f.top),f.right=En(y.right,f.right),f.bottom=En(y.bottom,f.bottom),f.left=Et(y.left,f.left),f},Jf(e,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function CA(o){const{width:e,height:t}=Vf(o);return{width:e,height:t}}function vA(o,e,t){const r=Un(e),s=Jn(e),a=t==="fixed",c=Gr(o,!0,a,e);let u={scrollLeft:0,scrollTop:0};const d=yr(0);if(r||!r&&!a)if((mr(e)!=="body"||ti(s))&&(u=as(e)),r){const y=Gr(e,!0,a,e);d.x=y.x+e.clientLeft,d.y=y.y+e.clientTop}else s&&(d.x=Qf(s));const f=c.left+u.scrollLeft-d.x,g=c.top+u.scrollTop-d.y;return{x:f,y:g,width:c.width,height:c.height}}function Zf(o,e){return!Un(o)||nn(o).position==="fixed"?null:e?e(o):o.offsetParent}function eg(o,e){const t=Bt(o);if(!Un(o)||jf(o))return t;let r=Zf(o,e);for(;r&&GE(r)&&nn(r).position==="static";)r=Zf(r,e);return r&&(mr(r)==="html"||mr(r)==="body"&&nn(r).position==="static"&&!xc(r))?t:r||zE(o)||t}const wA=async function(o){const e=this.getOffsetParent||eg,t=this.getDimensions;return{reference:vA(o.reference,await e(o.floating),o.strategy),floating:{x:0,y:0,...await t(o.floating)}}};function TA(o){return nn(o).direction==="rtl"}const EA={convertOffsetParentRelativeRectToViewportRelativeRect:dA,getDocumentElement:Jn,getClippingRect:yA,getOffsetParent:eg,getElementRects:wA,getClientRects:hA,getDimensions:CA,getScale:Ao,isElement:Kt,isRTL:TA};function AA(o,e){let t=null,r;const s=Jn(o);function a(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const{left:f,top:g,width:y,height:v}=o.getBoundingClientRect();if(u||e(),!y||!v)return;const T=ls(g),A=ls(s.clientWidth-(f+y)),S=ls(s.clientHeight-(g+v)),b=ls(f),I={rootMargin:-T+"px "+-A+"px "+-S+"px "+-b+"px",threshold:Et(0,En(1,d))||1};let k=!0;function O(x){const U=x[0].intersectionRatio;if(U!==d){if(!k)return c();U?c(!1,U):r=setTimeout(()=>{c(!1,1e-7)},100)}k=!1}try{t=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(O,I)}t.observe(o)}return c(!0),a}function SA(o,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=$c(o),g=s||a?[...f?ni(f):[],...ni(e)]:[];g.forEach(N=>{s&&N.addEventListener("scroll",t,{passive:!0}),a&&N.addEventListener("resize",t)});const y=f&&u?AA(f,t):null;let v=-1,T=null;c&&(T=new ResizeObserver(N=>{let[I]=N;I&&I.target===f&&T&&(T.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var k;(k=T)==null||k.observe(e)})),t()}),f&&!d&&T.observe(f),T.observe(e));let A,S=d?Gr(o):null;d&&b();function b(){const N=Gr(o);S&&(N.x!==S.x||N.y!==S.y||N.width!==S.width||N.height!==S.height)&&t(),S=N,A=requestAnimationFrame(b)}return t(),()=>{var N;g.forEach(I=>{s&&I.removeEventListener("scroll",t),a&&I.removeEventListener("resize",t)}),y==null||y(),(N=T)==null||N.disconnect(),T=null,d&&cancelAnimationFrame(A)}}const bA=iA,_A=eA,IA=aA,tg=ZE,RA=nA,kA=sA,PA=(o,e,t)=>{const r=new Map,s={platform:EA,...t},a={...s.platform,_c:r};return XE(o,e,{...s,platform:a})},OA=o=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:o,fn(t){const{element:r,padding:s}=typeof o=="function"?o(t):o;return r&&e(r)?r.current!=null?tg({element:r.current,padding:s}).fn(t):{}:r?tg({element:r,padding:s}).fn(t):{}}}};var ds=typeof document<"u"?m.useLayoutEffect:m.useEffect;function hs(o,e){if(o===e)return!0;if(typeof o!=typeof e)return!1;if(typeof o=="function"&&o.toString()===e.toString())return!0;let t,r,s;if(o&&e&&typeof o=="object"){if(Array.isArray(o)){if(t=o.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!hs(o[r],e[r]))return!1;return!0}if(s=Object.keys(o),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const a=s[r];if(!(a==="_owner"&&o.$$typeof)&&!hs(o[a],e[a]))return!1}return!0}return o!==o&&e!==e}function ng(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function rg(o,e){const t=ng(o);return Math.round(e*t)/t}function og(o){const e=Ee.useRef(o);return ds(()=>{e.current=o}),e}function NA(o){o===void 0&&(o={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:d,open:f}=o,[g,y]=Ee.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,T]=Ee.useState(r);hs(v,r)||T(r);const[A,S]=Ee.useState(null),[b,N]=Ee.useState(null),I=Ee.useCallback(j=>{j!==U.current&&(U.current=j,S(j))},[]),k=Ee.useCallback(j=>{j!==z.current&&(z.current=j,N(j))},[]),O=a||A,x=c||b,U=Ee.useRef(null),z=Ee.useRef(null),G=Ee.useRef(g),X=d!=null,te=og(d),de=og(s),re=Ee.useCallback(()=>{if(!U.current||!z.current)return;const j={placement:e,strategy:t,middleware:v};de.current&&(j.platform=de.current),PA(U.current,z.current,j).then(ie=>{const ae={...ie,isPositioned:!0};Ce.current&&!hs(G.current,ae)&&(G.current=ae,Ny.flushSync(()=>{y(ae)}))})},[v,e,t,de]);ds(()=>{f===!1&&G.current.isPositioned&&(G.current.isPositioned=!1,y(j=>({...j,isPositioned:!1})))},[f]);const Ce=Ee.useRef(!1);ds(()=>(Ce.current=!0,()=>{Ce.current=!1}),[]),ds(()=>{if(O&&(U.current=O),x&&(z.current=x),O&&x){if(te.current)return te.current(O,x,re);re()}},[O,x,re,te,X]);const ne=Ee.useMemo(()=>({reference:U,floating:z,setReference:I,setFloating:k}),[I,k]),ge=Ee.useMemo(()=>({reference:O,floating:x}),[O,x]),J=Ee.useMemo(()=>{const j={position:t,left:0,top:0};if(!ge.floating)return j;const ie=rg(ge.floating,g.x),ae=rg(ge.floating,g.y);return u?{...j,transform:"translate("+ie+"px, "+ae+"px)",...ng(ge.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ie,top:ae}},[t,u,ge.floating,g.x,g.y]);return Ee.useMemo(()=>({...g,update:re,refs:ne,elements:ge,floatingStyles:J}),[g,re,ne,ge,J])}const xA=Ee.useInsertionEffect||(o=>o());function MA(o){const e=Ee.useRef(()=>{});return xA(()=>{e.current=o}),Ee.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}var ig=typeof document<"u"?m.useLayoutEffect:m.useEffect;let Gc=!1,LA=0;const sg=()=>"floating-ui-"+LA++;function DA(){const[o,e]=Ee.useState(()=>Gc?sg():void 0);return ig(()=>{o==null&&e(sg())},[]),Ee.useEffect(()=>{Gc||(Gc=!0)},[]),o}const UA=Ee.useId||DA;function HA(){const o=new Map;return{emit(e,t){var r;(r=o.get(e))==null||r.forEach(s=>s(t))},on(e,t){o.set(e,[...o.get(e)||[],t])},off(e,t){var r;o.set(e,((r=o.get(e))==null?void 0:r.filter(s=>s!==t))||[])}}}const FA=Ee.createContext(null),BA=Ee.createContext(null),KA=()=>{var o;return((o=Ee.useContext(FA))==null?void 0:o.id)||null},$A=()=>Ee.useContext(BA);function GA(o){var e;o===void 0&&(o={});const{open:t=!1,onOpenChange:r,nodeId:s}=o,[a,c]=Ee.useState(null),u=((e=o.elements)==null?void 0:e.reference)||a,d=NA(o),f=$A(),g=KA()!=null,y=MA((x,U,z)=>{x&&(T.current.openEvent=U),A.emit("openchange",{open:x,event:U,reason:z,nested:g}),r==null||r(x,U,z)}),v=Ee.useRef(null),T=Ee.useRef({}),A=Ee.useState(()=>HA())[0],S=UA(),b=Ee.useCallback(x=>{const U=Kt(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;d.refs.setReference(U)},[d.refs]),N=Ee.useCallback(x=>{(Kt(x)||x===null)&&(v.current=x,c(x)),(Kt(d.refs.reference.current)||d.refs.reference.current===null||x!==null&&!Kt(x))&&d.refs.setReference(x)},[d.refs]),I=Ee.useMemo(()=>({...d.refs,setReference:N,setPositionReference:b,domReference:v}),[d.refs,N,b]),k=Ee.useMemo(()=>({...d.elements,domReference:u}),[d.elements,u]),O=Ee.useMemo(()=>({...d,refs:I,elements:k,dataRef:T,nodeId:s,floatingId:S,events:A,open:t,onOpenChange:y}),[d,s,S,A,t,y,I,k]);return ig(()=>{const x=f==null?void 0:f.nodesRef.current.find(U=>U.id===s);x&&(x.context=O)}),Ee.useMemo(()=>({...d,context:O,refs:I,elements:k}),[d,I,k,O])}function zA(o,e){if(o==="rtl"&&(e.includes("right")||e.includes("left"))){const[t,r]=e.split("-"),s=t==="right"?"left":"right";return r===void 0?s:`${s}-${r}`}return e}function ag(o,e,t,r){return o==="center"||r==="center"?{top:e}:o==="end"?{bottom:t}:o==="start"?{top:t}:{}}function cg(o,e,t,r,s){return o==="center"||r==="center"?{left:e}:o==="end"?{[s==="ltr"?"right":"left"]:t}:o==="start"?{[s==="ltr"?"left":"right"]:t}:{}}const qA={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function WA({position:o,arrowSize:e,arrowOffset:t,arrowRadius:r,arrowPosition:s,arrowX:a,arrowY:c,dir:u}){const[d,f="center"]=o.split("-"),g={width:Re(e),height:Re(e),transform:"rotate(45deg)",position:"absolute",[qA[d]]:Re(r)},y=Re(-e/2);return d==="left"?{...g,...ag(f,c,t,s),right:y,borderLeftColor:"transparent",borderBottomColor:"transparent"}:d==="right"?{...g,...ag(f,c,t,s),left:y,borderRightColor:"transparent",borderTopColor:"transparent"}:d==="top"?{...g,...cg(f,a,t,s,u),bottom:y,borderTopColor:"transparent",borderLeftColor:"transparent"}:d==="bottom"?{...g,...cg(f,a,t,s,u),top:y,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const lg=m.forwardRef(({position:o,arrowSize:e,arrowOffset:t,arrowRadius:r,arrowPosition:s,visible:a,arrowX:c,arrowY:u,style:d,...f},g)=>{const{dir:y}=Ic();return a?m.createElement("div",{...f,ref:g,style:{...d,...WA({position:o,arrowSize:e,arrowOffset:t,arrowRadius:r,arrowPosition:s,dir:y,arrowX:c,arrowY:u})}}):null});lg.displayName="@mantine/core/FloatingArrow";const[VA,ug]=go("Popover component was not found in the tree");function zc({children:o,active:e=!0,refProp:t="ref"}){const r=ET(e),s=en(r,o==null?void 0:o.ref);return jo(o)?m.cloneElement(o,{[t]:s}):o}function dg(o){return m.createElement(Nc,{tabIndex:-1,"data-autofocus":!0,...o})}zc.displayName="@mantine/core/FocusTrap",dg.displayName="@mantine/core/FocusTrapInitialFocus",zc.InitialFocus=dg;function YA(o){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof o.className=="string"&&e.classList.add(...o.className.split(" ").filter(Boolean)),typeof o.style=="object"&&Object.assign(e.style,o.style),typeof o.id=="string"&&e.setAttribute("id",o.id),e}const jA={},hg=m.forwardRef((o,e)=>{const{children:t,target:r,...s}=oe("Portal",jA,o),[a,c]=m.useState(!1),u=m.useRef(null);return Tc(()=>(c(!0),u.current=r?typeof r=="string"?document.querySelector(r):r:YA(s),ff(e,u.current),!r&&u.current&&document.body.appendChild(u.current),()=>{!r&&u.current&&document.body.removeChild(u.current)}),[r]),!a||!u.current?null:On.createPortal(m.createElement(m.Fragment,null,t),u.current)});hg.displayName="@mantine/core/Portal";function fg({withinPortal:o=!0,children:e,...t}){return o?m.createElement(hg,{...t},e):m.createElement(m.Fragment,null,e)}fg.displayName="@mantine/core/OptionalPortal";const ri=o=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Re(o==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),fs={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Re(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Re(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Re(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Re(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...ri("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...ri("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...ri("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...ri("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...ri("top"),common:{transformOrigin:"top right"}}},gg={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function QA({transition:o,state:e,duration:t,timingFunction:r}){const s={transitionDuration:`${t}ms`,transitionTimingFunction:r};return typeof o=="string"?o in fs?{transitionProperty:fs[o].transitionProperty,...s,...fs[o].common,...fs[o][gg[e]]}:{}:{transitionProperty:o.transitionProperty,...s,...o.common,...o[gg[e]]}}function JA({duration:o,exitDuration:e,timingFunction:t,mounted:r,onEnter:s,onExit:a,onEntered:c,onExited:u}){const d=yo(),f=pf(),g=d.respectReducedMotion?f:!1,[y,v]=m.useState(g?0:o),[T,A]=m.useState(r?"entered":"exited"),S=m.useRef(-1),b=N=>{const I=N?s:a,k=N?c:u;A(N?"pre-entering":"pre-exiting"),window.clearTimeout(S.current);const O=g?0:N?o:e;if(v(O),O===0)typeof I=="function"&&I(),typeof k=="function"&&k(),A(N?"entered":"exited");else{const x=window.setTimeout(()=>{typeof I=="function"&&I(),A(N?"entering":"exiting")},10);S.current=window.setTimeout(()=>{window.clearTimeout(x),typeof k=="function"&&k(),A(N?"entered":"exited")},O)}};return Hr(()=>{b(r)},[r]),m.useEffect(()=>()=>window.clearTimeout(S.current),[]),{transitionDuration:y,transitionStatus:T,transitionTimingFunction:t||"ease"}}function pg({keepMounted:o,transition:e="fade",duration:t=250,exitDuration:r=t,mounted:s,children:a,timingFunction:c="ease",onExit:u,onEntered:d,onEnter:f,onExited:g}){const{transitionDuration:y,transitionStatus:v,transitionTimingFunction:T}=JA({mounted:s,exitDuration:r,duration:t,timingFunction:c,onExit:u,onEntered:d,onEnter:f,onExited:g});return y===0?s?m.createElement(m.Fragment,null,a({})):o?a({display:"none"}):null:v==="exited"?o?a({display:"none"}):null:m.createElement(m.Fragment,null,a(QA({transition:e,duration:y,state:v,timingFunction:T})))}pg.displayName="@mantine/core/Transition";var mg={dropdown:"m-38a85659",arrow:"m-a31dc6c1"};const XA={},qc=Se((o,e)=>{var b,N,I,k;const t=oe("PopoverDropdown",XA,o),{className:r,style:s,vars:a,children:c,onKeyDownCapture:u,variant:d,classNames:f,styles:g,...y}=t,v=ug(),T=pT({opened:v.opened,shouldReturnFocus:v.returnFocus}),A=v.withRoles?{"aria-labelledby":v.getTargetId(),id:v.getDropdownId(),role:"dialog",tabIndex:-1}:{},S=en(e,v.floating);return v.disabled?null:m.createElement(fg,{...v.portalProps,withinPortal:v.withinPortal},m.createElement(pg,{mounted:v.opened,...v.transitionProps,transition:((b=v.transitionProps)==null?void 0:b.transition)||"fade",duration:((N=v.transitionProps)==null?void 0:N.duration)??150,keepMounted:v.keepMounted,exitDuration:typeof((I=v.transitionProps)==null?void 0:I.exitDuration)=="number"?v.transitionProps.exitDuration:(k=v.transitionProps)==null?void 0:k.duration},O=>m.createElement(zc,{active:v.trapFocus},m.createElement(he,{...A,...y,variant:d,ref:S,onKeyDownCapture:aT(v.onClose,{active:v.closeOnEscape,onTrigger:T,onKeyDown:u}),"data-position":v.placement,...v.getStyles("dropdown",{className:r,props:t,classNames:f,styles:g,style:[{...O,zIndex:v.zIndex,top:v.y??0,left:v.x??0,width:v.width==="target"?void 0:Re(v.width)},s]})},c,m.createElement(lg,{ref:v.arrowRef,arrowX:v.arrowX,arrowY:v.arrowY,visible:v.withArrow,position:v.placement,arrowSize:v.arrowSize,arrowRadius:v.arrowRadius,arrowOffset:v.arrowOffset,arrowPosition:v.arrowPosition,...v.getStyles("arrow",{props:t,classNames:f,styles:g})})))))});qc.classes=mg,qc.displayName="@mantine/core/PopoverDropdown";const ZA={refProp:"ref",popupType:"dialog"},yg=Se((o,e)=>{const{children:t,refProp:r,popupType:s,...a}=oe("PopoverTarget",ZA,o);if(!jo(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=a,u=ug(),d=en(u.reference,t.ref,e),f=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return m.cloneElement(t,{...c,...f,...u.targetProps,className:Qn(u.targetProps.className,c.className,t.props.className),[r]:d,...u.controlled?null:{onClick:u.onToggle}})});yg.displayName="@mantine/core/PopoverTarget";function eS({opened:o,floating:e,position:t,positionDependencies:r}){const[s,a]=m.useState(0);m.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current)return SA(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,o,s,t]),Hr(()=>{e.update()},r),Hr(()=>{a(c=>c+1)},[o])}function tS(o,e){var r,s,a,c;const t=[oA(o.offset)];return(r=o.middlewares)!=null&&r.shift&&t.push(bA({limiter:kA()})),(s=o.middlewares)!=null&&s.flip&&t.push(_A()),(a=o.middlewares)!=null&&a.inline&&t.push(RA()),t.push(OA({element:o.arrowRef,padding:o.arrowOffset})),((c=o.middlewares)!=null&&c.size||o.width==="target")&&t.push(IA({apply({rects:u,availableWidth:d,availableHeight:f}){var v,T;const y=((v=e().refs.floating.current)==null?void 0:v.style)??{};(T=o.middlewares)!=null&&T.size&&Object.assign(y,{maxWidth:`${d}px`,maxHeight:`${f}px`}),o.width==="target"&&Object.assign(y,{width:`${u.reference.width}px`})}})),t}function nS(o){const[e,t]=Br({value:o.opened,defaultValue:o.defaultOpened,finalValue:!1,onChange:o.onChange}),r=()=>{var c;e&&((c=o.onClose)==null||c.call(o),t(!1))},s=()=>{var c,u;e?((c=o.onClose)==null||c.call(o),t(!1)):((u=o.onOpen)==null||u.call(o),t(!0))},a=GA({strategy:o.strategy,placement:o.position,middleware:tS(o,()=>a)});return eS({opened:o.opened,position:o.position,positionDependencies:o.positionDependencies||[],floating:a}),Hr(()=>{var c;(c=o.onPositionChange)==null||c.call(o,a.placement)},[a.placement]),Hr(()=>{var c,u;o.opened?(u=o.onOpen)==null||u.call(o):(c=o.onClose)==null||c.call(o)},[o.opened]),{floating:a,controlled:typeof o.opened=="boolean",opened:e,onClose:r,onToggle:s}}const rS={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:iT("popover"),__staticSelector:"Popover",width:"max-content"},oS=(o,{radius:e,shadow:t})=>({dropdown:{"--popover-radius":e===void 0?void 0:po(e),"--popover-shadow":lT(t)}});function Cr(o){var Ve,Bn,bn,et,mt,_n;const e=oe("Popover",rS,o),{children:t,position:r,offset:s,onPositionChange:a,positionDependencies:c,opened:u,transitionProps:d,width:f,middlewares:g,withArrow:y,arrowSize:v,arrowOffset:T,arrowRadius:A,arrowPosition:S,unstyled:b,classNames:N,styles:I,closeOnClickOutside:k,withinPortal:O,portalProps:x,closeOnEscape:U,clickOutsideEvents:z,trapFocus:G,onClose:X,onOpen:te,onChange:de,zIndex:re,radius:Ce,shadow:ne,id:ge,defaultOpened:J,__staticSelector:j,withRoles:ie,disabled:ae,returnFocus:ke,variant:Pe,keepMounted:pt,vars:je,floatingStrategy:Zn,...Ot}=e,sn=We({name:j,props:e,classes:mg,classNames:N,styles:I,unstyled:b,rootSelector:"dropdown",vars:je,varsResolver:oS}),Hn=m.useRef(null),[$t,Gt]=m.useState(null),[er,Fn]=m.useState(null),{dir:an}=Ic(),zt=Fr(ge),Ne=nS({middlewares:g,width:f,position:zA(an,r),offset:typeof s=="number"?s+(y?v/2:0):s,arrowRef:Hn,arrowOffset:T,onPositionChange:a,positionDependencies:c,opened:u,defaultOpened:J,onChange:de,onOpen:te,onClose:X,strategy:Zn});uT(()=>k&&Ne.onClose(),z,[$t,er]);const ot=m.useCallback(qt=>{Gt(qt),Ne.floating.refs.setReference(qt)},[Ne.floating.refs.setReference]),wr=m.useCallback(qt=>{Fn(qt),Ne.floating.refs.setFloating(qt)},[Ne.floating.refs.setFloating]);return m.createElement(VA,{value:{returnFocus:ke,disabled:ae,controlled:Ne.controlled,reference:ot,floating:wr,x:Ne.floating.x,y:Ne.floating.y,arrowX:(bn=(Bn=(Ve=Ne.floating)==null?void 0:Ve.middlewareData)==null?void 0:Bn.arrow)==null?void 0:bn.x,arrowY:(_n=(mt=(et=Ne.floating)==null?void 0:et.middlewareData)==null?void 0:mt.arrow)==null?void 0:_n.y,opened:Ne.opened,arrowRef:Hn,transitionProps:d,width:f,withArrow:y,arrowSize:v,arrowOffset:T,arrowRadius:A,arrowPosition:S,placement:Ne.floating.placement,trapFocus:G,withinPortal:O,portalProps:x,zIndex:re,radius:Ce,shadow:ne,closeOnEscape:U,onClose:Ne.onClose,onToggle:Ne.onToggle,getTargetId:()=>`${zt}-target`,getDropdownId:()=>`${zt}-dropdown`,withRoles:ie,targetProps:Ot,__staticSelector:j,classNames:N,styles:I,unstyled:b,variant:Pe,keepMounted:pt,getStyles:sn}},t)}Cr.Target=yg,Cr.Dropdown=qc,Cr.displayName="@mantine/core/Popover",Cr.extend=o=>o;var Sn={root:"m-5ae2e3c",barsLoader:"m-7a2bd4cd",bar:"m-870bb79","bars-loader-animation":"m-5d2b3b9d",dotsLoader:"m-4e3f22d7",dot:"m-870c4af","loader-dots-animation":"m-aac34a1",ovalLoader:"m-b34414df","oval-loader-animation":"m-f8e89c4b"};const iS=m.forwardRef(({className:o,...e},t)=>m.createElement(he,{component:"span",className:Qn(Sn.barsLoader,o),...e,ref:t},m.createElement("span",{className:Sn.bar}),m.createElement("span",{className:Sn.bar}),m.createElement("span",{className:Sn.bar}))),sS=m.forwardRef(({className:o,...e},t)=>m.createElement(he,{component:"span",className:Qn(Sn.dotsLoader,o),...e,ref:t},m.createElement("span",{className:Sn.dot}),m.createElement("span",{className:Sn.dot}),m.createElement("span",{className:Sn.dot}))),aS=m.forwardRef(({className:o,...e},t)=>m.createElement(he,{component:"span",className:Qn(Sn.ovalLoader,o),...e,ref:t})),Cg={bars:iS,oval:aS,dots:sS},cS={loaders:Cg,type:"oval"},lS=(o,{size:e,color:t})=>({root:{"--loader-size":gt(e,"loader-size"),"--loader-color":t?mo(t,o):void 0}}),gs=Se((o,e)=>{const t=oe("Loader",cS,o),{size:r,color:s,type:a,vars:c,className:u,style:d,classNames:f,styles:g,unstyled:y,loaders:v,variant:T,children:A,...S}=t,b=We({name:"Loader",props:t,classes:Sn,className:u,style:d,classNames:f,styles:g,unstyled:y,vars:c,varsResolver:lS});return A?m.createElement(he,{...b("root"),ref:e,...S},A):m.createElement(he,{...b("root"),ref:e,component:v[a],variant:T,size:r,...S})});gs.defaultLoaders=Cg,gs.classes=Sn,gs.displayName="@mantine/core/Loader";const vg=m.forwardRef(({size:o="var(--cb-icon-size, 70%)",style:e,...t},r)=>m.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:o,height:o},ref:r,...t},m.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})));vg.displayName="@mantine/core/CloseIcon";var wg={root:"m-86a44da5","root--subtle":"m-220c80f2"};const uS={variant:"subtle"},dS=(o,{size:e,radius:t,iconSize:r})=>({root:{"--cb-size":gt(e,"cb-size"),"--cb-radius":t===void 0?void 0:po(t),"--cb-icon-size":Re(r)}}),Wc=Co((o,e)=>{const t=oe("CloseButton",uS,o),{iconSize:r,children:s,vars:a,radius:c,className:u,classNames:d,style:f,styles:g,unstyled:y,"data-disabled":v,disabled:T,variant:A,icon:S,mod:b,...N}=t,I=We({name:"CloseButton",props:t,className:u,style:f,classes:wg,classNames:d,styles:g,unstyled:y,vars:a,varsResolver:dS});return m.createElement(ei,{ref:e,...N,unstyled:y,variant:A,disabled:T,mod:[{disabled:T||v},b],...I("root",{variant:A,active:!0})},S||m.createElement(vg,null),s)});Wc.classes=wg,Wc.displayName="@mantine/core/CloseButton";function hS(o){return m.Children.toArray(o).filter(Boolean)}var Tg={root:"m-4081bf90"};const fS={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},gS=(o,{grow:e,preventGrowOverflow:t,gap:r,align:s,justify:a,wrap:c},{childWidth:u})=>({root:{"--group-child-width":e&&t?u:void 0,"--group-gap":af(r),"--group-align":s,"--group-justify":a,"--group-wrap":c}}),oi=Se((o,e)=>{const t=oe("Group",fS,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,children:d,gap:f,align:g,justify:y,wrap:v,grow:T,preventGrowOverflow:A,vars:S,variant:b,__size:N,mod:I,...k}=t,O=hS(d),x=O.length,U=af(f??"md"),G={childWidth:`calc(${100/x}% - (${U} - ${U} / ${x}))`},X=We({name:"Group",props:t,stylesCtx:G,className:s,style:a,classes:Tg,classNames:r,styles:c,unstyled:u,vars:S,varsResolver:gS});return m.createElement(he,{...X("root"),ref:e,variant:b,mod:[{grow:T},I],size:N,...k},O)});oi.classes=Tg,oi.displayName="@mantine/core/Group";const[pS,ii]=Zw({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var rn={wrapper:"m-6c018570",input:"m-8fb7ebe7",section:"m-82577fc2",placeholder:"m-88bacfd0",root:"m-46b77525",label:"m-8fdc1311",required:"m-78a94662",error:"m-8f816625",description:"m-fe47ce59"};const Eg={},mS=(o,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Ft(e)} - ${Re(2)})`}}),ps=Se((o,e)=>{const t=oe("InputDescription",Eg,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,size:f,__staticSelector:g,__inheritStyles:y=!0,variant:v,...T}=oe("InputDescription",Eg,t),A=ii(),S=We({name:["InputWrapper",g],props:t,classes:rn,className:s,style:a,classNames:r,styles:c,unstyled:u,rootSelector:"description",vars:d,varsResolver:mS}),b=y&&(A==null?void 0:A.getStyles)||S;return m.createElement(he,{component:"p",ref:e,variant:v,size:f,...b("description"),...T})});ps.classes=rn,ps.displayName="@mantine/core/InputDescription";const yS={},CS=(o,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Ft(e)} - ${Re(2)})`}}),ms=Se((o,e)=>{const t=oe("InputError",yS,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,size:f,__staticSelector:g,__inheritStyles:y=!0,variant:v,...T}=t,A=We({name:["InputWrapper",g],props:t,classes:rn,className:s,style:a,classNames:r,styles:c,unstyled:u,rootSelector:"error",vars:d,varsResolver:CS}),S=ii(),b=y&&(S==null?void 0:S.getStyles)||A;return m.createElement(he,{component:"p",ref:e,variant:v,size:f,...b("error"),...T})});ms.classes=rn,ms.displayName="@mantine/core/InputError";const Ag={labelElement:"label"},vS=(o,{size:e})=>({label:{"--input-label-size":Ft(e),"--input-asterisk-color":void 0}}),ys=Se((o,e)=>{const t=oe("InputLabel",Ag,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,labelElement:f,size:g,required:y,htmlFor:v,onMouseDown:T,children:A,__staticSelector:S,variant:b,mod:N,...I}=oe("InputLabel",Ag,t),k=We({name:["InputWrapper",S],props:t,classes:rn,className:s,style:a,classNames:r,styles:c,unstyled:u,rootSelector:"label",vars:d,varsResolver:vS}),O=ii(),x=(O==null?void 0:O.getStyles)||k;return m.createElement(he,{...x("label"),component:f,variant:b,size:g,ref:e,htmlFor:f==="label"?v:void 0,mod:[{required:y},N],onMouseDown:U=>{T==null||T(U),!U.defaultPrevented&&U.detail>1&&U.preventDefault()},...I},A,y&&m.createElement("span",{...x("required"),"aria-hidden":!0}," *"))});ys.classes=rn,ys.displayName="@mantine/core/InputLabel";const Sg={},Vc=Se((o,e)=>{const t=oe("InputPlaceholder",Sg,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,__staticSelector:f,variant:g,error:y,mod:v,...T}=oe("InputPlaceholder",Sg,t),A=We({name:["InputPlaceholder",f],props:t,classes:rn,className:s,style:a,classNames:r,styles:c,unstyled:u,rootSelector:"placeholder"});return m.createElement(he,{...A("placeholder"),mod:[{error:!!y},v],component:"span",variant:g,ref:e,...T})});Vc.classes=rn,Vc.displayName="@mantine/core/InputPlaceholder";function wS(o,{hasDescription:e,hasError:t}){const r=o.findIndex(d=>d==="input"),s=o[r-1],a=o[r+1];return{offsetBottom:e&&a==="description"||t&&a==="error",offsetTop:e&&s==="description"||t&&s==="error"}}const TS={labelElement:"label",inputContainer:o=>o,inputWrapperOrder:["label","description","input","error"]},ES=(o,{size:e})=>({label:{"--input-label-size":Ft(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Ft(e)} - ${Re(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Ft(e)} - ${Re(2)})`}}),Yc=Se((o,e)=>{const t=oe("InputWrapper",TS,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,size:f,variant:g,__staticSelector:y,inputContainer:v,inputWrapperOrder:T,label:A,error:S,description:b,labelProps:N,descriptionProps:I,errorProps:k,labelElement:O,children:x,withAsterisk:U,id:z,required:G,__stylesApiProps:X,mod:te,...de}=t,re=We({name:["InputWrapper",y],props:X||t,classes:rn,className:s,style:a,classNames:r,styles:c,unstyled:u,vars:d,varsResolver:ES}),Ce={size:f,variant:g,__staticSelector:y},ne=Fr(z),ge=typeof U=="boolean"?U:G,J=(k==null?void 0:k.id)||`${ne}-error`,j=(I==null?void 0:I.id)||`${ne}-description`,ie=ne,ae=!!S&&typeof S!="boolean",ke=!!b,Pe=`${ae?J:""} ${ke?j:""}`,pt=Pe.trim().length>0?Pe.trim():void 0,je=(N==null?void 0:N.id)||`${ne}-label`,Zn=A&&m.createElement(ys,{key:"label",labelElement:O,id:je,htmlFor:ie,required:ge,...Ce,...N},A),Ot=ke&&m.createElement(ps,{key:"description",...I,...Ce,size:(I==null?void 0:I.size)||Ce.size,id:(I==null?void 0:I.id)||j},b),sn=m.createElement(m.Fragment,{key:"input"},v(x)),Hn=ae&&m.createElement(ms,{...k,...Ce,size:(k==null?void 0:k.size)||Ce.size,key:"error",id:(k==null?void 0:k.id)||J},S),$t=T.map(Gt=>{switch(Gt){case"label":return Zn;case"input":return sn;case"description":return Ot;case"error":return Hn;default:return null}});return m.createElement(pS,{value:{getStyles:re,describedBy:pt,inputId:ie,labelId:je,...wS(T,{hasDescription:ke,hasError:ae})}},m.createElement(he,{ref:e,variant:g,size:f,mod:[{error:!!S},te],...re("root"),...de},$t))});Yc.classes=rn,Yc.displayName="@mantine/core/InputWrapper";const AS={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},SS=(o,e,t)=>({wrapper:{"--input-margin-top":t.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":t.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":gt(e.size,"input-height"),"--input-fz":Ft(e.size),"--input-radius":e.radius===void 0?void 0:po(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?Re(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?Re(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?gt(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),At=Co((o,e)=>{const t=oe("Input",AS,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,required:d,__staticSelector:f,__stylesApiProps:g,size:y,wrapperProps:v,error:T,disabled:A,leftSection:S,leftSectionProps:b,leftSectionWidth:N,rightSection:I,rightSectionProps:k,rightSectionWidth:O,rightSectionPointerEvents:x,leftSectionPointerEvents:U,variant:z,vars:G,pointer:X,multiline:te,radius:de,id:re,withAria:Ce,withErrorStyles:ne,mod:ge,...J}=t,{styleProps:j,rest:ie}=rs(J),ae=ii(),ke={offsetBottom:ae==null?void 0:ae.offsetBottom,offsetTop:ae==null?void 0:ae.offsetTop},Pe=We({name:["Input",f],props:g||t,classes:rn,className:s,style:a,classNames:r,styles:c,unstyled:u,stylesCtx:ke,rootSelector:"wrapper",vars:G,varsResolver:SS}),pt=Ce?{required:d,disabled:A,"aria-invalid":!!T,"aria-describedby":ae==null?void 0:ae.describedBy,id:(ae==null?void 0:ae.inputId)||re}:{};return m.createElement(he,{...Pe("wrapper"),...j,...v,mod:[{error:!!T&&ne,pointer:X,disabled:A,multiline:te,"data-with-right-section":!!I,"data-with-left-section":!!S},ge],variant:z,size:y},S&&m.createElement("div",{...b,"data-position":"left",...Pe("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style})},S),m.createElement(he,{component:"input",...ie,...pt,ref:e,required:d,mod:{disabled:A,error:!!T&&ne},variant:z,...Pe("input")}),I&&m.createElement("div",{...k,"data-position":"right",...Pe("section",{className:k==null?void 0:k.className,style:k==null?void 0:k.style})},I))});At.classes=rn,At.Wrapper=Yc,At.Label=ys,At.Error=ms,At.Description=ps,At.Placeholder=Vc,At.displayName="@mantine/core/Input";function bS(o,e,t){const r=oe(o,e,t),{label:s,description:a,error:c,required:u,classNames:d,styles:f,className:g,unstyled:y,__staticSelector:v,__stylesApiProps:T,errorProps:A,labelProps:S,descriptionProps:b,wrapperProps:N,id:I,size:k,style:O,inputContainer:x,inputWrapperOrder:U,withAsterisk:z,variant:G,vars:X,mod:te,...de}=r,{styleProps:re,rest:Ce}=rs(de),ne={label:s,description:a,error:c,required:u,classNames:d,className:g,__staticSelector:v,__stylesApiProps:T||r,errorProps:A,labelProps:S,descriptionProps:b,unstyled:y,styles:f,size:k,style:O,inputContainer:x,inputWrapperOrder:U,withAsterisk:z,variant:G,id:I,mod:te,...N};return{...Ce,classNames:d,styles:f,unstyled:y,wrapperProps:{...ne,...re},inputProps:{required:u,classNames:d,styles:f,unstyled:y,size:k,__staticSelector:v,__stylesApiProps:T||r,error:c,variant:G,id:I}}}const _S={__staticSelector:"InputBase",withAria:!0},vr=Co((o,e)=>{const{inputProps:t,wrapperProps:r,...s}=bS("InputBase",_S,o);return m.createElement(At.Wrapper,{...r},m.createElement(At,{...t,...s,ref:e}))});vr.classes={...At.classes,...At.Wrapper.classes},vr.displayName="@mantine/core/InputBase";const[IS,jc]=go("Accordion component was not found in the tree");function Qc({style:o,size:e=16,...t}){return m.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...o,width:Re(e),height:Re(e),display:"block"},...t},m.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}Qc.displayName="@mantine/core/AccordionChevron";const[RS,bg]=go("Accordion.Item component was not found in the tree");var si={root:"m-9bdbb667",panel:"m-df78851f",content:"m-4ba554d4",itemTitle:"m-8fa820a0",control:"m-4ba585b8","control--default":"m-6939a5e9","control--contained":"m-4271d21b",label:"m-df3ffa0f",chevron:"m-3f35ae96",icon:"m-9bd771fe",item:"m-9bd7b098","item--default":"m-fe19b709","item--contained":"m-1f921b3b","item--filled":"m-2cdf939a","item--separated":"m-9f59b069"};const kS={},Jc=Se((o,e)=>{const{classNames:t,className:r,style:s,styles:a,vars:c,chevron:u,icon:d,onClick:f,onKeyDown:g,children:y,disabled:v,mod:T,...A}=oe("AccordionControl",kS,o),{value:S}=bg(),b=jc(),N=b.isItemActive(S),I=typeof b.order=="number",k=`h${b.order}`,O=m.createElement(ei,{...A,...b.getStyles("control",{className:r,classNames:t,style:s,styles:a,variant:b.variant}),unstyled:b.unstyled,mod:["accordion-control",{active:N,"chevron-position":b.chevronPosition,disabled:v},T],ref:e,onClick:x=>{f==null||f(x),b.onChange(S)},type:"button",disabled:v,"aria-expanded":N,"aria-controls":b.getRegionId(S),id:b.getControlId(S),onKeyDown:rT({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:b.loop,orientation:"vertical",onKeyDown:g})},m.createElement(he,{component:"span",mod:{rotate:!b.disableChevronRotation&&N,position:b.chevronPosition},...b.getStyles("chevron",{classNames:t,styles:a})},u||b.chevron),m.createElement("span",{...b.getStyles("label",{classNames:t,styles:a})},y),d&&m.createElement(he,{component:"span",mod:{"chevron-position":b.chevronPosition},...b.getStyles("icon",{classNames:t,styles:a})},d));return I?m.createElement(k,{...b.getStyles("itemTitle",{classNames:t,styles:a})},O):O});Jc.displayName="@mantine/core/AccordionControl",Jc.classes=si;const PS={},Xc=Se((o,e)=>{const{classNames:t,className:r,style:s,styles:a,vars:c,value:u,mod:d,...f}=oe("AccordionItem",PS,o),g=jc();return m.createElement(RS,{value:{value:u}},m.createElement(he,{ref:e,mod:[{active:g.isItemActive(u)},d],...g.getStyles("item",{className:r,classNames:t,styles:a,style:s,variant:g.variant}),...f}))});Xc.displayName="@mantine/core/AccordionItem",Xc.classes=si;const OS={},Zc=Se((o,e)=>{const{classNames:t,className:r,style:s,styles:a,vars:c,children:u,...d}=oe("AccordionPanel",OS,o),{value:f}=bg(),g=jc();return m.createElement(If,{ref:e,...g.getStyles("panel",{className:r,classNames:t,style:s,styles:a}),...d,in:g.isItemActive(f),transitionDuration:g.transitionDuration??200,role:"region",id:g.getRegionId(f),"aria-labelledby":g.getControlId(f)},m.createElement("div",{...g.getStyles("content",{classNames:t,styles:a})},u))});Zc.displayName="@mantine/core/AccordionPanel",Zc.classes=si;const NS={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:m.createElement(Qc,null)},xS=(o,{transitionDuration:e,chevronSize:t,radius:r})=>({root:{"--accordion-transition-duration":e===void 0?void 0:`${e}ms`,"--accordion-chevron-size":t===void 0?void 0:Re(t),"--accordion-radius":r===void 0?void 0:po(r)}});function dt(o){const e=oe("Accordion",NS,o),{classNames:t,className:r,style:s,styles:a,unstyled:c,vars:u,children:d,multiple:f,value:g,defaultValue:y,onChange:v,id:T,loop:A,transitionDuration:S,disableChevronRotation:b,chevronPosition:N,chevronSize:I,order:k,chevron:O,variant:x,radius:U,...z}=e,G=Fr(T),[X,te]=Br({value:g,defaultValue:y,finalValue:f?[]:null,onChange:v}),de=ne=>Array.isArray(X)?X.includes(ne):ne===X,re=ne=>{const ge=Array.isArray(X)?X.includes(ne)?X.filter(J=>J!==ne):[...X,ne]:ne===X?null:ne;te(ge)},Ce=We({name:"Accordion",classes:si,props:e,className:r,style:s,classNames:t,styles:a,unstyled:c,vars:u,varsResolver:xS});return m.createElement(IS,{value:{isItemActive:de,onChange:re,getControlId:sf(`${G}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:sf(`${G}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:S,disableChevronRotation:b,chevronPosition:N,order:k,chevron:O,loop:A,getStyles:Ce,variant:x,unstyled:c}},m.createElement(he,{...Ce("root"),id:G,...z,variant:x,"data-accordion":!0},d))}const MS=o=>o;dt.extend=MS,dt.classes=si,dt.displayName="@mantine/core/Accordion",dt.Item=Xc,dt.Panel=Zc,dt.Control=Jc,dt.Chevron=Qc;var _g={root:"m-b6d8b162"};function LS(o){if(o==="start")return"start";if(o==="end"||o)return"end"}const DS={inherit:!1},US=(o,{variant:e,lineClamp:t,gradient:r,size:s,color:a})=>({root:{"--text-fz":Ft(s),"--text-lh":cT(s),"--text-gradient":e==="gradient"?BT(r,o):void 0,"--text-line-clamp":typeof t=="number"?t.toString():void 0,"--text-color":a?mo(a,o):void 0}}),el=Co((o,e)=>{const t=oe("Text",DS,o),{lineClamp:r,truncate:s,inline:a,inherit:c,gradient:u,span:d,__staticSelector:f,vars:g,className:y,style:v,classNames:T,styles:A,unstyled:S,variant:b,mod:N,size:I,...k}=t,O=We({name:["Text",f],props:t,classes:_g,className:y,style:v,classNames:T,styles:A,unstyled:S,vars:g,varsResolver:US});return m.createElement(he,{...O("root",{focusable:!0}),ref:e,component:d?"span":"p",variant:b,mod:[{"data-truncate":LS(s),"data-line-clamp":typeof r=="number","data-inline":a,"data-inherit":c},N],size:I,...k})});el.classes=_g,el.displayName="@mantine/core/Text";function Ig(o){return typeof o=="string"?{value:o,label:o}:"value"in o&&!("label"in o)?{value:o.value,label:o.value,disabled:o.disabled}:typeof o=="number"?{value:o.toString(),label:o.toString()}:"group"in o?{group:o.group,items:o.items.map(e=>Ig(e))}:o}function Rg(o){return o?o.map(e=>Ig(e)):[]}function tl(o){return o.reduce((e,t)=>"group"in t?{...e,...tl(t.items)}:(e[t.value]=t,e),{})}var Pt={dropdown:"m-88b62a41",options:"m-b2821a6e",option:"m-92253aa5",search:"m-985517d8",empty:"m-2530cd1d",header:"m-858f94bd",footer:"m-82b967cb",group:"m-254f3e4f",groupLabel:"m-2bb2e9e5",chevron:"m-2943220b",optionsDropdownOption:"m-390b5f4",optionsDropdownCheckIcon:"m-8ee53fc2"};const HS={error:null},FS=(o,{size:e})=>({chevron:{"--combobox-chevron-size":gt(e,"combobox-chevron-size")}}),nl=Se((o,e)=>{const t=oe("ComboboxChevron",HS,o),{size:r,error:s,style:a,className:c,classNames:u,styles:d,unstyled:f,vars:g,mod:y,...v}=t,T=We({name:"ComboboxChevron",classes:Pt,props:t,style:a,className:c,classNames:u,styles:d,unstyled:f,vars:g,varsResolver:FS,rootSelector:"chevron"});return m.createElement(he,{component:"svg",...v,...T("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:s},y],ref:e},m.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))});nl.classes=Pt,nl.displayName="@mantine/core/ComboboxChevron";const[BS,on]=go("Combobox component was not found in tree"),kg=m.forwardRef(({size:o,onMouseDown:e,onClick:t,onClear:r,...s},a)=>m.createElement(Wc,{ref:a,size:o||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...s,onMouseDown:c=>{c.preventDefault(),e==null||e(c)},onClick:c=>{r(),t==null||t(c)}}));kg.displayName="@mantine/core/ComboboxClearButton";const KS={},rl=Se((o,e)=>{const{classNames:t,styles:r,className:s,style:a,hidden:c,...u}=oe("ComboboxDropdown",KS,o),d=on();return m.createElement(Cr.Dropdown,{...u,ref:e,role:"presentation","data-hidden":c||void 0,...d.getStyles("dropdown",{className:s,style:a,classNames:t,styles:r})})});rl.classes=Pt,rl.displayName="@mantine/core/ComboboxDropdown";const $S={refProp:"ref"},Pg=Se((o,e)=>{const{children:t,refProp:r}=oe("ComboboxDropdownTarget",$S,o);if(on(),!jo(t))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return m.createElement(Cr.Target,{ref:e,refProp:r},t)});Pg.displayName="@mantine/core/ComboboxDropdownTarget";const GS={},ol=Se((o,e)=>{const{classNames:t,className:r,style:s,styles:a,vars:c,...u}=oe("ComboboxEmpty",GS,o),d=on();return m.createElement(he,{ref:e,...d.getStyles("empty",{className:r,classNames:t,styles:a,style:s}),...u})});ol.classes=Pt,ol.displayName="@mantine/core/ComboboxEmpty";function il({onKeyDown:o,withKeyboardNavigation:e,withAriaAttributes:t,withExpandedAttribute:r,targetType:s}){const a=on(),[c,u]=m.useState(null),d=g=>{if(o==null||o(g),!a.readOnly&&e){if(g.nativeEvent.code==="ArrowDown"&&(g.preventDefault(),a.store.dropdownOpened?u(a.store.selectNextOption()):(a.store.openDropdown("keyboard"),u(a.store.selectActiveOption()))),g.nativeEvent.code==="ArrowUp"&&(g.preventDefault(),a.store.dropdownOpened?u(a.store.selectPreviousOption()):(a.store.openDropdown("keyboard"),u(a.store.selectActiveOption()))),g.nativeEvent.code==="Enter"||g.nativeEvent.code==="NumpadEnter"){const y=a.store.getSelectedOptionIndex();a.store.dropdownOpened&&y!==-1?(g.preventDefault(),a.store.clickSelectedOption()):s==="button"&&(g.preventDefault(),a.store.openDropdown("keyboard"))}g.nativeEvent.code==="Escape"&&a.store.closeDropdown("keyboard"),g.nativeEvent.code==="Space"&&s==="button"&&(g.preventDefault(),a.store.toggleDropdown("keyboard"))}};return{...t?{"aria-haspopup":"listbox","aria-expanded":r&&!!(a.store.listId&&a.store.dropdownOpened)||void 0,"aria-controls":a.store.listId,"aria-activedescendant":a.store.dropdownOpened&&c||void 0,autoComplete:"off","data-expanded":a.store.dropdownOpened?!0:void 0}:{},onKeyDown:d}}const zS={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1},Og=Se((o,e)=>{const{children:t,refProp:r,withKeyboardNavigation:s,withAriaAttributes:a,withExpandedAttribute:c,targetType:u,...d}=oe("ComboboxEventsTarget",zS,o);if(!jo(t))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=on(),g=il({targetType:u,withAriaAttributes:a,withKeyboardNavigation:s,withExpandedAttribute:c,onKeyDown:t.props.onKeyDown});return m.cloneElement(t,{...g,...d,[r]:en(e,f.store.targetRef,t==null?void 0:t.ref)})});Og.displayName="@mantine/core/ComboboxEventsTarget";const qS={},sl=Se((o,e)=>{const{classNames:t,className:r,style:s,styles:a,vars:c,...u}=oe("ComboboxFooter",qS,o),d=on();return m.createElement(he,{ref:e,...d.getStyles("footer",{className:r,classNames:t,style:s,styles:a}),...u})});sl.classes=Pt,sl.displayName="@mantine/core/ComboboxFooter";const WS={},al=Se((o,e)=>{const{classNames:t,className:r,style:s,styles:a,vars:c,children:u,label:d,...f}=oe("ComboboxGroup",WS,o),g=on();return m.createElement(he,{ref:e,...g.getStyles("group",{className:r,classNames:t,style:s,styles:a}),...f},d&&m.createElement("div",{...g.getStyles("groupLabel",{classNames:t,styles:a})},d),u)});al.classes=Pt,al.displayName="@mantine/core/ComboboxGroup";const VS={},cl=Se((o,e)=>{const{classNames:t,className:r,style:s,styles:a,vars:c,...u}=oe("ComboboxHeader",VS,o),d=on();return m.createElement(he,{ref:e,...d.getStyles("header",{className:r,classNames:t,style:s,styles:a}),...u})});cl.classes=Pt,cl.displayName="@mantine/core/ComboboxHeader";const YS={},ll=Se((o,e)=>{const t=oe("ComboboxOption",YS,o),{classNames:r,className:s,style:a,styles:c,vars:u,onClick:d,id:f,active:g,onMouseDown:y,onMouseOver:v,disabled:T,selected:A,mod:S,...b}=t,N=on(),I=m.useId(),k=f||I;return m.createElement(he,{...N.getStyles("option",{className:s,classNames:r,styles:c,style:a}),...b,ref:e,id:k,mod:["combobox-option",{"combobox-active":g,"combobox-disabled":T,"combobox-selected":A},S],role:"option",onClick:O=>{var x;T?O.preventDefault():((x=N.onOptionSubmit)==null||x.call(N,t.value,t),d==null||d(O))},onMouseDown:O=>{O.preventDefault(),y==null||y(O)},onMouseOver:O=>{N.resetSelectionOnOptionHover&&N.store.resetSelectedOption(),v==null||v(O)}})});ll.classes=Pt,ll.displayName="@mantine/core/ComboboxOption";const jS={},ul=Se((o,e)=>{const t=oe("ComboboxOptions",jS,o),{classNames:r,className:s,style:a,styles:c,id:u,onMouseDown:d,labelledBy:f,...g}=t,y=on(),v=Fr(u);return m.useEffect(()=>{y.store.setListId(v)},[v]),m.createElement(he,{ref:e,...y.getStyles("options",{className:s,style:a,classNames:r,styles:c}),...g,id:v,role:"listbox","aria-labelledby":f,onMouseDown:T=>{T.preventDefault(),d==null||d(T)}})});ul.classes=Pt,ul.displayName="@mantine/core/ComboboxOptions";const QS={withAriaAttributes:!0,withKeyboardNavigation:!0},dl=Se((o,e)=>{const t=oe("ComboboxSearch",QS,o),{classNames:r,styles:s,unstyled:a,vars:c,withAriaAttributes:u,onKeyDown:d,withKeyboardNavigation:f,size:g,...y}=t,v=on(),T=v.getStyles("search"),A=il({targetType:"input",withAriaAttributes:u,withKeyboardNavigation:f,withExpandedAttribute:!1,onKeyDown:d});return m.createElement(At,{ref:en(e,v.store.searchRef),classNames:[{input:T.className},r],styles:[{input:T.style},s],size:g||v.size,...A,...y,__staticSelector:"Combobox"})});dl.classes=Pt,dl.displayName="@mantine/core/ComboboxSearch";const JS={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1},Ng=Se((o,e)=>{const{children:t,refProp:r,withKeyboardNavigation:s,withAriaAttributes:a,withExpandedAttribute:c,targetType:u,...d}=oe("ComboboxTarget",JS,o);if(!jo(t))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const f=on(),g=il({targetType:u,withAriaAttributes:a,withKeyboardNavigation:s,withExpandedAttribute:c,onKeyDown:t.props.onKeyDown}),y=m.cloneElement(t,{...g,...d});return m.createElement(Cr.Target,{ref:en(e,f.store.targetRef)},y)});Ng.displayName="@mantine/core/ComboboxTarget";function XS(o,e,t){for(let r=o-1;r>=0;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(t){for(let r=e.length-1;r>-1;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return o}function ZS(o,e,t){for(let r=o+1;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(t){for(let r=0;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return o}function eb(o){for(let e=0;e<o.length;e+=1)if(!o[e].hasAttribute("data-combobox-disabled"))return e;return-1}function hl({defaultOpened:o,opened:e,onOpenedChange:t,onDropdownClose:r,onDropdownOpen:s,loop:a=!0,scrollBehavior:c="instant"}={}){const[u,d]=Br({value:e,defaultValue:o,finalValue:!1,onChange:t}),f=m.useRef(null),g=m.useRef(-1),y=m.useRef(null),v=m.useRef(null),T=m.useRef(-1),A=m.useRef(-1),S=m.useRef(-1),b=m.useCallback((J="unknown")=>{u||(d(!0),s==null||s(J))},[d,s,u]),N=m.useCallback((J="unknown")=>{u&&(d(!1),r==null||r(J))},[d,r,u]),I=m.useCallback((J="unknown")=>{u?N(J):b(J)},[N,b,u]),k=m.useCallback(()=>{const J=document.querySelector(`#${f.current} [data-combobox-selected]`);J==null||J.removeAttribute("data-combobox-selected"),J==null||J.removeAttribute("aria-selected")},[]),O=m.useCallback(J=>{const j=document.getElementById(f.current),ie=j==null?void 0:j.querySelectorAll("[data-combobox-option]");if(!ie)return null;const ae=J>=ie.length?0:J<0?ie.length-1:J;return g.current=ae,ie!=null&&ie[ae]&&!ie[ae].hasAttribute("data-combobox-disabled")?(k(),ie[ae].setAttribute("data-combobox-selected","true"),ie[ae].setAttribute("aria-selected","true"),ie[ae].scrollIntoView({block:"nearest",behavior:c}),ie[ae].id):null},[c,k]),x=m.useCallback(()=>{const J=document.querySelector(`#${f.current} [data-combobox-active]`);if(J){const j=document.querySelectorAll(`#${f.current} [data-combobox-option]`),ie=Array.from(j).findIndex(ae=>ae===J);return O(ie)}return O(0)},[O]),U=m.useCallback(()=>O(ZS(g.current,document.querySelectorAll(`#${f.current} [data-combobox-option]`),a)),[O,a]),z=m.useCallback(()=>O(XS(g.current,document.querySelectorAll(`#${f.current} [data-combobox-option]`),a)),[O,a]),G=m.useCallback(()=>O(eb(document.querySelectorAll(`#${f.current} [data-combobox-option]`))),[O]),X=m.useCallback((J="selected",j)=>{S.current=window.setTimeout(()=>{var ke;const ie=document.querySelectorAll(`#${f.current} [data-combobox-option]`),ae=Array.from(ie).findIndex(Pe=>Pe.hasAttribute(`data-combobox-${J}`));g.current=ae,j!=null&&j.scrollIntoView&&((ke=ie[ae])==null||ke.scrollIntoView({block:"nearest",behavior:c}))},0)},[]),te=m.useCallback(()=>{g.current=-1,k()},[k]),de=m.useCallback(()=>{const J=document.querySelectorAll(`#${f.current} [data-combobox-option]`),j=J==null?void 0:J[g.current];j==null||j.click()},[]),re=m.useCallback(J=>{f.current=J},[]),Ce=m.useCallback(()=>{T.current=window.setTimeout(()=>y.current.focus(),0)},[]),ne=m.useCallback(()=>{A.current=window.setTimeout(()=>v.current.focus(),0)},[]),ge=m.useCallback(()=>g.current,[]);return m.useEffect(()=>()=>{window.clearTimeout(T.current),window.clearTimeout(A.current),window.clearTimeout(S.current)},[]),{dropdownOpened:u,openDropdown:b,closeDropdown:N,toggleDropdown:I,selectedOptionIndex:g.current,getSelectedOptionIndex:ge,selectOption:O,selectFirstOption:G,selectActiveOption:x,selectNextOption:U,selectPreviousOption:z,resetSelectedOption:te,updateSelectedOptionIndex:X,listId:f.current,setListId:re,clickSelectedOption:de,searchRef:y,focusSearchInput:Ce,targetRef:v,focusTarget:ne}}const tb={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},nb=(o,{size:e,dropdownPadding:t})=>({options:{"--combobox-option-fz":Ft(e),"--combobox-option-padding":gt(e,"combobox-option-padding")},dropdown:{"--combobox-padding":t===void 0?void 0:Re(t),"--combobox-option-fz":Ft(e),"--combobox-option-padding":gt(e,"combobox-option-padding")}});function Le(o){const e=oe("Combobox",tb,o),{classNames:t,styles:r,unstyled:s,children:a,store:c,vars:u,onOptionSubmit:d,onClose:f,size:g,dropdownPadding:y,resetSelectionOnOptionHover:v,__staticSelector:T,readOnly:A,...S}=e,b=hl(),N=c||b,I=We({name:T||"Combobox",classes:Pt,props:e,classNames:t,styles:r,unstyled:s,vars:u,varsResolver:nb}),k=()=>{f==null||f(),N.closeDropdown()};return m.createElement(BS,{value:{getStyles:I,store:N,onOptionSubmit:d,size:g,resetSelectionOnOptionHover:v,readOnly:A}},m.createElement(Cr,{opened:N.dropdownOpened,...S,onClose:k,withRoles:!1,unstyled:s},a))}const rb=o=>o;Le.extend=rb,Le.classes=Pt,Le.displayName="@mantine/core/Combobox",Le.Target=Ng,Le.Dropdown=rl,Le.Options=ul,Le.Option=ll,Le.Search=dl,Le.Empty=ol,Le.Chevron=nl,Le.Footer=sl,Le.Header=cl,Le.EventsTarget=Og,Le.DropdownTarget=Pg,Le.Group=al,Le.ClearButton=kg;var xg={root:"m-5f75b09e",body:"m-5f6e695e",labelWrapper:"m-d3ea56bb",label:"m-8ee546b8",description:"m-328f68c0",error:"m-8e8a99cc"};const ob=xg,Mg=m.forwardRef(({__staticSelector:o,__stylesApiProps:e,className:t,classNames:r,styles:s,unstyled:a,children:c,label:u,description:d,id:f,disabled:g,error:y,size:v,labelPosition:T="left",variant:A,style:S,vars:b,mod:N,...I},k)=>{const O=We({name:o,props:e,className:t,style:S,classes:xg,classNames:r,styles:s,unstyled:a});return m.createElement(he,{...O("root"),ref:k,__vars:{"--label-fz":Ft(v),"--label-lh":gt(v,"label-lh")},mod:[{"label-position":T},N],variant:A,size:v,...I},m.createElement("div",{...O("body")},c,m.createElement("div",{...O("labelWrapper"),"data-disabled":g||void 0},u&&m.createElement("label",{...O("label"),"data-disabled":g||void 0,htmlFor:f},u),d&&m.createElement(At.Description,{size:v,__inheritStyles:!1,...O("description")},d),y&&y!=="boolean"&&m.createElement(At.Error,{size:v,__inheritStyles:!1,...O("error")},y))))});Mg.displayName="@mantine/core/InlineInput";const Lg=m.createContext(null),ib=Lg.Provider,sb=()=>m.useContext(Lg);function ab({children:o,role:e}){const t=ii();return t?m.createElement("div",{role:e,"aria-labelledby":t.labelId,"aria-describedby":t.describedBy},o):m.createElement(m.Fragment,null,o)}const cb={},fl=Se((o,e)=>{const{value:t,defaultValue:r,onChange:s,size:a,wrapperProps:c,children:u,readOnly:d,...f}=oe("CheckboxGroup",cb,o),[g,y]=Br({value:t,defaultValue:r,finalValue:[],onChange:s}),v=T=>{const A=T.currentTarget.value;!d&&y(g.includes(A)?g.filter(S=>S!==A):[...g,A])};return m.createElement(ib,{value:{value:g,onChange:v,size:a}},m.createElement(At.Wrapper,{size:a,ref:e,...c,...f,labelElement:"div",__staticSelector:"CheckboxGroup"},m.createElement(ab,{role:"group"},u)))});fl.classes=At.Wrapper.classes,fl.displayName="@mantine/core/CheckboxGroup";function Dg({size:o,style:e,...t}){const r=o!==void 0?{width:Re(o),height:Re(o),...e}:e;return m.createElement("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...t},m.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function lb({indeterminate:o,...e}){return o?m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...e},m.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):m.createElement(Dg,{...e})}var Ug={root:"m-bf2d988c",inner:"m-26062bec",input:"m-26063560",icon:"m-bf295423","input--outline":"m-215c4542"};const ub={labelPosition:"right",icon:lb},db=(o,{radius:e,color:t,size:r,iconColor:s,variant:a,autoContrast:c})=>{const u=Jo({color:t||o.primaryColor,theme:o}),d=u.isThemeColor&&u.shade===void 0?`var(--mantine-color-${u.color}-outline)`:u.color;return{root:{"--checkbox-size":gt(r,"checkbox-size"),"--checkbox-radius":e===void 0?void 0:po(e),"--checkbox-color":a==="outline"?d:mo(t,o),"--checkbox-icon-color":s?mo(s,o):rE(c,o)?$T({color:t,theme:o}):void 0}}},Cs=Se((o,e)=>{const t=oe("Checkbox",ub,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,color:f,label:g,id:y,size:v,radius:T,wrapperProps:A,children:S,checked:b,labelPosition:N,description:I,error:k,disabled:O,variant:x,indeterminate:U,icon:z,rootRef:G,iconColor:X,onChange:te,autoContrast:de,mod:re,...Ce}=t,ne=sb(),ge=v||(ne==null?void 0:ne.size),J=z,j=We({name:"Checkbox",props:t,classes:Ug,className:s,style:a,classNames:r,styles:c,unstyled:u,vars:d,varsResolver:db}),{styleProps:ie,rest:ae}=rs(Ce),ke=Fr(y),Pe=ne?{checked:ne.value.includes(ae.value),onChange:pt=>{ne.onChange(pt),te==null||te(pt)}}:{};return m.createElement(Mg,{...j("root"),__staticSelector:"Checkbox",__stylesApiProps:t,id:ke,size:ge,labelPosition:N,label:g,description:I,error:k,disabled:O,classNames:r,styles:c,unstyled:u,"data-checked":Pe.checked||b||void 0,variant:x,ref:G,mod:re,...ie,...A},m.createElement(he,{...j("inner"),mod:{"data-label-position":N}},m.createElement(he,{component:"input",id:ke,ref:e,checked:b,disabled:O,mod:{error:!!k,indeterminate:U},...j("input",{focusable:!0,variant:x}),onChange:te,...ae,...Pe,type:"checkbox"}),m.createElement(J,{indeterminate:U,...j("icon")})))});Cs.classes={...Ug,...ob},Cs.displayName="@mantine/core/Checkbox",Cs.Group=fl;function ai(o){return"group"in o}function Hg({options:o,search:e,limit:t}){const r=e.trim().toLowerCase(),s=[];for(let a=0;a<o.length;a+=1){const c=o[a];if(s.length===t)return s;ai(c)&&s.push({group:c.group,items:Hg({options:c.items,search:e,limit:t-s.length})}),ai(c)||c.label.toLowerCase().includes(r)&&s.push(c)}return s}function hb(o){if(o.length===0)return!0;for(const e of o)if(!("group"in e)||e.items.length>0)return!1;return!0}function Fg(o,e=new Set){if(Array.isArray(o))for(const t of o)if(ai(t))Fg(t.items,e);else{if(typeof t.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof t.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof t.value}`);if(e.has(t.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${t.value}" was provided more than once`);e.add(t.value)}}function fb(o,e){return Array.isArray(o)?o.includes(e):o===e}function Bg({data:o,withCheckIcon:e,value:t,checkIconPosition:r,unstyled:s,renderOption:a}){if(!ai(o)){const u=fb(t,o.value),d=e&&u&&m.createElement(Dg,{className:Pt.optionsDropdownCheckIcon}),f=m.createElement(m.Fragment,null,r==="left"&&d,m.createElement("span",null,o.label),r==="right"&&d);return m.createElement(Le.Option,{value:o.value,disabled:o.disabled,className:Qn({[Pt.optionsDropdownOption]:!s}),"data-reverse":r==="right"||void 0,"data-checked":u||void 0,"aria-selected":u,active:u},typeof a=="function"?a({option:o,checked:u}):f)}const c=o.items.map(u=>m.createElement(Bg,{data:u,value:t,key:u.value,unstyled:s,withCheckIcon:e,checkIconPosition:r}));return m.createElement(Le.Group,{label:o.group},c)}function Kg({data:o,hidden:e,hiddenWhenEmpty:t,filter:r,search:s,limit:a,maxDropdownHeight:c,withScrollArea:u=!0,filterOptions:d=!0,withCheckIcon:f=!1,value:g,checkIconPosition:y,nothingFoundMessage:v,unstyled:T,labelId:A,renderOption:S}){Fg(o);const N=typeof s=="string"?(r||Hg)({options:o,search:d?s:"",limit:a??1/0}):o,I=hb(N),k=N.map(O=>m.createElement(Bg,{data:O,key:ai(O)?O.group:O.value,withCheckIcon:f,value:g,checkIconPosition:y,unstyled:T,renderOption:S}));return m.createElement(Le.Dropdown,{hidden:e||t&&I},m.createElement(Le.Options,{labelledBy:A},u?m.createElement(Zo.Autosize,{mah:c??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y"},k):k,I&&v&&m.createElement(Le.Empty,null,v)))}const gb={},gl=Se((o,e)=>{const t=oe("Autocomplete",gb,o),{classNames:r,styles:s,unstyled:a,vars:c,dropdownOpened:u,defaultDropdownOpened:d,onDropdownClose:f,onDropdownOpen:g,onFocus:y,onBlur:v,onClick:T,onChange:A,data:S,value:b,defaultValue:N,selectFirstOptionOnChange:I,onOptionSubmit:k,comboboxProps:O,readOnly:x,disabled:U,filter:z,limit:G,withScrollArea:X,maxDropdownHeight:te,size:de,id:re,renderOption:Ce,...ne}=t,ge=Fr(re),J=Rg(S),j=tl(J),[ie,ae]=Br({value:b,defaultValue:N,finalValue:"",onChange:A}),ke=hl({opened:u,defaultOpened:d,onDropdownOpen:g,onDropdownClose:()=>{f==null||f(),ke.resetSelectedOption()}}),{resolvedClassNames:Pe,resolvedStyles:pt}=yf({props:t,styles:s,classNames:r});return m.useEffect(()=>{I&&ke.selectFirstOption()},[I,ie]),m.createElement(Le,{store:ke,__staticSelector:"Autocomplete",classNames:Pe,styles:pt,unstyled:a,readOnly:x,onOptionSubmit:je=>{k==null||k(je),ae(j[je].label),ke.closeDropdown()},size:de,...O},m.createElement(Le.Target,null,m.createElement(vr,{ref:e,...ne,size:de,__staticSelector:"Autocomplete",disabled:U,readOnly:x,value:ie,onChange:je=>{ae(je.currentTarget.value),ke.openDropdown(),I&&ke.selectFirstOption()},onFocus:je=>{ke.openDropdown(),y==null||y(je)},onBlur:je=>{ke.closeDropdown(),v==null||v(je)},onClick:je=>{ke.openDropdown(),T==null||T(je)},classNames:Pe,styles:pt,unstyled:a,id:ge})),m.createElement(Kg,{data:J,hidden:x||U,filter:z,search:ie,limit:G,hiddenWhenEmpty:!0,withScrollArea:X,maxDropdownHeight:te,unstyled:a,labelId:`${ge}-label`,renderOption:Ce}))});gl.classes={...vr.classes,...Le.classes},gl.displayName="@mantine/core/Autocomplete";var vs={root:"m-77c9d27d",inner:"m-80f1301b",loader:"m-a25b86ee",label:"m-811560b9",section:"m-a74036a",group:"m-80d6d844"};const $g={orientation:"horizontal"},pb=(o,{borderWidth:e})=>({group:{"--button-border-width":Re(e)}}),pl=Se((o,e)=>{const t=oe("ButtonGroup",$g,o),{className:r,style:s,classNames:a,styles:c,unstyled:u,orientation:d,vars:f,borderWidth:g,variant:y,mod:v,...T}=oe("ButtonGroup",$g,o),A=We({name:"ButtonGroup",props:t,classes:vs,className:r,style:s,classNames:a,styles:c,unstyled:u,vars:f,varsResolver:pb,rootSelector:"group"});return m.createElement(he,{...A("group"),ref:e,variant:y,mod:[{"data-orientation":d},v],role:"group",...T})});pl.classes=vs,pl.displayName="@mantine/core/ButtonGroup";const mb={},yb=(o,{radius:e,color:t,gradient:r,variant:s,size:a,justify:c,autoContrast:u})=>{const d=o.variantColorResolver({color:t||o.primaryColor,theme:o,gradient:r,variant:s||"filled",autoContrast:u});return{root:{"--button-justify":c,"--button-height":gt(a,"button-height"),"--button-padding-x":gt(a,"button-padding-x"),"--button-fz":a!=null&&a.includes("compact")?Ft(a.replace("compact-","")):Ft(a),"--button-radius":e===void 0?void 0:po(e),"--button-bg":t||s?d.background:void 0,"--button-hover":t||s?d.hover:void 0,"--button-color":d.color,"--button-bd":t||s?d.border:void 0,"--button-hover-color":t||s?d.hoverColor:void 0}}},ci=Co((o,e)=>{const t=oe("Button",mb,o),{style:r,vars:s,className:a,color:c,disabled:u,children:d,leftSection:f,rightSection:g,fullWidth:y,variant:v,radius:T,loading:A,loaderProps:S,gradient:b,classNames:N,styles:I,unstyled:k,"data-disabled":O,autoContrast:x,mod:U,...z}=t,G=We({name:"Button",props:t,classes:vs,className:a,style:r,classNames:N,styles:I,unstyled:k,vars:s,varsResolver:yb}),X=!!f,te=!!g;return m.createElement(ei,{ref:e,...G("root",{active:!u&&!A&&!O}),unstyled:k,variant:v,disabled:u||A,mod:[{disabled:u||O,loading:A,block:y,"with-left-section":X,"with-right-section":te},U],...z},m.createElement(he,{component:"span",...G("loader"),"aria-hidden":!0},m.createElement(gs,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...S})),m.createElement("span",{...G("inner")},f&&m.createElement(he,{component:"span",...G("section"),mod:{position:"left"}},f),m.createElement(he,{component:"span",mod:{loading:A},...G("label")},d),g&&m.createElement(he,{component:"span",...G("section"),mod:{position:"right"}},g)))});ci.classes=vs,ci.displayName="@mantine/core/Button",ci.Group=pl;var Gg={root:"m-7485cace"};const Cb={},vb=(o,{size:e,fluid:t})=>({root:{"--container-size":t?void 0:gt(e,"container-size")}}),ml=Se((o,e)=>{const t=oe("Container",Cb,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,vars:d,fluid:f,mod:g,...y}=t,v=We({name:"Container",classes:Gg,props:t,className:s,style:a,classNames:r,styles:c,unstyled:u,vars:d,varsResolver:vb});return m.createElement(he,{ref:e,mod:[{fluid:f},g],...v("root"),...y})});ml.classes=Gg,ml.displayName="@mantine/core/Container";const wb={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},ws=Se((o,e)=>{const t=oe("Select",wb,o),{classNames:r,styles:s,unstyled:a,vars:c,dropdownOpened:u,defaultDropdownOpened:d,onDropdownClose:f,onDropdownOpen:g,onFocus:y,onBlur:v,onClick:T,onChange:A,data:S,value:b,defaultValue:N,selectFirstOptionOnChange:I,onOptionSubmit:k,comboboxProps:O,readOnly:x,disabled:U,filter:z,limit:G,withScrollArea:X,maxDropdownHeight:te,size:de,searchable:re,rightSection:Ce,checkIconPosition:ne,withCheckIcon:ge,nothingFoundMessage:J,name:j,form:ie,searchValue:ae,defaultSearchValue:ke,onSearchChange:Pe,allowDeselect:pt,error:je,rightSectionPointerEvents:Zn,id:Ot,clearable:sn,clearButtonProps:Hn,hiddenInputProps:$t,renderOption:Gt,onClear:er,...Fn}=t,an=m.useMemo(()=>Rg(S),[S]),zt=m.useMemo(()=>tl(an),[an]),Ne=Fr(Ot),[ot,wr]=Br({value:b,defaultValue:N,finalValue:null,onChange:A}),Ve=typeof ot=="string"?zt[ot]:void 0,[Bn,bn]=Br({value:ae,defaultValue:ke,finalValue:Ve?Ve.label:"",onChange:Pe}),et=hl({opened:u,defaultOpened:d,onDropdownOpen:()=>{g==null||g(),et.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{f==null||f(),et.resetSelectedOption()}}),{resolvedClassNames:mt,resolvedStyles:_n}=yf({props:t,styles:s,classNames:r});m.useEffect(()=>{I&&et.selectFirstOption()},[I,ot]),m.useEffect(()=>{b===null&&bn(""),typeof b=="string"&&Ve&&bn(Ve.label)},[b,Ve]);const qt=sn&&!!ot&&!U&&!x&&m.createElement(Le.ClearButton,{size:de,...Hn,onClear:()=>{wr(null,null),bn(""),er==null||er()}});return m.createElement(m.Fragment,null,m.createElement(Le,{store:et,__staticSelector:"Select",classNames:mt,styles:_n,unstyled:a,readOnly:x,onOptionSubmit:Nt=>{k==null||k(Nt);const _t=pt&&zt[Nt].value===ot?null:zt[Nt],As=_t?_t.value:null;wr(As,_t),bn(typeof As=="string"&&(_t==null?void 0:_t.label)||""),et.closeDropdown()},size:de,...O},m.createElement(Le.Target,{targetType:re?"input":"button"},m.createElement(vr,{id:Ne,ref:e,rightSection:Ce||qt||m.createElement(Le.Chevron,{size:de,error:je,unstyled:a}),rightSectionPointerEvents:Zn||(qt?"all":"none"),...Fn,size:de,__staticSelector:"Select",disabled:U,readOnly:x||!re,value:Bn,onChange:Nt=>{bn(Nt.currentTarget.value),et.openDropdown(),I&&et.selectFirstOption()},onFocus:Nt=>{re&&et.openDropdown(),y==null||y(Nt)},onBlur:Nt=>{var _t;re&&et.closeDropdown(),bn(ot!=null&&((_t=zt[ot])==null?void 0:_t.label)||""),v==null||v(Nt)},onClick:Nt=>{re?et.openDropdown():et.toggleDropdown(),T==null||T(Nt)},classNames:mt,styles:_n,unstyled:a,pointer:!re,error:je})),m.createElement(Kg,{data:an,hidden:x||U,filter:z,search:Bn,limit:G,hiddenWhenEmpty:!re||!J,withScrollArea:X,maxDropdownHeight:te,filterOptions:re&&(Ve==null?void 0:Ve.label)!==Bn,value:ot,checkIconPosition:ne,withCheckIcon:ge,nothingFoundMessage:J,unstyled:a,labelId:`${Ne}-label`,renderOption:Gt})),m.createElement("input",{type:"hidden",name:j,value:ot||"",form:ie,disabled:U,...$t}))});ws.classes={...vr.classes,...Le.classes},ws.displayName="@mantine/core/Select";const Tb={},zr=Se((o,e)=>{const t=oe("TextInput",Tb,o);return m.createElement(vr,{component:"input",ref:e,...t,__staticSelector:"TextInput"})});zr.classes=vr.classes,zr.displayName="@mantine/core/TextInput";const Eb=["h1","h2","h3","h4","h5","h6"];function Ab(o,e){const t=e!==void 0?e:`h${o}`;return Eb.includes(t)?{fontSize:`var(--mantine-${t}-font-size)`,fontWeight:`var(--mantine-${t}-font-weight)`,lineHeight:`var(--mantine-${t}-line-height)`}:{fontSize:Re(t),fontWeight:`var(--mantine-h${o}-font-weight)`,lineHeight:`var(--mantine-h${o}-line-height)`}}var zg={root:"m-8a5d1357"};const Sb={order:1},bb=(o,{order:e,size:t,lineClamp:r,textWrap:s})=>{const a=Ab(e,t);return{root:{"--title-fw":a.fontWeight,"--title-lh":a.lineHeight,"--title-fz":a.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":s}}},Ts=Se((o,e)=>{const t=oe("Title",Sb,o),{classNames:r,className:s,style:a,styles:c,unstyled:u,order:d,vars:f,size:g,variant:y,lineClamp:v,textWrap:T,mod:A,...S}=t,b=We({name:"Title",props:t,classes:zg,className:s,style:a,classNames:r,styles:c,unstyled:u,vars:f,varsResolver:bb});return[1,2,3,4,5,6].includes(d)?m.createElement(he,{...b("root"),component:`h${d}`,variant:y,ref:e,mod:[{order:d,"data-line-clamp":typeof v=="number"},A],size:g,...S}):null});Ts.classes=zg,Ts.displayName="@mantine/core/Title";const qg=25,_b=(o,e,t,r,s)=>{const a={SearchText:r,DictionaryUri:e[0].value,Limit:qg};o.api.searchInDictionaryV1List(a,t).then(c=>{var d;const u=c.data;if(u.count){const f=(d=u.dictionary)==null?void 0:d.classes;f&&s(f.map(g=>({value:g.uri,label:g.name})))}})},Ib=(o,e,t,r,s)=>{const a={SearchText:r,DictionaryUris:[e[0].value],Limit:qg};o.api.classSearchV1List(a,t).then(c=>{c.data.classes&&s(c.data.classes.map(u=>({value:u.uri,label:u.name})))})};function Rb({api:o,activeDomains:e,defaultValue:t,setActiveClassificationUri:r,accessToken:s}){const[a,c]=m.useState(t),[u,d]=m.useState([]),[f,g]=m.useState(""),[y]=gT(f,300),[v,T]=m.useState(!1),A=m.useRef(null),S={headers:{Accept:"text/plain"}};s!==""&&(S.headers={...S.headers,Authorization:"Bearer "+s});const b=O=>{e.length===1?_b(o,e,S,O,U=>d(U)):e.length>2?Ib(o,e,S,O,U=>d(U)):d([])},N=m.useCallback(O=>{g(O)},[]),I=m.useCallback(O=>{const x=u.find(U=>U.value===O);x&&(c(x),T(!1))},[u]),k=m.useCallback(O=>{O.key==="Enter"&&u[0]&&(g(u[0].label),I(u[0].value),A.current&&A.current.blur())},[u,I,A]);return m.useEffect(()=>{y!==""&&b(y)},[y]),m.useEffect(()=>{A.current&&A.current.focus()},[]),m.useEffect(()=>{t&&(g((t==null?void 0:t.label)||""),c(t),T(!1))},[t]),m.useEffect(()=>{a&&r(a.value)},[a]),me.jsx(gl,{data:u,placeholder:"bSDD search...",value:f,onChange:N,onOptionSubmit:I,onKeyDown:k,dropdownOpened:v,onDropdownOpen:()=>T(!0),ref:A,style:{width:"100%"}})}var Es={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Es.exports,function(o,e){(function(){var t,r="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",f=500,g="__lodash_placeholder__",y=1,v=2,T=4,A=1,S=2,b=1,N=2,I=4,k=8,O=16,x=32,U=64,z=128,G=256,X=512,te=30,de="...",re=800,Ce=16,ne=1,ge=2,J=3,j=1/0,ie=9007199254740991,ae=17976931348623157e292,ke=NaN,Pe=4294967295,pt=Pe-1,je=Pe>>>1,Zn=[["ary",z],["bind",b],["bindKey",N],["curry",k],["curryRight",O],["flip",X],["partial",x],["partialRight",U],["rearg",G]],Ot="[object Arguments]",sn="[object Array]",Hn="[object AsyncFunction]",$t="[object Boolean]",Gt="[object Date]",er="[object DOMException]",Fn="[object Error]",an="[object Function]",zt="[object GeneratorFunction]",Ne="[object Map]",ot="[object Number]",wr="[object Null]",Ve="[object Object]",Bn="[object Promise]",bn="[object Proxy]",et="[object RegExp]",mt="[object Set]",_n="[object String]",qt="[object Symbol]",Nt="[object Undefined]",_t="[object WeakMap]",As="[object WeakSet]",li="[object ArrayBuffer]",So="[object DataView]",vl="[object Float32Array]",wl="[object Float64Array]",Tl="[object Int8Array]",El="[object Int16Array]",Al="[object Int32Array]",Sl="[object Uint8Array]",bl="[object Uint8ClampedArray]",_l="[object Uint16Array]",Il="[object Uint32Array]",Zb=/\b__p \+= '';/g,e_=/\b(__p \+=) '' \+/g,t_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rp=/&(?:amp|lt|gt|quot|#39);/g,op=/[&<>"']/g,n_=RegExp(rp.source),r_=RegExp(op.source),o_=/<%-([\s\S]+?)%>/g,i_=/<%([\s\S]+?)%>/g,ip=/<%=([\s\S]+?)%>/g,s_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a_=/^\w*$/,c_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rl=/[\\^$.*+?()[\]{}|]/g,l_=RegExp(Rl.source),kl=/^\s+/,u_=/\s/,d_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,h_=/\{\n\/\* \[wrapped with (.+)\] \*/,f_=/,? & /,g_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,p_=/[()=,{}\[\]\/\s]/,m_=/\\(\\)?/g,y_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sp=/\w*$/,C_=/^[-+]0x[0-9a-f]+$/i,v_=/^0b[01]+$/i,w_=/^\[object .+?Constructor\]$/,T_=/^0o[0-7]+$/i,E_=/^(?:0|[1-9]\d*)$/,A_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ss=/($^)/,S_=/['\n\r\u2028\u2029\\]/g,bs="\\ud800-\\udfff",b_="\\u0300-\\u036f",__="\\ufe20-\\ufe2f",I_="\\u20d0-\\u20ff",ap=b_+__+I_,cp="\\u2700-\\u27bf",lp="a-z\\xdf-\\xf6\\xf8-\\xff",R_="\\xac\\xb1\\xd7\\xf7",k_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",P_="\\u2000-\\u206f",O_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",up="A-Z\\xc0-\\xd6\\xd8-\\xde",dp="\\ufe0e\\ufe0f",hp=R_+k_+P_+O_,Pl="[']",N_="["+bs+"]",fp="["+hp+"]",_s="["+ap+"]",gp="\\d+",x_="["+cp+"]",pp="["+lp+"]",mp="[^"+bs+hp+gp+cp+lp+up+"]",Ol="\\ud83c[\\udffb-\\udfff]",M_="(?:"+_s+"|"+Ol+")",yp="[^"+bs+"]",Nl="(?:\\ud83c[\\udde6-\\uddff]){2}",xl="[\\ud800-\\udbff][\\udc00-\\udfff]",bo="["+up+"]",Cp="\\u200d",vp="(?:"+pp+"|"+mp+")",L_="(?:"+bo+"|"+mp+")",wp="(?:"+Pl+"(?:d|ll|m|re|s|t|ve))?",Tp="(?:"+Pl+"(?:D|LL|M|RE|S|T|VE))?",Ep=M_+"?",Ap="["+dp+"]?",D_="(?:"+Cp+"(?:"+[yp,Nl,xl].join("|")+")"+Ap+Ep+")*",U_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",H_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sp=Ap+Ep+D_,F_="(?:"+[x_,Nl,xl].join("|")+")"+Sp,B_="(?:"+[yp+_s+"?",_s,Nl,xl,N_].join("|")+")",K_=RegExp(Pl,"g"),$_=RegExp(_s,"g"),Ml=RegExp(Ol+"(?="+Ol+")|"+B_+Sp,"g"),G_=RegExp([bo+"?"+pp+"+"+wp+"(?="+[fp,bo,"$"].join("|")+")",L_+"+"+Tp+"(?="+[fp,bo+vp,"$"].join("|")+")",bo+"?"+vp+"+"+wp,bo+"+"+Tp,H_,U_,gp,F_].join("|"),"g"),z_=RegExp("["+Cp+bs+ap+dp+"]"),q_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,W_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],V_=-1,ze={};ze[vl]=ze[wl]=ze[Tl]=ze[El]=ze[Al]=ze[Sl]=ze[bl]=ze[_l]=ze[Il]=!0,ze[Ot]=ze[sn]=ze[li]=ze[$t]=ze[So]=ze[Gt]=ze[Fn]=ze[an]=ze[Ne]=ze[ot]=ze[Ve]=ze[et]=ze[mt]=ze[_n]=ze[_t]=!1;var Ke={};Ke[Ot]=Ke[sn]=Ke[li]=Ke[So]=Ke[$t]=Ke[Gt]=Ke[vl]=Ke[wl]=Ke[Tl]=Ke[El]=Ke[Al]=Ke[Ne]=Ke[ot]=Ke[Ve]=Ke[et]=Ke[mt]=Ke[_n]=Ke[qt]=Ke[Sl]=Ke[bl]=Ke[_l]=Ke[Il]=!0,Ke[Fn]=Ke[an]=Ke[_t]=!1;var Y_={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},j_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Q_={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},J_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},X_=parseFloat,Z_=parseInt,bp=typeof Fo=="object"&&Fo&&Fo.Object===Object&&Fo,eI=typeof self=="object"&&self&&self.Object===Object&&self,yt=bp||eI||Function("return this")(),Ll=e&&!e.nodeType&&e,qr=Ll&&!0&&o&&!o.nodeType&&o,_p=qr&&qr.exports===Ll,Dl=_p&&bp.process,cn=function(){try{var R=qr&&qr.require&&qr.require("util").types;return R||Dl&&Dl.binding&&Dl.binding("util")}catch{}}(),Ip=cn&&cn.isArrayBuffer,Rp=cn&&cn.isDate,kp=cn&&cn.isMap,Pp=cn&&cn.isRegExp,Op=cn&&cn.isSet,Np=cn&&cn.isTypedArray;function Wt(R,H,L){switch(L.length){case 0:return R.call(H);case 1:return R.call(H,L[0]);case 2:return R.call(H,L[0],L[1]);case 3:return R.call(H,L[0],L[1],L[2])}return R.apply(H,L)}function tI(R,H,L,Q){for(var fe=-1,xe=R==null?0:R.length;++fe<xe;){var it=R[fe];H(Q,it,L(it),R)}return Q}function ln(R,H){for(var L=-1,Q=R==null?0:R.length;++L<Q&&H(R[L],L,R)!==!1;);return R}function nI(R,H){for(var L=R==null?0:R.length;L--&&H(R[L],L,R)!==!1;);return R}function xp(R,H){for(var L=-1,Q=R==null?0:R.length;++L<Q;)if(!H(R[L],L,R))return!1;return!0}function Tr(R,H){for(var L=-1,Q=R==null?0:R.length,fe=0,xe=[];++L<Q;){var it=R[L];H(it,L,R)&&(xe[fe++]=it)}return xe}function Is(R,H){var L=R==null?0:R.length;return!!L&&_o(R,H,0)>-1}function Ul(R,H,L){for(var Q=-1,fe=R==null?0:R.length;++Q<fe;)if(L(H,R[Q]))return!0;return!1}function qe(R,H){for(var L=-1,Q=R==null?0:R.length,fe=Array(Q);++L<Q;)fe[L]=H(R[L],L,R);return fe}function Er(R,H){for(var L=-1,Q=H.length,fe=R.length;++L<Q;)R[fe+L]=H[L];return R}function Hl(R,H,L,Q){var fe=-1,xe=R==null?0:R.length;for(Q&&xe&&(L=R[++fe]);++fe<xe;)L=H(L,R[fe],fe,R);return L}function rI(R,H,L,Q){var fe=R==null?0:R.length;for(Q&&fe&&(L=R[--fe]);fe--;)L=H(L,R[fe],fe,R);return L}function Fl(R,H){for(var L=-1,Q=R==null?0:R.length;++L<Q;)if(H(R[L],L,R))return!0;return!1}var oI=Bl("length");function iI(R){return R.split("")}function sI(R){return R.match(g_)||[]}function Mp(R,H,L){var Q;return L(R,function(fe,xe,it){if(H(fe,xe,it))return Q=xe,!1}),Q}function Rs(R,H,L,Q){for(var fe=R.length,xe=L+(Q?1:-1);Q?xe--:++xe<fe;)if(H(R[xe],xe,R))return xe;return-1}function _o(R,H,L){return H===H?CI(R,H,L):Rs(R,Lp,L)}function aI(R,H,L,Q){for(var fe=L-1,xe=R.length;++fe<xe;)if(Q(R[fe],H))return fe;return-1}function Lp(R){return R!==R}function Dp(R,H){var L=R==null?0:R.length;return L?$l(R,H)/L:ke}function Bl(R){return function(H){return H==null?t:H[R]}}function Kl(R){return function(H){return R==null?t:R[H]}}function Up(R,H,L,Q,fe){return fe(R,function(xe,it,Be){L=Q?(Q=!1,xe):H(L,xe,it,Be)}),L}function cI(R,H){var L=R.length;for(R.sort(H);L--;)R[L]=R[L].value;return R}function $l(R,H){for(var L,Q=-1,fe=R.length;++Q<fe;){var xe=H(R[Q]);xe!==t&&(L=L===t?xe:L+xe)}return L}function Gl(R,H){for(var L=-1,Q=Array(R);++L<R;)Q[L]=H(L);return Q}function lI(R,H){return qe(H,function(L){return[L,R[L]]})}function Hp(R){return R&&R.slice(0,$p(R)+1).replace(kl,"")}function Vt(R){return function(H){return R(H)}}function zl(R,H){return qe(H,function(L){return R[L]})}function ui(R,H){return R.has(H)}function Fp(R,H){for(var L=-1,Q=R.length;++L<Q&&_o(H,R[L],0)>-1;);return L}function Bp(R,H){for(var L=R.length;L--&&_o(H,R[L],0)>-1;);return L}function uI(R,H){for(var L=R.length,Q=0;L--;)R[L]===H&&++Q;return Q}var dI=Kl(Y_),hI=Kl(j_);function fI(R){return"\\"+J_[R]}function gI(R,H){return R==null?t:R[H]}function Io(R){return z_.test(R)}function pI(R){return q_.test(R)}function mI(R){for(var H,L=[];!(H=R.next()).done;)L.push(H.value);return L}function ql(R){var H=-1,L=Array(R.size);return R.forEach(function(Q,fe){L[++H]=[fe,Q]}),L}function Kp(R,H){return function(L){return R(H(L))}}function Ar(R,H){for(var L=-1,Q=R.length,fe=0,xe=[];++L<Q;){var it=R[L];(it===H||it===g)&&(R[L]=g,xe[fe++]=L)}return xe}function ks(R){var H=-1,L=Array(R.size);return R.forEach(function(Q){L[++H]=Q}),L}function yI(R){var H=-1,L=Array(R.size);return R.forEach(function(Q){L[++H]=[Q,Q]}),L}function CI(R,H,L){for(var Q=L-1,fe=R.length;++Q<fe;)if(R[Q]===H)return Q;return-1}function vI(R,H,L){for(var Q=L+1;Q--;)if(R[Q]===H)return Q;return Q}function Ro(R){return Io(R)?TI(R):oI(R)}function In(R){return Io(R)?EI(R):iI(R)}function $p(R){for(var H=R.length;H--&&u_.test(R.charAt(H)););return H}var wI=Kl(Q_);function TI(R){for(var H=Ml.lastIndex=0;Ml.test(R);)++H;return H}function EI(R){return R.match(Ml)||[]}function AI(R){return R.match(G_)||[]}var SI=function R(H){H=H==null?yt:ko.defaults(yt.Object(),H,ko.pick(yt,W_));var L=H.Array,Q=H.Date,fe=H.Error,xe=H.Function,it=H.Math,Be=H.Object,Wl=H.RegExp,bI=H.String,un=H.TypeError,Ps=L.prototype,_I=xe.prototype,Po=Be.prototype,Os=H["__core-js_shared__"],Ns=_I.toString,De=Po.hasOwnProperty,II=0,Gp=function(){var n=/[^.]+$/.exec(Os&&Os.keys&&Os.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),xs=Po.toString,RI=Ns.call(Be),kI=yt._,PI=Wl("^"+Ns.call(De).replace(Rl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ms=_p?H.Buffer:t,Sr=H.Symbol,Ls=H.Uint8Array,zp=Ms?Ms.allocUnsafe:t,Ds=Kp(Be.getPrototypeOf,Be),qp=Be.create,Wp=Po.propertyIsEnumerable,Us=Ps.splice,Vp=Sr?Sr.isConcatSpreadable:t,di=Sr?Sr.iterator:t,Wr=Sr?Sr.toStringTag:t,Hs=function(){try{var n=Jr(Be,"defineProperty");return n({},"",{}),n}catch{}}(),OI=H.clearTimeout!==yt.clearTimeout&&H.clearTimeout,NI=Q&&Q.now!==yt.Date.now&&Q.now,xI=H.setTimeout!==yt.setTimeout&&H.setTimeout,Fs=it.ceil,Bs=it.floor,Vl=Be.getOwnPropertySymbols,MI=Ms?Ms.isBuffer:t,Yp=H.isFinite,LI=Ps.join,DI=Kp(Be.keys,Be),st=it.max,St=it.min,UI=Q.now,HI=H.parseInt,jp=it.random,FI=Ps.reverse,Yl=Jr(H,"DataView"),hi=Jr(H,"Map"),jl=Jr(H,"Promise"),Oo=Jr(H,"Set"),fi=Jr(H,"WeakMap"),gi=Jr(Be,"create"),Ks=fi&&new fi,No={},BI=Xr(Yl),KI=Xr(hi),$I=Xr(jl),GI=Xr(Oo),zI=Xr(fi),$s=Sr?Sr.prototype:t,pi=$s?$s.valueOf:t,Qp=$s?$s.toString:t;function C(n){if(Qe(n)&&!pe(n)&&!(n instanceof be)){if(n instanceof dn)return n;if(De.call(n,"__wrapped__"))return Jm(n)}return new dn(n)}var xo=function(){function n(){}return function(i){if(!Ye(i))return{};if(qp)return qp(i);n.prototype=i;var l=new n;return n.prototype=t,l}}();function Gs(){}function dn(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}C.templateSettings={escape:o_,evaluate:i_,interpolate:ip,variable:"",imports:{_:C}},C.prototype=Gs.prototype,C.prototype.constructor=C,dn.prototype=xo(Gs.prototype),dn.prototype.constructor=dn;function be(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pe,this.__views__=[]}function qI(){var n=new be(this.__wrapped__);return n.__actions__=xt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=xt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=xt(this.__views__),n}function WI(){if(this.__filtered__){var n=new be(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function VI(){var n=this.__wrapped__.value(),i=this.__dir__,l=pe(n),h=i<0,p=l?n.length:0,w=ik(0,p,this.__views__),E=w.start,_=w.end,P=_-E,F=h?_:E-1,B=this.__iteratees__,K=B.length,W=0,ee=St(P,this.__takeCount__);if(!l||!h&&p==P&&ee==P)return wm(n,this.__actions__);var ce=[];e:for(;P--&&W<ee;){F+=i;for(var ve=-1,le=n[F];++ve<K;){var Ae=B[ve],_e=Ae.iteratee,Qt=Ae.type,kt=_e(le);if(Qt==ge)le=kt;else if(!kt){if(Qt==ne)continue e;break e}}ce[W++]=le}return ce}be.prototype=xo(Gs.prototype),be.prototype.constructor=be;function Vr(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var h=n[i];this.set(h[0],h[1])}}function YI(){this.__data__=gi?gi(null):{},this.size=0}function jI(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}function QI(n){var i=this.__data__;if(gi){var l=i[n];return l===d?t:l}return De.call(i,n)?i[n]:t}function JI(n){var i=this.__data__;return gi?i[n]!==t:De.call(i,n)}function XI(n,i){var l=this.__data__;return this.size+=this.has(n)?0:1,l[n]=gi&&i===t?d:i,this}Vr.prototype.clear=YI,Vr.prototype.delete=jI,Vr.prototype.get=QI,Vr.prototype.has=JI,Vr.prototype.set=XI;function tr(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var h=n[i];this.set(h[0],h[1])}}function ZI(){this.__data__=[],this.size=0}function eR(n){var i=this.__data__,l=zs(i,n);if(l<0)return!1;var h=i.length-1;return l==h?i.pop():Us.call(i,l,1),--this.size,!0}function tR(n){var i=this.__data__,l=zs(i,n);return l<0?t:i[l][1]}function nR(n){return zs(this.__data__,n)>-1}function rR(n,i){var l=this.__data__,h=zs(l,n);return h<0?(++this.size,l.push([n,i])):l[h][1]=i,this}tr.prototype.clear=ZI,tr.prototype.delete=eR,tr.prototype.get=tR,tr.prototype.has=nR,tr.prototype.set=rR;function nr(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var h=n[i];this.set(h[0],h[1])}}function oR(){this.size=0,this.__data__={hash:new Vr,map:new(hi||tr),string:new Vr}}function iR(n){var i=na(this,n).delete(n);return this.size-=i?1:0,i}function sR(n){return na(this,n).get(n)}function aR(n){return na(this,n).has(n)}function cR(n,i){var l=na(this,n),h=l.size;return l.set(n,i),this.size+=l.size==h?0:1,this}nr.prototype.clear=oR,nr.prototype.delete=iR,nr.prototype.get=sR,nr.prototype.has=aR,nr.prototype.set=cR;function Yr(n){var i=-1,l=n==null?0:n.length;for(this.__data__=new nr;++i<l;)this.add(n[i])}function lR(n){return this.__data__.set(n,d),this}function uR(n){return this.__data__.has(n)}Yr.prototype.add=Yr.prototype.push=lR,Yr.prototype.has=uR;function Rn(n){var i=this.__data__=new tr(n);this.size=i.size}function dR(){this.__data__=new tr,this.size=0}function hR(n){var i=this.__data__,l=i.delete(n);return this.size=i.size,l}function fR(n){return this.__data__.get(n)}function gR(n){return this.__data__.has(n)}function pR(n,i){var l=this.__data__;if(l instanceof tr){var h=l.__data__;if(!hi||h.length<s-1)return h.push([n,i]),this.size=++l.size,this;l=this.__data__=new nr(h)}return l.set(n,i),this.size=l.size,this}Rn.prototype.clear=dR,Rn.prototype.delete=hR,Rn.prototype.get=fR,Rn.prototype.has=gR,Rn.prototype.set=pR;function Jp(n,i){var l=pe(n),h=!l&&Zr(n),p=!l&&!h&&kr(n),w=!l&&!h&&!p&&Uo(n),E=l||h||p||w,_=E?Gl(n.length,bI):[],P=_.length;for(var F in n)(i||De.call(n,F))&&!(E&&(F=="length"||p&&(F=="offset"||F=="parent")||w&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||sr(F,P)))&&_.push(F);return _}function Xp(n){var i=n.length;return i?n[su(0,i-1)]:t}function mR(n,i){return ra(xt(n),jr(i,0,n.length))}function yR(n){return ra(xt(n))}function Ql(n,i,l){(l!==t&&!kn(n[i],l)||l===t&&!(i in n))&&rr(n,i,l)}function mi(n,i,l){var h=n[i];(!(De.call(n,i)&&kn(h,l))||l===t&&!(i in n))&&rr(n,i,l)}function zs(n,i){for(var l=n.length;l--;)if(kn(n[l][0],i))return l;return-1}function CR(n,i,l,h){return br(n,function(p,w,E){i(h,p,l(p),E)}),h}function Zp(n,i){return n&&$n(i,ht(i),n)}function vR(n,i){return n&&$n(i,Lt(i),n)}function rr(n,i,l){i=="__proto__"&&Hs?Hs(n,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):n[i]=l}function Jl(n,i){for(var l=-1,h=i.length,p=L(h),w=n==null;++l<h;)p[l]=w?t:Ou(n,i[l]);return p}function jr(n,i,l){return n===n&&(l!==t&&(n=n<=l?n:l),i!==t&&(n=n>=i?n:i)),n}function hn(n,i,l,h,p,w){var E,_=i&y,P=i&v,F=i&T;if(l&&(E=p?l(n,h,p,w):l(n)),E!==t)return E;if(!Ye(n))return n;var B=pe(n);if(B){if(E=ak(n),!_)return xt(n,E)}else{var K=bt(n),W=K==an||K==zt;if(kr(n))return Am(n,_);if(K==Ve||K==Ot||W&&!p){if(E=P||W?{}:$m(n),!_)return P?QR(n,vR(E,n)):jR(n,Zp(E,n))}else{if(!Ke[K])return p?n:{};E=ck(n,K,_)}}w||(w=new Rn);var ee=w.get(n);if(ee)return ee;w.set(n,E),yy(n)?n.forEach(function(le){E.add(hn(le,i,l,le,n,w))}):py(n)&&n.forEach(function(le,Ae){E.set(Ae,hn(le,i,l,Ae,n,w))});var ce=F?P?yu:mu:P?Lt:ht,ve=B?t:ce(n);return ln(ve||n,function(le,Ae){ve&&(Ae=le,le=n[Ae]),mi(E,Ae,hn(le,i,l,Ae,n,w))}),E}function wR(n){var i=ht(n);return function(l){return em(l,n,i)}}function em(n,i,l){var h=l.length;if(n==null)return!h;for(n=Be(n);h--;){var p=l[h],w=i[p],E=n[p];if(E===t&&!(p in n)||!w(E))return!1}return!0}function tm(n,i,l){if(typeof n!="function")throw new un(c);return Ai(function(){n.apply(t,l)},i)}function yi(n,i,l,h){var p=-1,w=Is,E=!0,_=n.length,P=[],F=i.length;if(!_)return P;l&&(i=qe(i,Vt(l))),h?(w=Ul,E=!1):i.length>=s&&(w=ui,E=!1,i=new Yr(i));e:for(;++p<_;){var B=n[p],K=l==null?B:l(B);if(B=h||B!==0?B:0,E&&K===K){for(var W=F;W--;)if(i[W]===K)continue e;P.push(B)}else w(i,K,h)||P.push(B)}return P}var br=Rm(Kn),nm=Rm(Zl,!0);function TR(n,i){var l=!0;return br(n,function(h,p,w){return l=!!i(h,p,w),l}),l}function qs(n,i,l){for(var h=-1,p=n.length;++h<p;){var w=n[h],E=i(w);if(E!=null&&(_===t?E===E&&!jt(E):l(E,_)))var _=E,P=w}return P}function ER(n,i,l,h){var p=n.length;for(l=ye(l),l<0&&(l=-l>p?0:p+l),h=h===t||h>p?p:ye(h),h<0&&(h+=p),h=l>h?0:vy(h);l<h;)n[l++]=i;return n}function rm(n,i){var l=[];return br(n,function(h,p,w){i(h,p,w)&&l.push(h)}),l}function Ct(n,i,l,h,p){var w=-1,E=n.length;for(l||(l=uk),p||(p=[]);++w<E;){var _=n[w];i>0&&l(_)?i>1?Ct(_,i-1,l,h,p):Er(p,_):h||(p[p.length]=_)}return p}var Xl=km(),om=km(!0);function Kn(n,i){return n&&Xl(n,i,ht)}function Zl(n,i){return n&&om(n,i,ht)}function Ws(n,i){return Tr(i,function(l){return ar(n[l])})}function Qr(n,i){i=Ir(i,n);for(var l=0,h=i.length;n!=null&&l<h;)n=n[Gn(i[l++])];return l&&l==h?n:t}function im(n,i,l){var h=i(n);return pe(n)?h:Er(h,l(n))}function It(n){return n==null?n===t?Nt:wr:Wr&&Wr in Be(n)?ok(n):yk(n)}function eu(n,i){return n>i}function AR(n,i){return n!=null&&De.call(n,i)}function SR(n,i){return n!=null&&i in Be(n)}function bR(n,i,l){return n>=St(i,l)&&n<st(i,l)}function tu(n,i,l){for(var h=l?Ul:Is,p=n[0].length,w=n.length,E=w,_=L(w),P=1/0,F=[];E--;){var B=n[E];E&&i&&(B=qe(B,Vt(i))),P=St(B.length,P),_[E]=!l&&(i||p>=120&&B.length>=120)?new Yr(E&&B):t}B=n[0];var K=-1,W=_[0];e:for(;++K<p&&F.length<P;){var ee=B[K],ce=i?i(ee):ee;if(ee=l||ee!==0?ee:0,!(W?ui(W,ce):h(F,ce,l))){for(E=w;--E;){var ve=_[E];if(!(ve?ui(ve,ce):h(n[E],ce,l)))continue e}W&&W.push(ce),F.push(ee)}}return F}function _R(n,i,l,h){return Kn(n,function(p,w,E){i(h,l(p),w,E)}),h}function Ci(n,i,l){i=Ir(i,n),n=Wm(n,i);var h=n==null?n:n[Gn(gn(i))];return h==null?t:Wt(h,n,l)}function sm(n){return Qe(n)&&It(n)==Ot}function IR(n){return Qe(n)&&It(n)==li}function RR(n){return Qe(n)&&It(n)==Gt}function vi(n,i,l,h,p){return n===i?!0:n==null||i==null||!Qe(n)&&!Qe(i)?n!==n&&i!==i:kR(n,i,l,h,vi,p)}function kR(n,i,l,h,p,w){var E=pe(n),_=pe(i),P=E?sn:bt(n),F=_?sn:bt(i);P=P==Ot?Ve:P,F=F==Ot?Ve:F;var B=P==Ve,K=F==Ve,W=P==F;if(W&&kr(n)){if(!kr(i))return!1;E=!0,B=!1}if(W&&!B)return w||(w=new Rn),E||Uo(n)?Fm(n,i,l,h,p,w):nk(n,i,P,l,h,p,w);if(!(l&A)){var ee=B&&De.call(n,"__wrapped__"),ce=K&&De.call(i,"__wrapped__");if(ee||ce){var ve=ee?n.value():n,le=ce?i.value():i;return w||(w=new Rn),p(ve,le,l,h,w)}}return W?(w||(w=new Rn),rk(n,i,l,h,p,w)):!1}function PR(n){return Qe(n)&&bt(n)==Ne}function nu(n,i,l,h){var p=l.length,w=p,E=!h;if(n==null)return!w;for(n=Be(n);p--;){var _=l[p];if(E&&_[2]?_[1]!==n[_[0]]:!(_[0]in n))return!1}for(;++p<w;){_=l[p];var P=_[0],F=n[P],B=_[1];if(E&&_[2]){if(F===t&&!(P in n))return!1}else{var K=new Rn;if(h)var W=h(F,B,P,n,i,K);if(!(W===t?vi(B,F,A|S,h,K):W))return!1}}return!0}function am(n){if(!Ye(n)||hk(n))return!1;var i=ar(n)?PI:w_;return i.test(Xr(n))}function OR(n){return Qe(n)&&It(n)==et}function NR(n){return Qe(n)&&bt(n)==mt}function xR(n){return Qe(n)&&la(n.length)&&!!ze[It(n)]}function cm(n){return typeof n=="function"?n:n==null?Dt:typeof n=="object"?pe(n)?dm(n[0],n[1]):um(n):Py(n)}function ru(n){if(!Ei(n))return DI(n);var i=[];for(var l in Be(n))De.call(n,l)&&l!="constructor"&&i.push(l);return i}function MR(n){if(!Ye(n))return mk(n);var i=Ei(n),l=[];for(var h in n)h=="constructor"&&(i||!De.call(n,h))||l.push(h);return l}function ou(n,i){return n<i}function lm(n,i){var l=-1,h=Mt(n)?L(n.length):[];return br(n,function(p,w,E){h[++l]=i(p,w,E)}),h}function um(n){var i=vu(n);return i.length==1&&i[0][2]?zm(i[0][0],i[0][1]):function(l){return l===n||nu(l,n,i)}}function dm(n,i){return Tu(n)&&Gm(i)?zm(Gn(n),i):function(l){var h=Ou(l,n);return h===t&&h===i?Nu(l,n):vi(i,h,A|S)}}function Vs(n,i,l,h,p){n!==i&&Xl(i,function(w,E){if(p||(p=new Rn),Ye(w))LR(n,i,E,l,Vs,h,p);else{var _=h?h(Au(n,E),w,E+"",n,i,p):t;_===t&&(_=w),Ql(n,E,_)}},Lt)}function LR(n,i,l,h,p,w,E){var _=Au(n,l),P=Au(i,l),F=E.get(P);if(F){Ql(n,l,F);return}var B=w?w(_,P,l+"",n,i,E):t,K=B===t;if(K){var W=pe(P),ee=!W&&kr(P),ce=!W&&!ee&&Uo(P);B=P,W||ee||ce?pe(_)?B=_:Je(_)?B=xt(_):ee?(K=!1,B=Am(P,!0)):ce?(K=!1,B=Sm(P,!0)):B=[]:Si(P)||Zr(P)?(B=_,Zr(_)?B=wy(_):(!Ye(_)||ar(_))&&(B=$m(P))):K=!1}K&&(E.set(P,B),p(B,P,h,w,E),E.delete(P)),Ql(n,l,B)}function hm(n,i){var l=n.length;if(l)return i+=i<0?l:0,sr(i,l)?n[i]:t}function fm(n,i,l){i.length?i=qe(i,function(w){return pe(w)?function(E){return Qr(E,w.length===1?w[0]:w)}:w}):i=[Dt];var h=-1;i=qe(i,Vt(se()));var p=lm(n,function(w,E,_){var P=qe(i,function(F){return F(w)});return{criteria:P,index:++h,value:w}});return cI(p,function(w,E){return YR(w,E,l)})}function DR(n,i){return gm(n,i,function(l,h){return Nu(n,h)})}function gm(n,i,l){for(var h=-1,p=i.length,w={};++h<p;){var E=i[h],_=Qr(n,E);l(_,E)&&wi(w,Ir(E,n),_)}return w}function UR(n){return function(i){return Qr(i,n)}}function iu(n,i,l,h){var p=h?aI:_o,w=-1,E=i.length,_=n;for(n===i&&(i=xt(i)),l&&(_=qe(n,Vt(l)));++w<E;)for(var P=0,F=i[w],B=l?l(F):F;(P=p(_,B,P,h))>-1;)_!==n&&Us.call(_,P,1),Us.call(n,P,1);return n}function pm(n,i){for(var l=n?i.length:0,h=l-1;l--;){var p=i[l];if(l==h||p!==w){var w=p;sr(p)?Us.call(n,p,1):lu(n,p)}}return n}function su(n,i){return n+Bs(jp()*(i-n+1))}function HR(n,i,l,h){for(var p=-1,w=st(Fs((i-n)/(l||1)),0),E=L(w);w--;)E[h?w:++p]=n,n+=l;return E}function au(n,i){var l="";if(!n||i<1||i>ie)return l;do i%2&&(l+=n),i=Bs(i/2),i&&(n+=n);while(i);return l}function Te(n,i){return Su(qm(n,i,Dt),n+"")}function FR(n){return Xp(Ho(n))}function BR(n,i){var l=Ho(n);return ra(l,jr(i,0,l.length))}function wi(n,i,l,h){if(!Ye(n))return n;i=Ir(i,n);for(var p=-1,w=i.length,E=w-1,_=n;_!=null&&++p<w;){var P=Gn(i[p]),F=l;if(P==="__proto__"||P==="constructor"||P==="prototype")return n;if(p!=E){var B=_[P];F=h?h(B,P,_):t,F===t&&(F=Ye(B)?B:sr(i[p+1])?[]:{})}mi(_,P,F),_=_[P]}return n}var mm=Ks?function(n,i){return Ks.set(n,i),n}:Dt,KR=Hs?function(n,i){return Hs(n,"toString",{configurable:!0,enumerable:!1,value:Mu(i),writable:!0})}:Dt;function $R(n){return ra(Ho(n))}function fn(n,i,l){var h=-1,p=n.length;i<0&&(i=-i>p?0:p+i),l=l>p?p:l,l<0&&(l+=p),p=i>l?0:l-i>>>0,i>>>=0;for(var w=L(p);++h<p;)w[h]=n[h+i];return w}function GR(n,i){var l;return br(n,function(h,p,w){return l=i(h,p,w),!l}),!!l}function Ys(n,i,l){var h=0,p=n==null?h:n.length;if(typeof i=="number"&&i===i&&p<=je){for(;h<p;){var w=h+p>>>1,E=n[w];E!==null&&!jt(E)&&(l?E<=i:E<i)?h=w+1:p=w}return p}return cu(n,i,Dt,l)}function cu(n,i,l,h){var p=0,w=n==null?0:n.length;if(w===0)return 0;i=l(i);for(var E=i!==i,_=i===null,P=jt(i),F=i===t;p<w;){var B=Bs((p+w)/2),K=l(n[B]),W=K!==t,ee=K===null,ce=K===K,ve=jt(K);if(E)var le=h||ce;else F?le=ce&&(h||W):_?le=ce&&W&&(h||!ee):P?le=ce&&W&&!ee&&(h||!ve):ee||ve?le=!1:le=h?K<=i:K<i;le?p=B+1:w=B}return St(w,pt)}function ym(n,i){for(var l=-1,h=n.length,p=0,w=[];++l<h;){var E=n[l],_=i?i(E):E;if(!l||!kn(_,P)){var P=_;w[p++]=E===0?0:E}}return w}function Cm(n){return typeof n=="number"?n:jt(n)?ke:+n}function Yt(n){if(typeof n=="string")return n;if(pe(n))return qe(n,Yt)+"";if(jt(n))return Qp?Qp.call(n):"";var i=n+"";return i=="0"&&1/n==-j?"-0":i}function _r(n,i,l){var h=-1,p=Is,w=n.length,E=!0,_=[],P=_;if(l)E=!1,p=Ul;else if(w>=s){var F=i?null:ek(n);if(F)return ks(F);E=!1,p=ui,P=new Yr}else P=i?[]:_;e:for(;++h<w;){var B=n[h],K=i?i(B):B;if(B=l||B!==0?B:0,E&&K===K){for(var W=P.length;W--;)if(P[W]===K)continue e;i&&P.push(K),_.push(B)}else p(P,K,l)||(P!==_&&P.push(K),_.push(B))}return _}function lu(n,i){return i=Ir(i,n),n=Wm(n,i),n==null||delete n[Gn(gn(i))]}function vm(n,i,l,h){return wi(n,i,l(Qr(n,i)),h)}function js(n,i,l,h){for(var p=n.length,w=h?p:-1;(h?w--:++w<p)&&i(n[w],w,n););return l?fn(n,h?0:w,h?w+1:p):fn(n,h?w+1:0,h?p:w)}function wm(n,i){var l=n;return l instanceof be&&(l=l.value()),Hl(i,function(h,p){return p.func.apply(p.thisArg,Er([h],p.args))},l)}function uu(n,i,l){var h=n.length;if(h<2)return h?_r(n[0]):[];for(var p=-1,w=L(h);++p<h;)for(var E=n[p],_=-1;++_<h;)_!=p&&(w[p]=yi(w[p]||E,n[_],i,l));return _r(Ct(w,1),i,l)}function Tm(n,i,l){for(var h=-1,p=n.length,w=i.length,E={};++h<p;){var _=h<w?i[h]:t;l(E,n[h],_)}return E}function du(n){return Je(n)?n:[]}function hu(n){return typeof n=="function"?n:Dt}function Ir(n,i){return pe(n)?n:Tu(n,i)?[n]:Qm(Me(n))}var zR=Te;function Rr(n,i,l){var h=n.length;return l=l===t?h:l,!i&&l>=h?n:fn(n,i,l)}var Em=OI||function(n){return yt.clearTimeout(n)};function Am(n,i){if(i)return n.slice();var l=n.length,h=zp?zp(l):new n.constructor(l);return n.copy(h),h}function fu(n){var i=new n.constructor(n.byteLength);return new Ls(i).set(new Ls(n)),i}function qR(n,i){var l=i?fu(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.byteLength)}function WR(n){var i=new n.constructor(n.source,sp.exec(n));return i.lastIndex=n.lastIndex,i}function VR(n){return pi?Be(pi.call(n)):{}}function Sm(n,i){var l=i?fu(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.length)}function bm(n,i){if(n!==i){var l=n!==t,h=n===null,p=n===n,w=jt(n),E=i!==t,_=i===null,P=i===i,F=jt(i);if(!_&&!F&&!w&&n>i||w&&E&&P&&!_&&!F||h&&E&&P||!l&&P||!p)return 1;if(!h&&!w&&!F&&n<i||F&&l&&p&&!h&&!w||_&&l&&p||!E&&p||!P)return-1}return 0}function YR(n,i,l){for(var h=-1,p=n.criteria,w=i.criteria,E=p.length,_=l.length;++h<E;){var P=bm(p[h],w[h]);if(P){if(h>=_)return P;var F=l[h];return P*(F=="desc"?-1:1)}}return n.index-i.index}function _m(n,i,l,h){for(var p=-1,w=n.length,E=l.length,_=-1,P=i.length,F=st(w-E,0),B=L(P+F),K=!h;++_<P;)B[_]=i[_];for(;++p<E;)(K||p<w)&&(B[l[p]]=n[p]);for(;F--;)B[_++]=n[p++];return B}function Im(n,i,l,h){for(var p=-1,w=n.length,E=-1,_=l.length,P=-1,F=i.length,B=st(w-_,0),K=L(B+F),W=!h;++p<B;)K[p]=n[p];for(var ee=p;++P<F;)K[ee+P]=i[P];for(;++E<_;)(W||p<w)&&(K[ee+l[E]]=n[p++]);return K}function xt(n,i){var l=-1,h=n.length;for(i||(i=L(h));++l<h;)i[l]=n[l];return i}function $n(n,i,l,h){var p=!l;l||(l={});for(var w=-1,E=i.length;++w<E;){var _=i[w],P=h?h(l[_],n[_],_,l,n):t;P===t&&(P=n[_]),p?rr(l,_,P):mi(l,_,P)}return l}function jR(n,i){return $n(n,wu(n),i)}function QR(n,i){return $n(n,Bm(n),i)}function Qs(n,i){return function(l,h){var p=pe(l)?tI:CR,w=i?i():{};return p(l,n,se(h,2),w)}}function Mo(n){return Te(function(i,l){var h=-1,p=l.length,w=p>1?l[p-1]:t,E=p>2?l[2]:t;for(w=n.length>3&&typeof w=="function"?(p--,w):t,E&&Rt(l[0],l[1],E)&&(w=p<3?t:w,p=1),i=Be(i);++h<p;){var _=l[h];_&&n(i,_,h,w)}return i})}function Rm(n,i){return function(l,h){if(l==null)return l;if(!Mt(l))return n(l,h);for(var p=l.length,w=i?p:-1,E=Be(l);(i?w--:++w<p)&&h(E[w],w,E)!==!1;);return l}}function km(n){return function(i,l,h){for(var p=-1,w=Be(i),E=h(i),_=E.length;_--;){var P=E[n?_:++p];if(l(w[P],P,w)===!1)break}return i}}function JR(n,i,l){var h=i&b,p=Ti(n);function w(){var E=this&&this!==yt&&this instanceof w?p:n;return E.apply(h?l:this,arguments)}return w}function Pm(n){return function(i){i=Me(i);var l=Io(i)?In(i):t,h=l?l[0]:i.charAt(0),p=l?Rr(l,1).join(""):i.slice(1);return h[n]()+p}}function Lo(n){return function(i){return Hl(Ry(Iy(i).replace(K_,"")),n,"")}}function Ti(n){return function(){var i=arguments;switch(i.length){case 0:return new n;case 1:return new n(i[0]);case 2:return new n(i[0],i[1]);case 3:return new n(i[0],i[1],i[2]);case 4:return new n(i[0],i[1],i[2],i[3]);case 5:return new n(i[0],i[1],i[2],i[3],i[4]);case 6:return new n(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new n(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var l=xo(n.prototype),h=n.apply(l,i);return Ye(h)?h:l}}function XR(n,i,l){var h=Ti(n);function p(){for(var w=arguments.length,E=L(w),_=w,P=Do(p);_--;)E[_]=arguments[_];var F=w<3&&E[0]!==P&&E[w-1]!==P?[]:Ar(E,P);if(w-=F.length,w<l)return Lm(n,i,Js,p.placeholder,t,E,F,t,t,l-w);var B=this&&this!==yt&&this instanceof p?h:n;return Wt(B,this,E)}return p}function Om(n){return function(i,l,h){var p=Be(i);if(!Mt(i)){var w=se(l,3);i=ht(i),l=function(_){return w(p[_],_,p)}}var E=n(i,l,h);return E>-1?p[w?i[E]:E]:t}}function Nm(n){return ir(function(i){var l=i.length,h=l,p=dn.prototype.thru;for(n&&i.reverse();h--;){var w=i[h];if(typeof w!="function")throw new un(c);if(p&&!E&&ta(w)=="wrapper")var E=new dn([],!0)}for(h=E?h:l;++h<l;){w=i[h];var _=ta(w),P=_=="wrapper"?Cu(w):t;P&&Eu(P[0])&&P[1]==(z|k|x|G)&&!P[4].length&&P[9]==1?E=E[ta(P[0])].apply(E,P[3]):E=w.length==1&&Eu(w)?E[_]():E.thru(w)}return function(){var F=arguments,B=F[0];if(E&&F.length==1&&pe(B))return E.plant(B).value();for(var K=0,W=l?i[K].apply(this,F):B;++K<l;)W=i[K].call(this,W);return W}})}function Js(n,i,l,h,p,w,E,_,P,F){var B=i&z,K=i&b,W=i&N,ee=i&(k|O),ce=i&X,ve=W?t:Ti(n);function le(){for(var Ae=arguments.length,_e=L(Ae),Qt=Ae;Qt--;)_e[Qt]=arguments[Qt];if(ee)var kt=Do(le),Jt=uI(_e,kt);if(h&&(_e=_m(_e,h,p,ee)),w&&(_e=Im(_e,w,E,ee)),Ae-=Jt,ee&&Ae<F){var Xe=Ar(_e,kt);return Lm(n,i,Js,le.placeholder,l,_e,Xe,_,P,F-Ae)}var Pn=K?l:this,lr=W?Pn[n]:n;return Ae=_e.length,_?_e=Ck(_e,_):ce&&Ae>1&&_e.reverse(),B&&P<Ae&&(_e.length=P),this&&this!==yt&&this instanceof le&&(lr=ve||Ti(lr)),lr.apply(Pn,_e)}return le}function xm(n,i){return function(l,h){return _R(l,n,i(h),{})}}function Xs(n,i){return function(l,h){var p;if(l===t&&h===t)return i;if(l!==t&&(p=l),h!==t){if(p===t)return h;typeof l=="string"||typeof h=="string"?(l=Yt(l),h=Yt(h)):(l=Cm(l),h=Cm(h)),p=n(l,h)}return p}}function gu(n){return ir(function(i){return i=qe(i,Vt(se())),Te(function(l){var h=this;return n(i,function(p){return Wt(p,h,l)})})})}function Zs(n,i){i=i===t?" ":Yt(i);var l=i.length;if(l<2)return l?au(i,n):i;var h=au(i,Fs(n/Ro(i)));return Io(i)?Rr(In(h),0,n).join(""):h.slice(0,n)}function ZR(n,i,l,h){var p=i&b,w=Ti(n);function E(){for(var _=-1,P=arguments.length,F=-1,B=h.length,K=L(B+P),W=this&&this!==yt&&this instanceof E?w:n;++F<B;)K[F]=h[F];for(;P--;)K[F++]=arguments[++_];return Wt(W,p?l:this,K)}return E}function Mm(n){return function(i,l,h){return h&&typeof h!="number"&&Rt(i,l,h)&&(l=h=t),i=cr(i),l===t?(l=i,i=0):l=cr(l),h=h===t?i<l?1:-1:cr(h),HR(i,l,h,n)}}function ea(n){return function(i,l){return typeof i=="string"&&typeof l=="string"||(i=pn(i),l=pn(l)),n(i,l)}}function Lm(n,i,l,h,p,w,E,_,P,F){var B=i&k,K=B?E:t,W=B?t:E,ee=B?w:t,ce=B?t:w;i|=B?x:U,i&=~(B?U:x),i&I||(i&=~(b|N));var ve=[n,i,p,ee,K,ce,W,_,P,F],le=l.apply(t,ve);return Eu(n)&&Vm(le,ve),le.placeholder=h,Ym(le,n,i)}function pu(n){var i=it[n];return function(l,h){if(l=pn(l),h=h==null?0:St(ye(h),292),h&&Yp(l)){var p=(Me(l)+"e").split("e"),w=i(p[0]+"e"+(+p[1]+h));return p=(Me(w)+"e").split("e"),+(p[0]+"e"+(+p[1]-h))}return i(l)}}var ek=Oo&&1/ks(new Oo([,-0]))[1]==j?function(n){return new Oo(n)}:Uu;function Dm(n){return function(i){var l=bt(i);return l==Ne?ql(i):l==mt?yI(i):lI(i,n(i))}}function or(n,i,l,h,p,w,E,_){var P=i&N;if(!P&&typeof n!="function")throw new un(c);var F=h?h.length:0;if(F||(i&=~(x|U),h=p=t),E=E===t?E:st(ye(E),0),_=_===t?_:ye(_),F-=p?p.length:0,i&U){var B=h,K=p;h=p=t}var W=P?t:Cu(n),ee=[n,i,l,h,p,B,K,w,E,_];if(W&&pk(ee,W),n=ee[0],i=ee[1],l=ee[2],h=ee[3],p=ee[4],_=ee[9]=ee[9]===t?P?0:n.length:st(ee[9]-F,0),!_&&i&(k|O)&&(i&=~(k|O)),!i||i==b)var ce=JR(n,i,l);else i==k||i==O?ce=XR(n,i,_):(i==x||i==(b|x))&&!p.length?ce=ZR(n,i,l,h):ce=Js.apply(t,ee);var ve=W?mm:Vm;return Ym(ve(ce,ee),n,i)}function Um(n,i,l,h){return n===t||kn(n,Po[l])&&!De.call(h,l)?i:n}function Hm(n,i,l,h,p,w){return Ye(n)&&Ye(i)&&(w.set(i,n),Vs(n,i,t,Hm,w),w.delete(i)),n}function tk(n){return Si(n)?t:n}function Fm(n,i,l,h,p,w){var E=l&A,_=n.length,P=i.length;if(_!=P&&!(E&&P>_))return!1;var F=w.get(n),B=w.get(i);if(F&&B)return F==i&&B==n;var K=-1,W=!0,ee=l&S?new Yr:t;for(w.set(n,i),w.set(i,n);++K<_;){var ce=n[K],ve=i[K];if(h)var le=E?h(ve,ce,K,i,n,w):h(ce,ve,K,n,i,w);if(le!==t){if(le)continue;W=!1;break}if(ee){if(!Fl(i,function(Ae,_e){if(!ui(ee,_e)&&(ce===Ae||p(ce,Ae,l,h,w)))return ee.push(_e)})){W=!1;break}}else if(!(ce===ve||p(ce,ve,l,h,w))){W=!1;break}}return w.delete(n),w.delete(i),W}function nk(n,i,l,h,p,w,E){switch(l){case So:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case li:return!(n.byteLength!=i.byteLength||!w(new Ls(n),new Ls(i)));case $t:case Gt:case ot:return kn(+n,+i);case Fn:return n.name==i.name&&n.message==i.message;case et:case _n:return n==i+"";case Ne:var _=ql;case mt:var P=h&A;if(_||(_=ks),n.size!=i.size&&!P)return!1;var F=E.get(n);if(F)return F==i;h|=S,E.set(n,i);var B=Fm(_(n),_(i),h,p,w,E);return E.delete(n),B;case qt:if(pi)return pi.call(n)==pi.call(i)}return!1}function rk(n,i,l,h,p,w){var E=l&A,_=mu(n),P=_.length,F=mu(i),B=F.length;if(P!=B&&!E)return!1;for(var K=P;K--;){var W=_[K];if(!(E?W in i:De.call(i,W)))return!1}var ee=w.get(n),ce=w.get(i);if(ee&&ce)return ee==i&&ce==n;var ve=!0;w.set(n,i),w.set(i,n);for(var le=E;++K<P;){W=_[K];var Ae=n[W],_e=i[W];if(h)var Qt=E?h(_e,Ae,W,i,n,w):h(Ae,_e,W,n,i,w);if(!(Qt===t?Ae===_e||p(Ae,_e,l,h,w):Qt)){ve=!1;break}le||(le=W=="constructor")}if(ve&&!le){var kt=n.constructor,Jt=i.constructor;kt!=Jt&&"constructor"in n&&"constructor"in i&&!(typeof kt=="function"&&kt instanceof kt&&typeof Jt=="function"&&Jt instanceof Jt)&&(ve=!1)}return w.delete(n),w.delete(i),ve}function ir(n){return Su(qm(n,t,ey),n+"")}function mu(n){return im(n,ht,wu)}function yu(n){return im(n,Lt,Bm)}var Cu=Ks?function(n){return Ks.get(n)}:Uu;function ta(n){for(var i=n.name+"",l=No[i],h=De.call(No,i)?l.length:0;h--;){var p=l[h],w=p.func;if(w==null||w==n)return p.name}return i}function Do(n){var i=De.call(C,"placeholder")?C:n;return i.placeholder}function se(){var n=C.iteratee||Lu;return n=n===Lu?cm:n,arguments.length?n(arguments[0],arguments[1]):n}function na(n,i){var l=n.__data__;return dk(i)?l[typeof i=="string"?"string":"hash"]:l.map}function vu(n){for(var i=ht(n),l=i.length;l--;){var h=i[l],p=n[h];i[l]=[h,p,Gm(p)]}return i}function Jr(n,i){var l=gI(n,i);return am(l)?l:t}function ok(n){var i=De.call(n,Wr),l=n[Wr];try{n[Wr]=t;var h=!0}catch{}var p=xs.call(n);return h&&(i?n[Wr]=l:delete n[Wr]),p}var wu=Vl?function(n){return n==null?[]:(n=Be(n),Tr(Vl(n),function(i){return Wp.call(n,i)}))}:Hu,Bm=Vl?function(n){for(var i=[];n;)Er(i,wu(n)),n=Ds(n);return i}:Hu,bt=It;(Yl&&bt(new Yl(new ArrayBuffer(1)))!=So||hi&&bt(new hi)!=Ne||jl&&bt(jl.resolve())!=Bn||Oo&&bt(new Oo)!=mt||fi&&bt(new fi)!=_t)&&(bt=function(n){var i=It(n),l=i==Ve?n.constructor:t,h=l?Xr(l):"";if(h)switch(h){case BI:return So;case KI:return Ne;case $I:return Bn;case GI:return mt;case zI:return _t}return i});function ik(n,i,l){for(var h=-1,p=l.length;++h<p;){var w=l[h],E=w.size;switch(w.type){case"drop":n+=E;break;case"dropRight":i-=E;break;case"take":i=St(i,n+E);break;case"takeRight":n=st(n,i-E);break}}return{start:n,end:i}}function sk(n){var i=n.match(h_);return i?i[1].split(f_):[]}function Km(n,i,l){i=Ir(i,n);for(var h=-1,p=i.length,w=!1;++h<p;){var E=Gn(i[h]);if(!(w=n!=null&&l(n,E)))break;n=n[E]}return w||++h!=p?w:(p=n==null?0:n.length,!!p&&la(p)&&sr(E,p)&&(pe(n)||Zr(n)))}function ak(n){var i=n.length,l=new n.constructor(i);return i&&typeof n[0]=="string"&&De.call(n,"index")&&(l.index=n.index,l.input=n.input),l}function $m(n){return typeof n.constructor=="function"&&!Ei(n)?xo(Ds(n)):{}}function ck(n,i,l){var h=n.constructor;switch(i){case li:return fu(n);case $t:case Gt:return new h(+n);case So:return qR(n,l);case vl:case wl:case Tl:case El:case Al:case Sl:case bl:case _l:case Il:return Sm(n,l);case Ne:return new h;case ot:case _n:return new h(n);case et:return WR(n);case mt:return new h;case qt:return VR(n)}}function lk(n,i){var l=i.length;if(!l)return n;var h=l-1;return i[h]=(l>1?"& ":"")+i[h],i=i.join(l>2?", ":" "),n.replace(d_,`{
/* [wrapped with `+i+`] */
`)}function uk(n){return pe(n)||Zr(n)||!!(Vp&&n&&n[Vp])}function sr(n,i){var l=typeof n;return i=i??ie,!!i&&(l=="number"||l!="symbol"&&E_.test(n))&&n>-1&&n%1==0&&n<i}function Rt(n,i,l){if(!Ye(l))return!1;var h=typeof i;return(h=="number"?Mt(l)&&sr(i,l.length):h=="string"&&i in l)?kn(l[i],n):!1}function Tu(n,i){if(pe(n))return!1;var l=typeof n;return l=="number"||l=="symbol"||l=="boolean"||n==null||jt(n)?!0:a_.test(n)||!s_.test(n)||i!=null&&n in Be(i)}function dk(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function Eu(n){var i=ta(n),l=C[i];if(typeof l!="function"||!(i in be.prototype))return!1;if(n===l)return!0;var h=Cu(l);return!!h&&n===h[0]}function hk(n){return!!Gp&&Gp in n}var fk=Os?ar:Fu;function Ei(n){var i=n&&n.constructor,l=typeof i=="function"&&i.prototype||Po;return n===l}function Gm(n){return n===n&&!Ye(n)}function zm(n,i){return function(l){return l==null?!1:l[n]===i&&(i!==t||n in Be(l))}}function gk(n){var i=aa(n,function(h){return l.size===f&&l.clear(),h}),l=i.cache;return i}function pk(n,i){var l=n[1],h=i[1],p=l|h,w=p<(b|N|z),E=h==z&&l==k||h==z&&l==G&&n[7].length<=i[8]||h==(z|G)&&i[7].length<=i[8]&&l==k;if(!(w||E))return n;h&b&&(n[2]=i[2],p|=l&b?0:I);var _=i[3];if(_){var P=n[3];n[3]=P?_m(P,_,i[4]):_,n[4]=P?Ar(n[3],g):i[4]}return _=i[5],_&&(P=n[5],n[5]=P?Im(P,_,i[6]):_,n[6]=P?Ar(n[5],g):i[6]),_=i[7],_&&(n[7]=_),h&z&&(n[8]=n[8]==null?i[8]:St(n[8],i[8])),n[9]==null&&(n[9]=i[9]),n[0]=i[0],n[1]=p,n}function mk(n){var i=[];if(n!=null)for(var l in Be(n))i.push(l);return i}function yk(n){return xs.call(n)}function qm(n,i,l){return i=st(i===t?n.length-1:i,0),function(){for(var h=arguments,p=-1,w=st(h.length-i,0),E=L(w);++p<w;)E[p]=h[i+p];p=-1;for(var _=L(i+1);++p<i;)_[p]=h[p];return _[i]=l(E),Wt(n,this,_)}}function Wm(n,i){return i.length<2?n:Qr(n,fn(i,0,-1))}function Ck(n,i){for(var l=n.length,h=St(i.length,l),p=xt(n);h--;){var w=i[h];n[h]=sr(w,l)?p[w]:t}return n}function Au(n,i){if(!(i==="constructor"&&typeof n[i]=="function")&&i!="__proto__")return n[i]}var Vm=jm(mm),Ai=xI||function(n,i){return yt.setTimeout(n,i)},Su=jm(KR);function Ym(n,i,l){var h=i+"";return Su(n,lk(h,vk(sk(h),l)))}function jm(n){var i=0,l=0;return function(){var h=UI(),p=Ce-(h-l);if(l=h,p>0){if(++i>=re)return arguments[0]}else i=0;return n.apply(t,arguments)}}function ra(n,i){var l=-1,h=n.length,p=h-1;for(i=i===t?h:i;++l<i;){var w=su(l,p),E=n[w];n[w]=n[l],n[l]=E}return n.length=i,n}var Qm=gk(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(c_,function(l,h,p,w){i.push(p?w.replace(m_,"$1"):h||l)}),i});function Gn(n){if(typeof n=="string"||jt(n))return n;var i=n+"";return i=="0"&&1/n==-j?"-0":i}function Xr(n){if(n!=null){try{return Ns.call(n)}catch{}try{return n+""}catch{}}return""}function vk(n,i){return ln(Zn,function(l){var h="_."+l[0];i&l[1]&&!Is(n,h)&&n.push(h)}),n.sort()}function Jm(n){if(n instanceof be)return n.clone();var i=new dn(n.__wrapped__,n.__chain__);return i.__actions__=xt(n.__actions__),i.__index__=n.__index__,i.__values__=n.__values__,i}function wk(n,i,l){(l?Rt(n,i,l):i===t)?i=1:i=st(ye(i),0);var h=n==null?0:n.length;if(!h||i<1)return[];for(var p=0,w=0,E=L(Fs(h/i));p<h;)E[w++]=fn(n,p,p+=i);return E}function Tk(n){for(var i=-1,l=n==null?0:n.length,h=0,p=[];++i<l;){var w=n[i];w&&(p[h++]=w)}return p}function Ek(){var n=arguments.length;if(!n)return[];for(var i=L(n-1),l=arguments[0],h=n;h--;)i[h-1]=arguments[h];return Er(pe(l)?xt(l):[l],Ct(i,1))}var Ak=Te(function(n,i){return Je(n)?yi(n,Ct(i,1,Je,!0)):[]}),Sk=Te(function(n,i){var l=gn(i);return Je(l)&&(l=t),Je(n)?yi(n,Ct(i,1,Je,!0),se(l,2)):[]}),bk=Te(function(n,i){var l=gn(i);return Je(l)&&(l=t),Je(n)?yi(n,Ct(i,1,Je,!0),t,l):[]});function _k(n,i,l){var h=n==null?0:n.length;return h?(i=l||i===t?1:ye(i),fn(n,i<0?0:i,h)):[]}function Ik(n,i,l){var h=n==null?0:n.length;return h?(i=l||i===t?1:ye(i),i=h-i,fn(n,0,i<0?0:i)):[]}function Rk(n,i){return n&&n.length?js(n,se(i,3),!0,!0):[]}function kk(n,i){return n&&n.length?js(n,se(i,3),!0):[]}function Pk(n,i,l,h){var p=n==null?0:n.length;return p?(l&&typeof l!="number"&&Rt(n,i,l)&&(l=0,h=p),ER(n,i,l,h)):[]}function Xm(n,i,l){var h=n==null?0:n.length;if(!h)return-1;var p=l==null?0:ye(l);return p<0&&(p=st(h+p,0)),Rs(n,se(i,3),p)}function Zm(n,i,l){var h=n==null?0:n.length;if(!h)return-1;var p=h-1;return l!==t&&(p=ye(l),p=l<0?st(h+p,0):St(p,h-1)),Rs(n,se(i,3),p,!0)}function ey(n){var i=n==null?0:n.length;return i?Ct(n,1):[]}function Ok(n){var i=n==null?0:n.length;return i?Ct(n,j):[]}function Nk(n,i){var l=n==null?0:n.length;return l?(i=i===t?1:ye(i),Ct(n,i)):[]}function xk(n){for(var i=-1,l=n==null?0:n.length,h={};++i<l;){var p=n[i];h[p[0]]=p[1]}return h}function ty(n){return n&&n.length?n[0]:t}function Mk(n,i,l){var h=n==null?0:n.length;if(!h)return-1;var p=l==null?0:ye(l);return p<0&&(p=st(h+p,0)),_o(n,i,p)}function Lk(n){var i=n==null?0:n.length;return i?fn(n,0,-1):[]}var Dk=Te(function(n){var i=qe(n,du);return i.length&&i[0]===n[0]?tu(i):[]}),Uk=Te(function(n){var i=gn(n),l=qe(n,du);return i===gn(l)?i=t:l.pop(),l.length&&l[0]===n[0]?tu(l,se(i,2)):[]}),Hk=Te(function(n){var i=gn(n),l=qe(n,du);return i=typeof i=="function"?i:t,i&&l.pop(),l.length&&l[0]===n[0]?tu(l,t,i):[]});function Fk(n,i){return n==null?"":LI.call(n,i)}function gn(n){var i=n==null?0:n.length;return i?n[i-1]:t}function Bk(n,i,l){var h=n==null?0:n.length;if(!h)return-1;var p=h;return l!==t&&(p=ye(l),p=p<0?st(h+p,0):St(p,h-1)),i===i?vI(n,i,p):Rs(n,Lp,p,!0)}function Kk(n,i){return n&&n.length?hm(n,ye(i)):t}var $k=Te(ny);function ny(n,i){return n&&n.length&&i&&i.length?iu(n,i):n}function Gk(n,i,l){return n&&n.length&&i&&i.length?iu(n,i,se(l,2)):n}function zk(n,i,l){return n&&n.length&&i&&i.length?iu(n,i,t,l):n}var qk=ir(function(n,i){var l=n==null?0:n.length,h=Jl(n,i);return pm(n,qe(i,function(p){return sr(p,l)?+p:p}).sort(bm)),h});function Wk(n,i){var l=[];if(!(n&&n.length))return l;var h=-1,p=[],w=n.length;for(i=se(i,3);++h<w;){var E=n[h];i(E,h,n)&&(l.push(E),p.push(h))}return pm(n,p),l}function bu(n){return n==null?n:FI.call(n)}function Vk(n,i,l){var h=n==null?0:n.length;return h?(l&&typeof l!="number"&&Rt(n,i,l)?(i=0,l=h):(i=i==null?0:ye(i),l=l===t?h:ye(l)),fn(n,i,l)):[]}function Yk(n,i){return Ys(n,i)}function jk(n,i,l){return cu(n,i,se(l,2))}function Qk(n,i){var l=n==null?0:n.length;if(l){var h=Ys(n,i);if(h<l&&kn(n[h],i))return h}return-1}function Jk(n,i){return Ys(n,i,!0)}function Xk(n,i,l){return cu(n,i,se(l,2),!0)}function Zk(n,i){var l=n==null?0:n.length;if(l){var h=Ys(n,i,!0)-1;if(kn(n[h],i))return h}return-1}function eP(n){return n&&n.length?ym(n):[]}function tP(n,i){return n&&n.length?ym(n,se(i,2)):[]}function nP(n){var i=n==null?0:n.length;return i?fn(n,1,i):[]}function rP(n,i,l){return n&&n.length?(i=l||i===t?1:ye(i),fn(n,0,i<0?0:i)):[]}function oP(n,i,l){var h=n==null?0:n.length;return h?(i=l||i===t?1:ye(i),i=h-i,fn(n,i<0?0:i,h)):[]}function iP(n,i){return n&&n.length?js(n,se(i,3),!1,!0):[]}function sP(n,i){return n&&n.length?js(n,se(i,3)):[]}var aP=Te(function(n){return _r(Ct(n,1,Je,!0))}),cP=Te(function(n){var i=gn(n);return Je(i)&&(i=t),_r(Ct(n,1,Je,!0),se(i,2))}),lP=Te(function(n){var i=gn(n);return i=typeof i=="function"?i:t,_r(Ct(n,1,Je,!0),t,i)});function uP(n){return n&&n.length?_r(n):[]}function dP(n,i){return n&&n.length?_r(n,se(i,2)):[]}function hP(n,i){return i=typeof i=="function"?i:t,n&&n.length?_r(n,t,i):[]}function _u(n){if(!(n&&n.length))return[];var i=0;return n=Tr(n,function(l){if(Je(l))return i=st(l.length,i),!0}),Gl(i,function(l){return qe(n,Bl(l))})}function ry(n,i){if(!(n&&n.length))return[];var l=_u(n);return i==null?l:qe(l,function(h){return Wt(i,t,h)})}var fP=Te(function(n,i){return Je(n)?yi(n,i):[]}),gP=Te(function(n){return uu(Tr(n,Je))}),pP=Te(function(n){var i=gn(n);return Je(i)&&(i=t),uu(Tr(n,Je),se(i,2))}),mP=Te(function(n){var i=gn(n);return i=typeof i=="function"?i:t,uu(Tr(n,Je),t,i)}),yP=Te(_u);function CP(n,i){return Tm(n||[],i||[],mi)}function vP(n,i){return Tm(n||[],i||[],wi)}var wP=Te(function(n){var i=n.length,l=i>1?n[i-1]:t;return l=typeof l=="function"?(n.pop(),l):t,ry(n,l)});function oy(n){var i=C(n);return i.__chain__=!0,i}function TP(n,i){return i(n),n}function oa(n,i){return i(n)}var EP=ir(function(n){var i=n.length,l=i?n[0]:0,h=this.__wrapped__,p=function(w){return Jl(w,n)};return i>1||this.__actions__.length||!(h instanceof be)||!sr(l)?this.thru(p):(h=h.slice(l,+l+(i?1:0)),h.__actions__.push({func:oa,args:[p],thisArg:t}),new dn(h,this.__chain__).thru(function(w){return i&&!w.length&&w.push(t),w}))});function AP(){return oy(this)}function SP(){return new dn(this.value(),this.__chain__)}function bP(){this.__values__===t&&(this.__values__=Cy(this.value()));var n=this.__index__>=this.__values__.length,i=n?t:this.__values__[this.__index__++];return{done:n,value:i}}function _P(){return this}function IP(n){for(var i,l=this;l instanceof Gs;){var h=Jm(l);h.__index__=0,h.__values__=t,i?p.__wrapped__=h:i=h;var p=h;l=l.__wrapped__}return p.__wrapped__=n,i}function RP(){var n=this.__wrapped__;if(n instanceof be){var i=n;return this.__actions__.length&&(i=new be(this)),i=i.reverse(),i.__actions__.push({func:oa,args:[bu],thisArg:t}),new dn(i,this.__chain__)}return this.thru(bu)}function kP(){return wm(this.__wrapped__,this.__actions__)}var PP=Qs(function(n,i,l){De.call(n,l)?++n[l]:rr(n,l,1)});function OP(n,i,l){var h=pe(n)?xp:TR;return l&&Rt(n,i,l)&&(i=t),h(n,se(i,3))}function NP(n,i){var l=pe(n)?Tr:rm;return l(n,se(i,3))}var xP=Om(Xm),MP=Om(Zm);function LP(n,i){return Ct(ia(n,i),1)}function DP(n,i){return Ct(ia(n,i),j)}function UP(n,i,l){return l=l===t?1:ye(l),Ct(ia(n,i),l)}function iy(n,i){var l=pe(n)?ln:br;return l(n,se(i,3))}function sy(n,i){var l=pe(n)?nI:nm;return l(n,se(i,3))}var HP=Qs(function(n,i,l){De.call(n,l)?n[l].push(i):rr(n,l,[i])});function FP(n,i,l,h){n=Mt(n)?n:Ho(n),l=l&&!h?ye(l):0;var p=n.length;return l<0&&(l=st(p+l,0)),ua(n)?l<=p&&n.indexOf(i,l)>-1:!!p&&_o(n,i,l)>-1}var BP=Te(function(n,i,l){var h=-1,p=typeof i=="function",w=Mt(n)?L(n.length):[];return br(n,function(E){w[++h]=p?Wt(i,E,l):Ci(E,i,l)}),w}),KP=Qs(function(n,i,l){rr(n,l,i)});function ia(n,i){var l=pe(n)?qe:lm;return l(n,se(i,3))}function $P(n,i,l,h){return n==null?[]:(pe(i)||(i=i==null?[]:[i]),l=h?t:l,pe(l)||(l=l==null?[]:[l]),fm(n,i,l))}var GP=Qs(function(n,i,l){n[l?0:1].push(i)},function(){return[[],[]]});function zP(n,i,l){var h=pe(n)?Hl:Up,p=arguments.length<3;return h(n,se(i,4),l,p,br)}function qP(n,i,l){var h=pe(n)?rI:Up,p=arguments.length<3;return h(n,se(i,4),l,p,nm)}function WP(n,i){var l=pe(n)?Tr:rm;return l(n,ca(se(i,3)))}function VP(n){var i=pe(n)?Xp:FR;return i(n)}function YP(n,i,l){(l?Rt(n,i,l):i===t)?i=1:i=ye(i);var h=pe(n)?mR:BR;return h(n,i)}function jP(n){var i=pe(n)?yR:$R;return i(n)}function QP(n){if(n==null)return 0;if(Mt(n))return ua(n)?Ro(n):n.length;var i=bt(n);return i==Ne||i==mt?n.size:ru(n).length}function JP(n,i,l){var h=pe(n)?Fl:GR;return l&&Rt(n,i,l)&&(i=t),h(n,se(i,3))}var XP=Te(function(n,i){if(n==null)return[];var l=i.length;return l>1&&Rt(n,i[0],i[1])?i=[]:l>2&&Rt(i[0],i[1],i[2])&&(i=[i[0]]),fm(n,Ct(i,1),[])}),sa=NI||function(){return yt.Date.now()};function ZP(n,i){if(typeof i!="function")throw new un(c);return n=ye(n),function(){if(--n<1)return i.apply(this,arguments)}}function ay(n,i,l){return i=l?t:i,i=n&&i==null?n.length:i,or(n,z,t,t,t,t,i)}function cy(n,i){var l;if(typeof i!="function")throw new un(c);return n=ye(n),function(){return--n>0&&(l=i.apply(this,arguments)),n<=1&&(i=t),l}}var Iu=Te(function(n,i,l){var h=b;if(l.length){var p=Ar(l,Do(Iu));h|=x}return or(n,h,i,l,p)}),ly=Te(function(n,i,l){var h=b|N;if(l.length){var p=Ar(l,Do(ly));h|=x}return or(i,h,n,l,p)});function uy(n,i,l){i=l?t:i;var h=or(n,k,t,t,t,t,t,i);return h.placeholder=uy.placeholder,h}function dy(n,i,l){i=l?t:i;var h=or(n,O,t,t,t,t,t,i);return h.placeholder=dy.placeholder,h}function hy(n,i,l){var h,p,w,E,_,P,F=0,B=!1,K=!1,W=!0;if(typeof n!="function")throw new un(c);i=pn(i)||0,Ye(l)&&(B=!!l.leading,K="maxWait"in l,w=K?st(pn(l.maxWait)||0,i):w,W="trailing"in l?!!l.trailing:W);function ee(Xe){var Pn=h,lr=p;return h=p=t,F=Xe,E=n.apply(lr,Pn),E}function ce(Xe){return F=Xe,_=Ai(Ae,i),B?ee(Xe):E}function ve(Xe){var Pn=Xe-P,lr=Xe-F,Oy=i-Pn;return K?St(Oy,w-lr):Oy}function le(Xe){var Pn=Xe-P,lr=Xe-F;return P===t||Pn>=i||Pn<0||K&&lr>=w}function Ae(){var Xe=sa();if(le(Xe))return _e(Xe);_=Ai(Ae,ve(Xe))}function _e(Xe){return _=t,W&&h?ee(Xe):(h=p=t,E)}function Qt(){_!==t&&Em(_),F=0,h=P=p=_=t}function kt(){return _===t?E:_e(sa())}function Jt(){var Xe=sa(),Pn=le(Xe);if(h=arguments,p=this,P=Xe,Pn){if(_===t)return ce(P);if(K)return Em(_),_=Ai(Ae,i),ee(P)}return _===t&&(_=Ai(Ae,i)),E}return Jt.cancel=Qt,Jt.flush=kt,Jt}var eO=Te(function(n,i){return tm(n,1,i)}),tO=Te(function(n,i,l){return tm(n,pn(i)||0,l)});function nO(n){return or(n,X)}function aa(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new un(c);var l=function(){var h=arguments,p=i?i.apply(this,h):h[0],w=l.cache;if(w.has(p))return w.get(p);var E=n.apply(this,h);return l.cache=w.set(p,E)||w,E};return l.cache=new(aa.Cache||nr),l}aa.Cache=nr;function ca(n){if(typeof n!="function")throw new un(c);return function(){var i=arguments;switch(i.length){case 0:return!n.call(this);case 1:return!n.call(this,i[0]);case 2:return!n.call(this,i[0],i[1]);case 3:return!n.call(this,i[0],i[1],i[2])}return!n.apply(this,i)}}function rO(n){return cy(2,n)}var oO=zR(function(n,i){i=i.length==1&&pe(i[0])?qe(i[0],Vt(se())):qe(Ct(i,1),Vt(se()));var l=i.length;return Te(function(h){for(var p=-1,w=St(h.length,l);++p<w;)h[p]=i[p].call(this,h[p]);return Wt(n,this,h)})}),Ru=Te(function(n,i){var l=Ar(i,Do(Ru));return or(n,x,t,i,l)}),fy=Te(function(n,i){var l=Ar(i,Do(fy));return or(n,U,t,i,l)}),iO=ir(function(n,i){return or(n,G,t,t,t,i)});function sO(n,i){if(typeof n!="function")throw new un(c);return i=i===t?i:ye(i),Te(n,i)}function aO(n,i){if(typeof n!="function")throw new un(c);return i=i==null?0:st(ye(i),0),Te(function(l){var h=l[i],p=Rr(l,0,i);return h&&Er(p,h),Wt(n,this,p)})}function cO(n,i,l){var h=!0,p=!0;if(typeof n!="function")throw new un(c);return Ye(l)&&(h="leading"in l?!!l.leading:h,p="trailing"in l?!!l.trailing:p),hy(n,i,{leading:h,maxWait:i,trailing:p})}function lO(n){return ay(n,1)}function uO(n,i){return Ru(hu(i),n)}function dO(){if(!arguments.length)return[];var n=arguments[0];return pe(n)?n:[n]}function hO(n){return hn(n,T)}function fO(n,i){return i=typeof i=="function"?i:t,hn(n,T,i)}function gO(n){return hn(n,y|T)}function pO(n,i){return i=typeof i=="function"?i:t,hn(n,y|T,i)}function mO(n,i){return i==null||em(n,i,ht(i))}function kn(n,i){return n===i||n!==n&&i!==i}var yO=ea(eu),CO=ea(function(n,i){return n>=i}),Zr=sm(function(){return arguments}())?sm:function(n){return Qe(n)&&De.call(n,"callee")&&!Wp.call(n,"callee")},pe=L.isArray,vO=Ip?Vt(Ip):IR;function Mt(n){return n!=null&&la(n.length)&&!ar(n)}function Je(n){return Qe(n)&&Mt(n)}function wO(n){return n===!0||n===!1||Qe(n)&&It(n)==$t}var kr=MI||Fu,TO=Rp?Vt(Rp):RR;function EO(n){return Qe(n)&&n.nodeType===1&&!Si(n)}function AO(n){if(n==null)return!0;if(Mt(n)&&(pe(n)||typeof n=="string"||typeof n.splice=="function"||kr(n)||Uo(n)||Zr(n)))return!n.length;var i=bt(n);if(i==Ne||i==mt)return!n.size;if(Ei(n))return!ru(n).length;for(var l in n)if(De.call(n,l))return!1;return!0}function SO(n,i){return vi(n,i)}function bO(n,i,l){l=typeof l=="function"?l:t;var h=l?l(n,i):t;return h===t?vi(n,i,t,l):!!h}function ku(n){if(!Qe(n))return!1;var i=It(n);return i==Fn||i==er||typeof n.message=="string"&&typeof n.name=="string"&&!Si(n)}function _O(n){return typeof n=="number"&&Yp(n)}function ar(n){if(!Ye(n))return!1;var i=It(n);return i==an||i==zt||i==Hn||i==bn}function gy(n){return typeof n=="number"&&n==ye(n)}function la(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=ie}function Ye(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}function Qe(n){return n!=null&&typeof n=="object"}var py=kp?Vt(kp):PR;function IO(n,i){return n===i||nu(n,i,vu(i))}function RO(n,i,l){return l=typeof l=="function"?l:t,nu(n,i,vu(i),l)}function kO(n){return my(n)&&n!=+n}function PO(n){if(fk(n))throw new fe(a);return am(n)}function OO(n){return n===null}function NO(n){return n==null}function my(n){return typeof n=="number"||Qe(n)&&It(n)==ot}function Si(n){if(!Qe(n)||It(n)!=Ve)return!1;var i=Ds(n);if(i===null)return!0;var l=De.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Ns.call(l)==RI}var Pu=Pp?Vt(Pp):OR;function xO(n){return gy(n)&&n>=-ie&&n<=ie}var yy=Op?Vt(Op):NR;function ua(n){return typeof n=="string"||!pe(n)&&Qe(n)&&It(n)==_n}function jt(n){return typeof n=="symbol"||Qe(n)&&It(n)==qt}var Uo=Np?Vt(Np):xR;function MO(n){return n===t}function LO(n){return Qe(n)&&bt(n)==_t}function DO(n){return Qe(n)&&It(n)==As}var UO=ea(ou),HO=ea(function(n,i){return n<=i});function Cy(n){if(!n)return[];if(Mt(n))return ua(n)?In(n):xt(n);if(di&&n[di])return mI(n[di]());var i=bt(n),l=i==Ne?ql:i==mt?ks:Ho;return l(n)}function cr(n){if(!n)return n===0?n:0;if(n=pn(n),n===j||n===-j){var i=n<0?-1:1;return i*ae}return n===n?n:0}function ye(n){var i=cr(n),l=i%1;return i===i?l?i-l:i:0}function vy(n){return n?jr(ye(n),0,Pe):0}function pn(n){if(typeof n=="number")return n;if(jt(n))return ke;if(Ye(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=Ye(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=Hp(n);var l=v_.test(n);return l||T_.test(n)?Z_(n.slice(2),l?2:8):C_.test(n)?ke:+n}function wy(n){return $n(n,Lt(n))}function FO(n){return n?jr(ye(n),-ie,ie):n===0?n:0}function Me(n){return n==null?"":Yt(n)}var BO=Mo(function(n,i){if(Ei(i)||Mt(i)){$n(i,ht(i),n);return}for(var l in i)De.call(i,l)&&mi(n,l,i[l])}),Ty=Mo(function(n,i){$n(i,Lt(i),n)}),da=Mo(function(n,i,l,h){$n(i,Lt(i),n,h)}),KO=Mo(function(n,i,l,h){$n(i,ht(i),n,h)}),$O=ir(Jl);function GO(n,i){var l=xo(n);return i==null?l:Zp(l,i)}var zO=Te(function(n,i){n=Be(n);var l=-1,h=i.length,p=h>2?i[2]:t;for(p&&Rt(i[0],i[1],p)&&(h=1);++l<h;)for(var w=i[l],E=Lt(w),_=-1,P=E.length;++_<P;){var F=E[_],B=n[F];(B===t||kn(B,Po[F])&&!De.call(n,F))&&(n[F]=w[F])}return n}),qO=Te(function(n){return n.push(t,Hm),Wt(Ey,t,n)});function WO(n,i){return Mp(n,se(i,3),Kn)}function VO(n,i){return Mp(n,se(i,3),Zl)}function YO(n,i){return n==null?n:Xl(n,se(i,3),Lt)}function jO(n,i){return n==null?n:om(n,se(i,3),Lt)}function QO(n,i){return n&&Kn(n,se(i,3))}function JO(n,i){return n&&Zl(n,se(i,3))}function XO(n){return n==null?[]:Ws(n,ht(n))}function ZO(n){return n==null?[]:Ws(n,Lt(n))}function Ou(n,i,l){var h=n==null?t:Qr(n,i);return h===t?l:h}function eN(n,i){return n!=null&&Km(n,i,AR)}function Nu(n,i){return n!=null&&Km(n,i,SR)}var tN=xm(function(n,i,l){i!=null&&typeof i.toString!="function"&&(i=xs.call(i)),n[i]=l},Mu(Dt)),nN=xm(function(n,i,l){i!=null&&typeof i.toString!="function"&&(i=xs.call(i)),De.call(n,i)?n[i].push(l):n[i]=[l]},se),rN=Te(Ci);function ht(n){return Mt(n)?Jp(n):ru(n)}function Lt(n){return Mt(n)?Jp(n,!0):MR(n)}function oN(n,i){var l={};return i=se(i,3),Kn(n,function(h,p,w){rr(l,i(h,p,w),h)}),l}function iN(n,i){var l={};return i=se(i,3),Kn(n,function(h,p,w){rr(l,p,i(h,p,w))}),l}var sN=Mo(function(n,i,l){Vs(n,i,l)}),Ey=Mo(function(n,i,l,h){Vs(n,i,l,h)}),aN=ir(function(n,i){var l={};if(n==null)return l;var h=!1;i=qe(i,function(w){return w=Ir(w,n),h||(h=w.length>1),w}),$n(n,yu(n),l),h&&(l=hn(l,y|v|T,tk));for(var p=i.length;p--;)lu(l,i[p]);return l});function cN(n,i){return Ay(n,ca(se(i)))}var lN=ir(function(n,i){return n==null?{}:DR(n,i)});function Ay(n,i){if(n==null)return{};var l=qe(yu(n),function(h){return[h]});return i=se(i),gm(n,l,function(h,p){return i(h,p[0])})}function uN(n,i,l){i=Ir(i,n);var h=-1,p=i.length;for(p||(p=1,n=t);++h<p;){var w=n==null?t:n[Gn(i[h])];w===t&&(h=p,w=l),n=ar(w)?w.call(n):w}return n}function dN(n,i,l){return n==null?n:wi(n,i,l)}function hN(n,i,l,h){return h=typeof h=="function"?h:t,n==null?n:wi(n,i,l,h)}var Sy=Dm(ht),by=Dm(Lt);function fN(n,i,l){var h=pe(n),p=h||kr(n)||Uo(n);if(i=se(i,4),l==null){var w=n&&n.constructor;p?l=h?new w:[]:Ye(n)?l=ar(w)?xo(Ds(n)):{}:l={}}return(p?ln:Kn)(n,function(E,_,P){return i(l,E,_,P)}),l}function gN(n,i){return n==null?!0:lu(n,i)}function pN(n,i,l){return n==null?n:vm(n,i,hu(l))}function mN(n,i,l,h){return h=typeof h=="function"?h:t,n==null?n:vm(n,i,hu(l),h)}function Ho(n){return n==null?[]:zl(n,ht(n))}function yN(n){return n==null?[]:zl(n,Lt(n))}function CN(n,i,l){return l===t&&(l=i,i=t),l!==t&&(l=pn(l),l=l===l?l:0),i!==t&&(i=pn(i),i=i===i?i:0),jr(pn(n),i,l)}function vN(n,i,l){return i=cr(i),l===t?(l=i,i=0):l=cr(l),n=pn(n),bR(n,i,l)}function wN(n,i,l){if(l&&typeof l!="boolean"&&Rt(n,i,l)&&(i=l=t),l===t&&(typeof i=="boolean"?(l=i,i=t):typeof n=="boolean"&&(l=n,n=t)),n===t&&i===t?(n=0,i=1):(n=cr(n),i===t?(i=n,n=0):i=cr(i)),n>i){var h=n;n=i,i=h}if(l||n%1||i%1){var p=jp();return St(n+p*(i-n+X_("1e-"+((p+"").length-1))),i)}return su(n,i)}var TN=Lo(function(n,i,l){return i=i.toLowerCase(),n+(l?_y(i):i)});function _y(n){return xu(Me(n).toLowerCase())}function Iy(n){return n=Me(n),n&&n.replace(A_,dI).replace($_,"")}function EN(n,i,l){n=Me(n),i=Yt(i);var h=n.length;l=l===t?h:jr(ye(l),0,h);var p=l;return l-=i.length,l>=0&&n.slice(l,p)==i}function AN(n){return n=Me(n),n&&r_.test(n)?n.replace(op,hI):n}function SN(n){return n=Me(n),n&&l_.test(n)?n.replace(Rl,"\\$&"):n}var bN=Lo(function(n,i,l){return n+(l?"-":"")+i.toLowerCase()}),_N=Lo(function(n,i,l){return n+(l?" ":"")+i.toLowerCase()}),IN=Pm("toLowerCase");function RN(n,i,l){n=Me(n),i=ye(i);var h=i?Ro(n):0;if(!i||h>=i)return n;var p=(i-h)/2;return Zs(Bs(p),l)+n+Zs(Fs(p),l)}function kN(n,i,l){n=Me(n),i=ye(i);var h=i?Ro(n):0;return i&&h<i?n+Zs(i-h,l):n}function PN(n,i,l){n=Me(n),i=ye(i);var h=i?Ro(n):0;return i&&h<i?Zs(i-h,l)+n:n}function ON(n,i,l){return l||i==null?i=0:i&&(i=+i),HI(Me(n).replace(kl,""),i||0)}function NN(n,i,l){return(l?Rt(n,i,l):i===t)?i=1:i=ye(i),au(Me(n),i)}function xN(){var n=arguments,i=Me(n[0]);return n.length<3?i:i.replace(n[1],n[2])}var MN=Lo(function(n,i,l){return n+(l?"_":"")+i.toLowerCase()});function LN(n,i,l){return l&&typeof l!="number"&&Rt(n,i,l)&&(i=l=t),l=l===t?Pe:l>>>0,l?(n=Me(n),n&&(typeof i=="string"||i!=null&&!Pu(i))&&(i=Yt(i),!i&&Io(n))?Rr(In(n),0,l):n.split(i,l)):[]}var DN=Lo(function(n,i,l){return n+(l?" ":"")+xu(i)});function UN(n,i,l){return n=Me(n),l=l==null?0:jr(ye(l),0,n.length),i=Yt(i),n.slice(l,l+i.length)==i}function HN(n,i,l){var h=C.templateSettings;l&&Rt(n,i,l)&&(i=t),n=Me(n),i=da({},i,h,Um);var p=da({},i.imports,h.imports,Um),w=ht(p),E=zl(p,w),_,P,F=0,B=i.interpolate||Ss,K="__p += '",W=Wl((i.escape||Ss).source+"|"+B.source+"|"+(B===ip?y_:Ss).source+"|"+(i.evaluate||Ss).source+"|$","g"),ee="//# sourceURL="+(De.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++V_+"]")+`
`;n.replace(W,function(le,Ae,_e,Qt,kt,Jt){return _e||(_e=Qt),K+=n.slice(F,Jt).replace(S_,fI),Ae&&(_=!0,K+=`' +
__e(`+Ae+`) +
'`),kt&&(P=!0,K+=`';
`+kt+`;
__p += '`),_e&&(K+=`' +
((__t = (`+_e+`)) == null ? '' : __t) +
'`),F=Jt+le.length,le}),K+=`';
`;var ce=De.call(i,"variable")&&i.variable;if(!ce)K=`with (obj) {
`+K+`
}
`;else if(p_.test(ce))throw new fe(u);K=(P?K.replace(Zb,""):K).replace(e_,"$1").replace(t_,"$1;"),K="function("+(ce||"obj")+`) {
`+(ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+K+`return __p
}`;var ve=ky(function(){return xe(w,ee+"return "+K).apply(t,E)});if(ve.source=K,ku(ve))throw ve;return ve}function FN(n){return Me(n).toLowerCase()}function BN(n){return Me(n).toUpperCase()}function KN(n,i,l){if(n=Me(n),n&&(l||i===t))return Hp(n);if(!n||!(i=Yt(i)))return n;var h=In(n),p=In(i),w=Fp(h,p),E=Bp(h,p)+1;return Rr(h,w,E).join("")}function $N(n,i,l){if(n=Me(n),n&&(l||i===t))return n.slice(0,$p(n)+1);if(!n||!(i=Yt(i)))return n;var h=In(n),p=Bp(h,In(i))+1;return Rr(h,0,p).join("")}function GN(n,i,l){if(n=Me(n),n&&(l||i===t))return n.replace(kl,"");if(!n||!(i=Yt(i)))return n;var h=In(n),p=Fp(h,In(i));return Rr(h,p).join("")}function zN(n,i){var l=te,h=de;if(Ye(i)){var p="separator"in i?i.separator:p;l="length"in i?ye(i.length):l,h="omission"in i?Yt(i.omission):h}n=Me(n);var w=n.length;if(Io(n)){var E=In(n);w=E.length}if(l>=w)return n;var _=l-Ro(h);if(_<1)return h;var P=E?Rr(E,0,_).join(""):n.slice(0,_);if(p===t)return P+h;if(E&&(_+=P.length-_),Pu(p)){if(n.slice(_).search(p)){var F,B=P;for(p.global||(p=Wl(p.source,Me(sp.exec(p))+"g")),p.lastIndex=0;F=p.exec(B);)var K=F.index;P=P.slice(0,K===t?_:K)}}else if(n.indexOf(Yt(p),_)!=_){var W=P.lastIndexOf(p);W>-1&&(P=P.slice(0,W))}return P+h}function qN(n){return n=Me(n),n&&n_.test(n)?n.replace(rp,wI):n}var WN=Lo(function(n,i,l){return n+(l?" ":"")+i.toUpperCase()}),xu=Pm("toUpperCase");function Ry(n,i,l){return n=Me(n),i=l?t:i,i===t?pI(n)?AI(n):sI(n):n.match(i)||[]}var ky=Te(function(n,i){try{return Wt(n,t,i)}catch(l){return ku(l)?l:new fe(l)}}),VN=ir(function(n,i){return ln(i,function(l){l=Gn(l),rr(n,l,Iu(n[l],n))}),n});function YN(n){var i=n==null?0:n.length,l=se();return n=i?qe(n,function(h){if(typeof h[1]!="function")throw new un(c);return[l(h[0]),h[1]]}):[],Te(function(h){for(var p=-1;++p<i;){var w=n[p];if(Wt(w[0],this,h))return Wt(w[1],this,h)}})}function jN(n){return wR(hn(n,y))}function Mu(n){return function(){return n}}function QN(n,i){return n==null||n!==n?i:n}var JN=Nm(),XN=Nm(!0);function Dt(n){return n}function Lu(n){return cm(typeof n=="function"?n:hn(n,y))}function ZN(n){return um(hn(n,y))}function e0(n,i){return dm(n,hn(i,y))}var t0=Te(function(n,i){return function(l){return Ci(l,n,i)}}),n0=Te(function(n,i){return function(l){return Ci(n,l,i)}});function Du(n,i,l){var h=ht(i),p=Ws(i,h);l==null&&!(Ye(i)&&(p.length||!h.length))&&(l=i,i=n,n=this,p=Ws(i,ht(i)));var w=!(Ye(l)&&"chain"in l)||!!l.chain,E=ar(n);return ln(p,function(_){var P=i[_];n[_]=P,E&&(n.prototype[_]=function(){var F=this.__chain__;if(w||F){var B=n(this.__wrapped__),K=B.__actions__=xt(this.__actions__);return K.push({func:P,args:arguments,thisArg:n}),B.__chain__=F,B}return P.apply(n,Er([this.value()],arguments))})}),n}function r0(){return yt._===this&&(yt._=kI),this}function Uu(){}function o0(n){return n=ye(n),Te(function(i){return hm(i,n)})}var i0=gu(qe),s0=gu(xp),a0=gu(Fl);function Py(n){return Tu(n)?Bl(Gn(n)):UR(n)}function c0(n){return function(i){return n==null?t:Qr(n,i)}}var l0=Mm(),u0=Mm(!0);function Hu(){return[]}function Fu(){return!1}function d0(){return{}}function h0(){return""}function f0(){return!0}function g0(n,i){if(n=ye(n),n<1||n>ie)return[];var l=Pe,h=St(n,Pe);i=se(i),n-=Pe;for(var p=Gl(h,i);++l<n;)i(l);return p}function p0(n){return pe(n)?qe(n,Gn):jt(n)?[n]:xt(Qm(Me(n)))}function m0(n){var i=++II;return Me(n)+i}var y0=Xs(function(n,i){return n+i},0),C0=pu("ceil"),v0=Xs(function(n,i){return n/i},1),w0=pu("floor");function T0(n){return n&&n.length?qs(n,Dt,eu):t}function E0(n,i){return n&&n.length?qs(n,se(i,2),eu):t}function A0(n){return Dp(n,Dt)}function S0(n,i){return Dp(n,se(i,2))}function b0(n){return n&&n.length?qs(n,Dt,ou):t}function _0(n,i){return n&&n.length?qs(n,se(i,2),ou):t}var I0=Xs(function(n,i){return n*i},1),R0=pu("round"),k0=Xs(function(n,i){return n-i},0);function P0(n){return n&&n.length?$l(n,Dt):0}function O0(n,i){return n&&n.length?$l(n,se(i,2)):0}return C.after=ZP,C.ary=ay,C.assign=BO,C.assignIn=Ty,C.assignInWith=da,C.assignWith=KO,C.at=$O,C.before=cy,C.bind=Iu,C.bindAll=VN,C.bindKey=ly,C.castArray=dO,C.chain=oy,C.chunk=wk,C.compact=Tk,C.concat=Ek,C.cond=YN,C.conforms=jN,C.constant=Mu,C.countBy=PP,C.create=GO,C.curry=uy,C.curryRight=dy,C.debounce=hy,C.defaults=zO,C.defaultsDeep=qO,C.defer=eO,C.delay=tO,C.difference=Ak,C.differenceBy=Sk,C.differenceWith=bk,C.drop=_k,C.dropRight=Ik,C.dropRightWhile=Rk,C.dropWhile=kk,C.fill=Pk,C.filter=NP,C.flatMap=LP,C.flatMapDeep=DP,C.flatMapDepth=UP,C.flatten=ey,C.flattenDeep=Ok,C.flattenDepth=Nk,C.flip=nO,C.flow=JN,C.flowRight=XN,C.fromPairs=xk,C.functions=XO,C.functionsIn=ZO,C.groupBy=HP,C.initial=Lk,C.intersection=Dk,C.intersectionBy=Uk,C.intersectionWith=Hk,C.invert=tN,C.invertBy=nN,C.invokeMap=BP,C.iteratee=Lu,C.keyBy=KP,C.keys=ht,C.keysIn=Lt,C.map=ia,C.mapKeys=oN,C.mapValues=iN,C.matches=ZN,C.matchesProperty=e0,C.memoize=aa,C.merge=sN,C.mergeWith=Ey,C.method=t0,C.methodOf=n0,C.mixin=Du,C.negate=ca,C.nthArg=o0,C.omit=aN,C.omitBy=cN,C.once=rO,C.orderBy=$P,C.over=i0,C.overArgs=oO,C.overEvery=s0,C.overSome=a0,C.partial=Ru,C.partialRight=fy,C.partition=GP,C.pick=lN,C.pickBy=Ay,C.property=Py,C.propertyOf=c0,C.pull=$k,C.pullAll=ny,C.pullAllBy=Gk,C.pullAllWith=zk,C.pullAt=qk,C.range=l0,C.rangeRight=u0,C.rearg=iO,C.reject=WP,C.remove=Wk,C.rest=sO,C.reverse=bu,C.sampleSize=YP,C.set=dN,C.setWith=hN,C.shuffle=jP,C.slice=Vk,C.sortBy=XP,C.sortedUniq=eP,C.sortedUniqBy=tP,C.split=LN,C.spread=aO,C.tail=nP,C.take=rP,C.takeRight=oP,C.takeRightWhile=iP,C.takeWhile=sP,C.tap=TP,C.throttle=cO,C.thru=oa,C.toArray=Cy,C.toPairs=Sy,C.toPairsIn=by,C.toPath=p0,C.toPlainObject=wy,C.transform=fN,C.unary=lO,C.union=aP,C.unionBy=cP,C.unionWith=lP,C.uniq=uP,C.uniqBy=dP,C.uniqWith=hP,C.unset=gN,C.unzip=_u,C.unzipWith=ry,C.update=pN,C.updateWith=mN,C.values=Ho,C.valuesIn=yN,C.without=fP,C.words=Ry,C.wrap=uO,C.xor=gP,C.xorBy=pP,C.xorWith=mP,C.zip=yP,C.zipObject=CP,C.zipObjectDeep=vP,C.zipWith=wP,C.entries=Sy,C.entriesIn=by,C.extend=Ty,C.extendWith=da,Du(C,C),C.add=y0,C.attempt=ky,C.camelCase=TN,C.capitalize=_y,C.ceil=C0,C.clamp=CN,C.clone=hO,C.cloneDeep=gO,C.cloneDeepWith=pO,C.cloneWith=fO,C.conformsTo=mO,C.deburr=Iy,C.defaultTo=QN,C.divide=v0,C.endsWith=EN,C.eq=kn,C.escape=AN,C.escapeRegExp=SN,C.every=OP,C.find=xP,C.findIndex=Xm,C.findKey=WO,C.findLast=MP,C.findLastIndex=Zm,C.findLastKey=VO,C.floor=w0,C.forEach=iy,C.forEachRight=sy,C.forIn=YO,C.forInRight=jO,C.forOwn=QO,C.forOwnRight=JO,C.get=Ou,C.gt=yO,C.gte=CO,C.has=eN,C.hasIn=Nu,C.head=ty,C.identity=Dt,C.includes=FP,C.indexOf=Mk,C.inRange=vN,C.invoke=rN,C.isArguments=Zr,C.isArray=pe,C.isArrayBuffer=vO,C.isArrayLike=Mt,C.isArrayLikeObject=Je,C.isBoolean=wO,C.isBuffer=kr,C.isDate=TO,C.isElement=EO,C.isEmpty=AO,C.isEqual=SO,C.isEqualWith=bO,C.isError=ku,C.isFinite=_O,C.isFunction=ar,C.isInteger=gy,C.isLength=la,C.isMap=py,C.isMatch=IO,C.isMatchWith=RO,C.isNaN=kO,C.isNative=PO,C.isNil=NO,C.isNull=OO,C.isNumber=my,C.isObject=Ye,C.isObjectLike=Qe,C.isPlainObject=Si,C.isRegExp=Pu,C.isSafeInteger=xO,C.isSet=yy,C.isString=ua,C.isSymbol=jt,C.isTypedArray=Uo,C.isUndefined=MO,C.isWeakMap=LO,C.isWeakSet=DO,C.join=Fk,C.kebabCase=bN,C.last=gn,C.lastIndexOf=Bk,C.lowerCase=_N,C.lowerFirst=IN,C.lt=UO,C.lte=HO,C.max=T0,C.maxBy=E0,C.mean=A0,C.meanBy=S0,C.min=b0,C.minBy=_0,C.stubArray=Hu,C.stubFalse=Fu,C.stubObject=d0,C.stubString=h0,C.stubTrue=f0,C.multiply=I0,C.nth=Kk,C.noConflict=r0,C.noop=Uu,C.now=sa,C.pad=RN,C.padEnd=kN,C.padStart=PN,C.parseInt=ON,C.random=wN,C.reduce=zP,C.reduceRight=qP,C.repeat=NN,C.replace=xN,C.result=uN,C.round=R0,C.runInContext=R,C.sample=VP,C.size=QP,C.snakeCase=MN,C.some=JP,C.sortedIndex=Yk,C.sortedIndexBy=jk,C.sortedIndexOf=Qk,C.sortedLastIndex=Jk,C.sortedLastIndexBy=Xk,C.sortedLastIndexOf=Zk,C.startCase=DN,C.startsWith=UN,C.subtract=k0,C.sum=P0,C.sumBy=O0,C.template=HN,C.times=g0,C.toFinite=cr,C.toInteger=ye,C.toLength=vy,C.toLower=FN,C.toNumber=pn,C.toSafeInteger=FO,C.toString=Me,C.toUpper=BN,C.trim=KN,C.trimEnd=$N,C.trimStart=GN,C.truncate=zN,C.unescape=qN,C.uniqueId=m0,C.upperCase=WN,C.upperFirst=xu,C.each=iy,C.eachRight=sy,C.first=ty,Du(C,function(){var n={};return Kn(C,function(i,l){De.call(C.prototype,l)||(n[l]=i)}),n}(),{chain:!1}),C.VERSION=r,ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){C[n].placeholder=C}),ln(["drop","take"],function(n,i){be.prototype[n]=function(l){l=l===t?1:st(ye(l),0);var h=this.__filtered__&&!i?new be(this):this.clone();return h.__filtered__?h.__takeCount__=St(l,h.__takeCount__):h.__views__.push({size:St(l,Pe),type:n+(h.__dir__<0?"Right":"")}),h},be.prototype[n+"Right"]=function(l){return this.reverse()[n](l).reverse()}}),ln(["filter","map","takeWhile"],function(n,i){var l=i+1,h=l==ne||l==J;be.prototype[n]=function(p){var w=this.clone();return w.__iteratees__.push({iteratee:se(p,3),type:l}),w.__filtered__=w.__filtered__||h,w}}),ln(["head","last"],function(n,i){var l="take"+(i?"Right":"");be.prototype[n]=function(){return this[l](1).value()[0]}}),ln(["initial","tail"],function(n,i){var l="drop"+(i?"":"Right");be.prototype[n]=function(){return this.__filtered__?new be(this):this[l](1)}}),be.prototype.compact=function(){return this.filter(Dt)},be.prototype.find=function(n){return this.filter(n).head()},be.prototype.findLast=function(n){return this.reverse().find(n)},be.prototype.invokeMap=Te(function(n,i){return typeof n=="function"?new be(this):this.map(function(l){return Ci(l,n,i)})}),be.prototype.reject=function(n){return this.filter(ca(se(n)))},be.prototype.slice=function(n,i){n=ye(n);var l=this;return l.__filtered__&&(n>0||i<0)?new be(l):(n<0?l=l.takeRight(-n):n&&(l=l.drop(n)),i!==t&&(i=ye(i),l=i<0?l.dropRight(-i):l.take(i-n)),l)},be.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},be.prototype.toArray=function(){return this.take(Pe)},Kn(be.prototype,function(n,i){var l=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),p=C[h?"take"+(i=="last"?"Right":""):i],w=h||/^find/.test(i);p&&(C.prototype[i]=function(){var E=this.__wrapped__,_=h?[1]:arguments,P=E instanceof be,F=_[0],B=P||pe(E),K=function(Ae){var _e=p.apply(C,Er([Ae],_));return h&&W?_e[0]:_e};B&&l&&typeof F=="function"&&F.length!=1&&(P=B=!1);var W=this.__chain__,ee=!!this.__actions__.length,ce=w&&!W,ve=P&&!ee;if(!w&&B){E=ve?E:new be(this);var le=n.apply(E,_);return le.__actions__.push({func:oa,args:[K],thisArg:t}),new dn(le,W)}return ce&&ve?n.apply(this,_):(le=this.thru(K),ce?h?le.value()[0]:le.value():le)})}),ln(["pop","push","shift","sort","splice","unshift"],function(n){var i=Ps[n],l=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",h=/^(?:pop|shift)$/.test(n);C.prototype[n]=function(){var p=arguments;if(h&&!this.__chain__){var w=this.value();return i.apply(pe(w)?w:[],p)}return this[l](function(E){return i.apply(pe(E)?E:[],p)})}}),Kn(be.prototype,function(n,i){var l=C[i];if(l){var h=l.name+"";De.call(No,h)||(No[h]=[]),No[h].push({name:i,func:l})}}),No[Js(t,N).name]=[{name:"wrapper",func:t}],be.prototype.clone=qI,be.prototype.reverse=WI,be.prototype.value=VI,C.prototype.at=EP,C.prototype.chain=AP,C.prototype.commit=SP,C.prototype.next=bP,C.prototype.plant=IP,C.prototype.reverse=RP,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=kP,C.prototype.first=C.prototype.head,di&&(C.prototype[di]=_P),C},ko=SI();qr?((qr.exports=ko)._=ko,Ll._=ko):yt._=ko}).call(Fo)}(Es,Es.exports);var Wg=Es.exports;const Vg=o=>Wg.groupBy(o,"dictionaryUri");async function kb(o,e,t){try{const r=await o.api.classV1List({uri:e,includeClassRelations:!0},t);if(r.status!==200)throw new Error(`API request failed with status ${r.status}`);return r.data}catch(r){return console.error("Error fetching classification:",r),null}}function Pb({api:o,activeClassificationUri:e,setClassifications:t,domains:r,accessToken:s}){const[a,c]=m.useState(0),[u,d]=m.useState({}),[f,g]=m.useState([]),[y,v]=m.useState(()=>Vg(f)),[T,A]=m.useState({}),S={headers:{Accept:"text/plain"}};s!==""&&(S.headers={...S.headers,Authorization:"Bearer "+s});function b(I){const k=new Promise(function(O){const x={uri:I,includeClassRelations:!0};O(o.api.classV1List(x,S).then(U=>U.status!==200?(console.error(`API request failed with status ${U.status}`),null):U.data).catch(U=>(console.error("Error fetching classification:",U),null)))});return d({...u,classificationUri:k}),k}m.useEffect(()=>{v(Vg(f))},[f]),m.useEffect(()=>{if(c(0),e){const I={};e&&(I[e]=b(e)),d(I)}},[e]),m.useEffect(()=>{c(Object.keys(u).length),a!==Object.keys(u).length&&Promise.allSettled(Object.values(u)).then(function(I){const k=I.map(U=>U.status==="fulfilled"?U.value:null).filter(U=>U!==null);I.map(async U=>{if(U.status==="fulfilled"){const z=U.value;if(z&&z.classRelations){const G={...u};z.classRelations.forEach(X=>{X.relatedClassUri in Object.keys(u)||(G[X.relatedClassUri]=kb(o,X.relatedClassUri,S))}),d(G)}}});const O={...T},x=Wg.groupBy(k,"dictionaryUri");Object.entries(x).forEach(([U,z])=>{z.some(G=>G.uri===O[U])||(O[U]=z[0].uri)}),A(O),t(k),g(k)})},[u,a,T,o]),m.useEffect(()=>{t(Object.values(T).map(I=>f.find(k=>k.uri===I)).filter(I=>I!==void 0))},[T,f]);const N=m.useCallback(I=>k=>{if(!k)return;if(!f.find(U=>U.uri===k)){console.log(`Selected classification '${k}' not found`);return}const x={...T,[I]:k};A(x)},[f,T]);return me.jsx(me.Fragment,{children:Object.entries(y).map(([I,k])=>me.jsx(ws,{mb:"sm",label:r[I]?r[I].name:"",data:k.map(O=>({value:O.uri,label:O.name})),value:T[I],readOnly:k.length===1,variant:k.length===1?"filled":"default",onChange:O=>N(I)(O)},I))})}function Ob(o){const{value:e,setValue:t,disabled:r}=o,s=m.useRef(null),a=c=>{c.target.indeterminate=!1,t(c.target.checked)};return m.useEffect(()=>{s.current&&(e===!0?s.current.checked=!0:e===void 0&&(s.current.indeterminate=!0))}),me.jsx(Cs,{ref:s,type:"checkbox",onChange:c=>a(c),disabled:r})}function Nb(o){const[e,t]=m.useState(),r=o.property,s=o.propertySet,a=o.propertySets,c=o.setPropertySets;return m.useEffect(()=>{switch(r.type){case"IfcPropertySingleValue":{r.nominalValue.type==="IfcBoolean"?t(me.jsx(Ob,{disabled:!1,value:r.nominalValue.value,setValue:u=>{const d={...a},f={...s};if(f.name){const g={...r};g.nominalValue.value=u;const y=f.hasProperties.findIndex(v=>v.name===r.name);y!=-1&&(f.hasProperties[y]=g,d[f.name]=f,c(d))}}})):t(me.jsx(zr,{placeholder:r.nominalValue.value,value:r.nominalValue.value,onChange:u=>{const d={...a},f={...s};if(f.name){const g={...r};g.nominalValue.value=u.target.value;const y=f.hasProperties.findIndex(v=>v.name===r.name);y!=-1&&(f.hasProperties[y]=g,d[f.name]=f,c(d))}}}));break}case"IfcPropertyEnumeratedValue":{t(me.jsx(ws,{value:r.enumerationValues,onChange:u=>{const d={...a},f={...s};if(f.name){const g={...r};g.enumerationValues=[u];const y=f.hasProperties.findIndex(v=>v.name===r.name);y!=-1&&(f.hasProperties[y]=g,d[f.name]=f,c(d))}},data:r.enumerationReference.enumerationValues.map((u,d)=>({value:u,label:u}))}));break}default:{t(me.jsx(zr,{placeholder:r.name,value:"{ifcProperty.nominalValue}"}));break}}},[r,s,t,a,c]),me.jsxs(oi,{className:"mb-3 row",children:[me.jsx(el,{children:r.name}),me.jsx("div",{className:"col-sm-7",children:e})]},o.propertyIndex)}function xb(){if(console&&console.warn){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Yg={};function yl(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];typeof e[0]=="string"&&Yg[e[0]]||(typeof e[0]=="string"&&(Yg[e[0]]=new Date),xb(...e))}const jg=(o,e)=>()=>{if(o.isInitialized)e();else{const t=()=>{setTimeout(()=>{o.off("initialized",t)},0),e()};o.on("initialized",t)}};function Qg(o,e,t){o.loadNamespaces(e,jg(o,t))}function Jg(o,e,t,r){typeof t=="string"&&(t=[t]),t.forEach(s=>{o.options.ns.indexOf(s)<0&&o.options.ns.push(s)}),o.loadLanguages(e,jg(o,r))}function Mb(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,a=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=e.services.backendConnector.state[`${u}|${d}`];return f===-1||f===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!c(e.isLanguageChangingTo,o)?!1:!!(e.hasResourceBundle(r,o)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||c(r,o)&&(!s||c(a,o)))}function Lb(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(yl("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(o,{lng:t.lng,precheck:(s,a)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!a(s.isLanguageChangingTo,o))return!1}}):Mb(o,e,t)}const Db=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ub={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Hb=o=>Ub[o];let Fb={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:o=>o.replace(Db,Hb)};function Bb(){return Fb}let Kb;function $b(){return Kb}const Gb=m.createContext();class zb{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const qb=(o,e)=>{const t=m.useRef();return m.useEffect(()=>{t.current=e?t.current:o},[o,e]),t.current};function Xg(o,e,t,r){return o.getFixedT(e,t,r)}function Wb(o,e,t,r){return m.useCallback(Xg(o,e,t,r),[o,e,t,r])}function Cl(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:r,defaultNS:s}=m.useContext(Gb)||{},a=t||r||$b();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new zb),!a){yl("You will need to pass in an i18next instance by using initReactI18next");const x=(z,G)=>typeof G=="string"?G:G&&typeof G=="object"&&typeof G.defaultValue=="string"?G.defaultValue:Array.isArray(z)?z[z.length-1]:z,U=[x,{},!1];return U.t=x,U.i18n={},U.ready=!1,U}a.options.react&&a.options.react.wait!==void 0&&yl("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...Bb(),...a.options.react,...e},{useSuspense:u,keyPrefix:d}=c;let f=o||s||a.options&&a.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(f);const g=(a.isInitialized||a.initializedStoreOnce)&&f.every(x=>Lb(x,a,c)),y=Wb(a,e.lng||null,c.nsMode==="fallback"?f:f[0],d),v=()=>y,T=()=>Xg(a,e.lng||null,c.nsMode==="fallback"?f:f[0],d),[A,S]=m.useState(v);let b=f.join();e.lng&&(b=`${e.lng}${b}`);const N=qb(b),I=m.useRef(!0);m.useEffect(()=>{const{bindI18n:x,bindI18nStore:U}=c;I.current=!0,!g&&!u&&(e.lng?Jg(a,e.lng,f,()=>{I.current&&S(T)}):Qg(a,f,()=>{I.current&&S(T)})),g&&N&&N!==b&&I.current&&S(T);function z(){I.current&&S(T)}return x&&a&&a.on(x,z),U&&a&&a.store.on(U,z),()=>{I.current=!1,x&&a&&x.split(" ").forEach(G=>a.off(G,z)),U&&a&&U.split(" ").forEach(G=>a.store.off(G,z))}},[a,b]);const k=m.useRef(!0);m.useEffect(()=>{I.current&&!k.current&&S(v),k.current=!1},[a,d]);const O=[A,a,g];if(O.t=A,O.i18n=a,O.ready=g,g||!g&&!u)return O;throw new Promise(x=>{e.lng?Jg(a,e.lng,f,()=>x()):Qg(a,f,()=>x())})}function Vb(o){Cl();const e=o.classifications,t=o.propertySets,r=o.setPropertySets,s=o.recursiveMode;function a(u,d){switch(u){case"Boolean":{const f={type:"IfcBoolean"};switch(d){case!0:case"TRUE":return f.value=!0,f;case!1:case"FALSE":return f.value=!1,f;default:return f.value=void 0,f}}case"Character":{const f={type:"default"};return d&&(f.value=d),f}case"Integer":{const f={type:"IfcInteger"};return d&&(f.value=d),f}case"Real":{const f={type:"IfcReal"};return d&&(f.value=d),f}case"String":{const f={type:"default"};return d&&(f.value=d),f}case"Time":{const f={type:"IfcDate"};return d&&(f.value=d),f}default:{const f={type:"default"};return d&&(f.value=d),f}}}function c(u){if(u.allowedValues){const d={type:"IfcPropertyEnumeratedValue",name:u.name,enumerationReference:{type:"IfcPropertyEnumeration",name:u.name,enumerationValues:u.allowedValues.map(f=>f.value)}};return u.propertyUri&&(d.specification=u.propertyUri),d}else{const d={type:"IfcPropertySingleValue",name:u.name};return u.propertyUri&&(d.specification=u.propertyUri),d.nominalValue=a(u.dataType,u.predefinedValue),d}}return m.useEffect(()=>{const u={};(s?e:e.slice(0,1)).forEach(f=>{f.classProperties&&f.classProperties.map(g=>{const y=g.propertySet||f.name;y in u||(u[y]={type:"IfcPropertySet",name:y,hasProperties:[]}),u[y].hasProperties.push(c(g))})}),r(u)},[e,r,s]),me.jsx("div",{children:m.Children.toArray(Object.values(t).map((u,d)=>me.jsx(dt,{children:me.jsxs(dt.Item,{value:u.name||d.toString(),children:[me.jsx(dt.Control,{children:u.name}),me.jsx(dt.Panel,{children:m.Children.toArray(u.hasProperties.map((f,g)=>me.jsx(Nb,{propertySet:u,property:f,propertyIndex:g,propertySets:t,setPropertySets:r})))})]},d)})))})}function Yb(o){return{type:"IfcClassification",source:o==null?void 0:o.organizationCodeOwner,edition:(o==null?void 0:o.version)||void 0,editionDate:(o==null?void 0:o.releaseDate)||void 0,name:o==null?void 0:o.name,location:o==null?void 0:o.uri}}function jb({callback:o,domains:e,classifications:t,propertySetMap:r,ifcEntity:s}){const{t:a}=Cl();function c(){const g=s||{};t.length&&(g.hasAssociations=t.map(v=>d(v)));const y=Object.values(r);return y.length&&(g.isDefinedBy=y),g}function u(g){if(g in e){const y=e[g];if(y)return Yb(y)}return null}function d(g){const y={type:"IfcClassificationReference",name:g.name};if(g.uri&&(y.location=g.uri),g.code&&(y.identification=g.code),g.dictionaryUri){const v=u(g.dictionaryUri);v&&(y.referencedSource=v)}return y}const f=()=>{o(c())};return me.jsx(ci,{color:"gray",fullWidth:!0,onClick:f,variant:"filled",children:a("Save")})}const Zg={test:"https://test.bsdd.buildingsmart.org",production:"https://api.bsdd.buildingsmart.org"};class Qb{constructor(e={}){Xt(this,"baseUrl","https://api.bsdd.buildingsmart.org/");Xt(this,"securityData",null);Xt(this,"securityWorker");Xt(this,"abortControllers",new Map);Xt(this,"customFetch",(...e)=>fetch(...e));Xt(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});Xt(this,"setSecurityData",e=>{this.securityData=e});Xt(this,"contentFormatters",{"application/json":e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,"text/plain":e=>e!==null&&typeof e!="string"?JSON.stringify(e):e,"multipart/form-data":e=>Object.keys(e||{}).reduce((t,r)=>{const s=e[r];return t.append(r,s instanceof Blob?s:typeof s=="object"&&s!==null?JSON.stringify(s):`${s}`),t},new FormData),"application/x-www-form-urlencoded":e=>this.toQueryString(e)});Xt(this,"createAbortSignal",e=>{if(this.abortControllers.has(e)){const r=this.abortControllers.get(e);return r?r.signal:void 0}const t=new AbortController;return this.abortControllers.set(e,t),t.signal});Xt(this,"abortRequest",e=>{const t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))});Xt(this,"request",async({body:e,secure:t,path:r,type:s,query:a,format:c,baseUrl:u,cancelToken:d,...f})=>{const g=(typeof t=="boolean"?t:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},y=this.mergeRequestParams(f,g),v=a&&this.toQueryString(a),T=this.contentFormatters[s||"application/json"],A=c||y.format;return this.customFetch(`${u||this.baseUrl||""}${r}${v?`?${v}`:""}`,{...y,headers:{...y.headers||{},...s&&s!=="multipart/form-data"?{"Content-Type":s}:{}},signal:(d?this.createAbortSignal(d):y.signal)||null,body:typeof e>"u"||e===null?null:T(e)}).then(async S=>{const b=S;b.data=null,b.error=null;const N=A?await S[A]().then(I=>(b.ok?b.data=I:b.error=I,b)).catch(I=>(b.error=I,b)):b;if(d&&this.abortControllers.delete(d),!S.ok)throw N;return N})});Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof t=="number"?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(s=>this.encodeQueryParam(t,s)).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter(s=>typeof t[s]<"u").map(s=>Array.isArray(t[s])?this.addArrayQueryParam(t,s):this.addQueryParam(t,s)).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}}/**
 * @title Dictionaries API
 * @version v1
 * @license MIT license (https://bsddprototype2020.blob.core.windows.net/public/Copyright_2020_buildingSMART_International.txt)
 * @baseUrl https://api.bsdd.buildingsmart.org/
 * @contact Support <bsdd_support@buildingsmart.org> (https://github.com/buildingSMART/bSDD)
 *
 * <p>API to access the buildingSMART Data Dictionary.</p><p>For manually uploading import files, please go to <a href="https://manage.bsdd.buildingsmart.org">bSDD Management portal</a>. Version history can be found at <a href="https://github.com/buildingSMART/bSDD/blob/master/API%20version%20history.md">Version history</a>.</p><p>If you have any questions or need further assistance, feel free to send us an e-mail</p> <p>In case you want to try out secured APIs via this swagger portal, you need to enter client ID <span style="white-space: nowrap;">b222e220-1f71-4962-9184-05e0481a390d</span>. If you create your own tool
 *   that needs to access secured APIs, please contact us via e-mail.</p>
 */class Jb extends Qb{constructor(){super(...arguments);Xt(this,"api",{classV1List:(t,r={})=>this.request({path:"/api/Class/v1",method:"GET",query:t,format:"json",...r}),dictionaryV1List:(t,r={})=>this.request({path:"/api/Dictionary/v1",method:"GET",query:t,format:"json",...r}),dictionaryV1ClassesList:(t,r={})=>this.request({path:"/api/Dictionary/v1/Classes",method:"GET",query:t,format:"json",...r}),dictionaryV1PropertiesList:(t,r={})=>this.request({path:"/api/Dictionary/v1/Properties",method:"GET",query:t,format:"json",...r}),dictionaryDownloadSketchupV1Create:(t,r={})=>this.request({path:"/api/DictionaryDownload/sketchup/v1",method:"POST",query:t,secure:!0,format:"json",...r}),uploadImportFileV1Create:(t,r={})=>this.request({path:"/api/UploadImportFile/v1",method:"POST",body:t,secure:!0,type:"multipart/form-data",format:"json",...r}),dictionaryV1Update:(t,r,s,a,c={})=>this.request({path:`/api/Dictionary/v1/${t}/${r}/${s}`,method:"PUT",body:a,secure:!0,type:"application/json",...c}),dictionaryV1Delete:(t,r,s,a={})=>this.request({path:`/api/Dictionary/v1/${t}/${r}/${s}`,method:"DELETE",secure:!0,...a}),dictionaryV1Delete2:(t,r,s={})=>this.request({path:`/api/Dictionary/v1/${t}/${r}`,method:"DELETE",secure:!0,...s}),propertyV4List:(t,r={})=>this.request({path:"/api/Property/v4",method:"GET",query:t,format:"json",...r}),propertyValueV2List:(t,r={})=>this.request({path:"/api/PropertyValue/v2",method:"GET",query:t,format:"json",...r}),textSearchV1List:(t,r={})=>this.request({path:"/api/TextSearch/v1",method:"GET",query:t,format:"json",...r}),searchInDictionaryV1List:(t,r={})=>this.request({path:"/api/SearchInDictionary/v1",method:"GET",query:t,format:"json",...r}),classSearchV1List:(t,r={})=>this.request({path:"/api/Class/Search/v1",method:"GET",query:t,format:"json",...r}),unitV1List:(t={})=>this.request({path:"/api/Unit/v1",method:"GET",format:"json",...t}),referenceDocumentV1List:(t={})=>this.request({path:"/api/ReferenceDocument/v1",method:"GET",format:"json",...t}),languageV1List:(t={})=>this.request({path:"/api/Language/v1",method:"GET",format:"json",...t}),countryV1List:(t={})=>this.request({path:"/api/Country/v1",method:"GET",format:"json",...t}),textSearchListOpenV6List:(t,r={})=>this.request({path:"/api/TextSearchListOpen/v6",method:"GET",query:t,format:"json",...r}),textSearchListOpenV5List:(t,r={})=>this.request({path:"/api/TextSearchListOpen/v5",method:"GET",query:t,format:"json",...r}),searchListV2List:(t,r={})=>this.request({path:"/api/SearchList/v2",method:"GET",query:t,secure:!0,format:"json",...r}),searchListOpenV2List:(t,r={})=>this.request({path:"/api/SearchListOpen/v2",method:"GET",query:t,format:"json",...r}),requestExportFilePreviewCreate:(t,r={})=>this.request({path:"/api/RequestExportFile/preview",method:"POST",query:t,secure:!0,format:"json",...r}),propertyV3List:(t,r={})=>this.request({path:"/api/Property/v3",method:"GET",query:t,format:"json",...r}),propertyV2List:(t,r={})=>this.request({path:"/api/Property/v2",method:"GET",query:t,format:"json",...r}),propertyValueV1List:(t,r={})=>this.request({path:"/api/PropertyValue/v1",method:"GET",query:t,format:"json",...r}),materialV2List:(t,r={})=>this.request({path:"/api/Material/v2",method:"GET",query:t,format:"json",...r}),materialV1List:(t,r={})=>this.request({path:"/api/Material/v1",method:"GET",query:t,format:"json",...r}),materialSearchOpenPreviewList:(t,r={})=>this.request({path:"/api/Material/SearchOpen/preview",method:"GET",query:t,format:"json",...r}),domainV3List:(t,r={})=>this.request({path:"/api/Domain/v3",method:"GET",query:t,format:"json",...r}),domainV3ClassificationsList:(t,r={})=>this.request({path:"/api/Domain/v3/Classifications",method:"GET",query:t,format:"json",...r}),domainV3Update:(t,r,s,a,c={})=>this.request({path:`/api/Domain/v3/${t}/${r}/${s}`,method:"PUT",body:a,secure:!0,type:"application/json",...c}),domainV3Delete:(t,r,s,a={})=>this.request({path:`/api/Domain/v3/${t}/${r}/${s}`,method:"DELETE",secure:!0,...a}),domainV3Delete2:(t,r,s={})=>this.request({path:`/api/Domain/v3/${t}/${r}`,method:"DELETE",secure:!0,...s}),domainV2List:(t,r={})=>this.request({path:"/api/Domain/v2",method:"GET",query:t,format:"json",...r}),domainV2ClassificationsList:(t,r={})=>this.request({path:"/api/Domain/v2/Classifications",method:"GET",query:t,format:"json",...r}),classificationV4List:(t,r={})=>this.request({path:"/api/Classification/v4",method:"GET",query:t,format:"json",...r}),classificationV3List:(t,r={})=>this.request({path:"/api/Classification/v3",method:"GET",query:t,format:"json",...r}),classificationSearchOpenV1List:(t,r={})=>this.request({path:"/api/ClassificationSearchOpen/v1",method:"GET",query:t,format:"json",...r})})}}class ep extends Jb{constructor(e){super({baseUrl:e})}}function tp({callback:o,config:e,msalInstance:t}){const{t:r}=Cl(),[s,a]=m.useState(),[c,u]=m.useState(!1),[d,f]=m.useState(O()),[g,y]=m.useState({}),[v,T]=m.useState([]),[A,S]=m.useState({}),[b,N]=m.useState(""),[I,k]=m.useState(new ep("https://test.bsdd.buildingsmart.org"));m.useEffect(()=>{const U=e.baseUrl&&Zg[e.baseUrl]?Zg[e.baseUrl]:"https://test.bsdd.buildingsmart.org";k(new ep(U))},[e]);function O(){return e&&e.defaultDomains&&e.defaultDomains.length?e.defaultDomains:[]}const x={headers:{Accept:"text/plain"}};return b!==""&&(x.headers={...x.headers,Authorization:"Bearer "+b}),m.useEffect(()=>{(async()=>{try{const G=(await I.api.dictionaryV1List(void 0,x)).data.dictionaries;if(G){const X=G.filter(de=>de.uri&&de.name).map(de=>({value:de.uri,label:de.name})),te=G.reduce((de,re)=>re.uri?{...de,[re.uri]:re}:de,{});y(te)}}catch(z){console.error("Failed to fetch dictionaries:",z)}})()},[I,y,b]),me.jsx(Qw,{instance:t,children:me.jsxs(ml,{children:[me.jsx(zr,{type:"hidden",name:"ifcType",id:"ifcType",value:""}),me.jsx(zr,{type:"hidden",name:"name",id:"name",value:""}),me.jsx(zr,{type:"hidden",name:"material",id:"material",value:""}),me.jsx(oi,{mx:"md",mt:"lg",mb:"sm",children:me.jsx(Rb,{api:I,activeDomains:d,defaultValue:e==null?void 0:e.defaultSearch,setActiveClassificationUri:a,accessToken:b})}),me.jsxs(dt,{defaultValue:["Classifications"],multiple:!0,children:[me.jsxs(dt.Item,{value:"Classifications",children:[me.jsx(dt.Control,{children:me.jsx(Ts,{order:5,children:r("Classifications")})}),me.jsx(dt.Panel,{children:me.jsx(Pb,{api:I,activeClassificationUri:s,setClassifications:T,domains:g,accessToken:b})})]},"Classifications"),me.jsxs(dt.Item,{value:"Propertysets",children:[me.jsx(dt.Control,{children:me.jsx(Ts,{order:5,children:r("Propertysets")})}),me.jsx(dt.Panel,{children:me.jsx(Vb,{classifications:v,propertySets:A,setPropertySets:S,recursiveMode:c})})]},"Propertysets")]}),me.jsxs(oi,{my:"sm",justify:"center",children:[me.jsx(jb,{callback:o,domains:g,classifications:v,propertySetMap:A,ifcEntity:e.ifcEntity}),me.jsx(ci,{fullWidth:!0,variant:"light",color:"gray",children:r("Cancel")})]})]})})}const np=new mc(Ww);function Xb(o,e,t){ha.createRoot(o).render(me.jsx(m.StrictMode,{children:me.jsx(tp,{callback:e,config:t,msalInstance:np})}))}vt.default=tp,vt.insertBsddSearch=Xb,vt.msalInstance=np,Object.defineProperties(vt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
